var TL=Object.create;var Xa=Object.defineProperty;var RL=Object.getOwnPropertyDescriptor;var IL=Object.getOwnPropertyNames;var PL=Object.getPrototypeOf,OL=Object.prototype.hasOwnProperty;var b=(t,e)=>()=>(t&&(e=t(t=0)),e);var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),dt=(t,e)=>{for(var r in e)Xa(t,r,{get:e[r],enumerable:!0})},_0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of IL(e))!OL.call(t,s)&&s!==r&&Xa(t,s,{get:()=>e[s],enumerable:!(n=RL(e,s))||n.enumerable});return t};var w=(t,e,r)=>(r=t!=null?TL(PL(t)):{},_0(e||!t||!t.__esModule?Xa(r,"default",{value:t,enumerable:!0}):r,t)),re=t=>_0(Xa({},"__esModule",{value:!0}),t);var Xr=x(we=>{"use strict";we.HttpAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(we.HttpAuthLocation||(we.HttpAuthLocation={}));we.HttpApiKeyAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(we.HttpApiKeyAuthLocation||(we.HttpApiKeyAuthLocation={}));we.EndpointURLScheme=void 0;(function(t){t.HTTP="http",t.HTTPS="https"})(we.EndpointURLScheme||(we.EndpointURLScheme={}));we.AlgorithmId=void 0;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(we.AlgorithmId||(we.AlgorithmId={}));var kL=t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>we.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>we.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},NL=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},DL=t=>kL(t),ML=t=>NL(t);we.FieldPosition=void 0;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(we.FieldPosition||(we.FieldPosition={}));var FL="__smithy_context";we.IniSectionType=void 0;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(we.IniSectionType||(we.IniSectionType={}));we.RequestHandlerProtocol=void 0;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(we.RequestHandlerProtocol||(we.RequestHandlerProtocol={}));we.SMITHY_CONTEXT_KEY=FL;we.getDefaultClientConfiguration=DL;we.resolveDefaultRuntimeConfig=ML});var ye=x(Zr=>{"use strict";var LL=Xr(),BL=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),UL=t=>({httpHandler:t.httpHandler()}),Ep=class{name;kind;values;constructor({name:e,kind:r=LL.FieldPosition.HEADER,values:n=[]}){this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}},bp=class{entries={};encoding;constructor({fields:e=[],encoding:r="utf-8"}){e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}},_p=class t{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=$L(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}};function $L(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var wp=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function qL(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}Zr.Field=Ep;Zr.Fields=bp;Zr.HttpRequest=_p;Zr.HttpResponse=wp;Zr.getHttpHandlerExtensionConfiguration=BL;Zr.isValidHostname=qL;Zr.resolveHttpHandlerRuntimeConfig=UL});var Gs=x(di=>{"use strict";var jL=ye();function HL(t){return t}var w0=t=>e=>async r=>{if(!jL.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return e(r)},x0={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},zL=t=>({applyToStack:e=>{e.add(w0(t),x0)}});di.getHostHeaderPlugin=zL;di.hostHeaderMiddleware=w0;di.hostHeaderMiddlewareOptions=x0;di.resolveHostHeaderConfig=HL});var Ws=x(Za=>{"use strict";var C0=()=>(t,e)=>async r=>{try{let n=await t(r),{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,d=c??e.inputFilterSensitiveLog,l=u??e.outputFilterSensitiveLog,{$metadata:m,...h}=n.output;return i?.info?.({clientName:s,commandName:o,input:d(r.input),output:l(h),metadata:m}),n}catch(n){let{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:o,input:u(r.input),error:n,metadata:n.$metadata}),n}},A0={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},VL=t=>({applyToStack:e=>{e.add(C0(),A0)}});Za.getLoggerPlugin=VL;Za.loggerMiddleware=C0;Za.loggerMiddlewareOptions=A0});var v0={};dt(v0,{InvokeStore:()=>vp,InvokeStoreBase:()=>pi});var fi,xp,pi,Cp,Ap,vp,T0=b(()=>{fi={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},xp=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");xp||(globalThis.awslambda=globalThis.awslambda||{});pi=class{static PROTECTED_KEYS=fi;isProtectedKey(e){return Object.values(fi).includes(e)}getRequestId(){return this.get(fi.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(fi.X_RAY_TRACE_ID)}getTenantId(){return this.get(fi.TENANT_ID)}},Cp=class extends pi{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(e){return this.currentContext?.[e]}set(e,r){if(this.isProtectedKey(e))throw new Error(`Cannot modify protected Lambda context field: ${String(e)}`);this.currentContext=this.currentContext||{},this.currentContext[e]=r}run(e,r){return this.currentContext=e,r()}},Ap=class t extends pi{als;static async create(){let e=new t,r=await import("node:async_hooks");return e.als=new r.AsyncLocalStorage,e}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(e){return this.als.getStore()?.[e]}set(e,r){if(this.isProtectedKey(e))throw new Error(`Cannot modify protected Lambda context field: ${String(e)}`);let n=this.als.getStore();if(!n)throw new Error("No context available");n[e]=r}run(e,r){return this.als.run(e,r)}};(function(t){let e=null;async function r(){return e||(e=(async()=>{let s="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await Ap.create():new Cp;return!xp&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!xp&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=s),s)})()),e}t.getInstanceAsync=r,t._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{e=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={}}}:void 0})(vp||(vp={}))});var R0=x(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.recursionDetectionMiddleware=void 0;var KL=(T0(),re(v0)),GL=ye(),Tp="X-Amzn-Trace-Id",WL="AWS_LAMBDA_FUNCTION_NAME",QL="_X_AMZN_TRACE_ID",YL=()=>t=>async e=>{let{request:r}=e;if(!GL.HttpRequest.isInstance(r))return t(e);let n=Object.keys(r.headers??{}).find(d=>d.toLowerCase()===Tp.toLowerCase())??Tp;if(r.headers.hasOwnProperty(n))return t(e);let s=process.env[WL],o=process.env[QL],c=(await KL.InvokeStore.getInstanceAsync())?.getXRayTraceId()??o,u=d=>typeof d=="string"&&d.length>0;return u(s)&&u(c)&&(r.headers[Tp]=c),t({...e,request:r})};ec.recursionDetectionMiddleware=YL});var Qs=x(tc=>{"use strict";var Rp=R0(),JL={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},XL=t=>({applyToStack:e=>{e.add(Rp.recursionDetectionMiddleware(),JL)}});tc.getRecursionDetectionPlugin=XL;Object.keys(Rp).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(tc,t)&&Object.defineProperty(tc,t,{enumerable:!0,get:function(){return Rp[t]}})})});var Ip,ZL,I0=b(()=>{Ip=w(Xr()),ZL=t=>t[Ip.SMITHY_CONTEXT_KEY]||(t[Ip.SMITHY_CONTEXT_KEY]={})});var ft=x(Pp=>{"use strict";var P0=Xr(),eB=t=>t[P0.SMITHY_CONTEXT_KEY]||(t[P0.SMITHY_CONTEXT_KEY]={}),tB=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};Pp.getSmithyContext=eB;Pp.normalizeProvider=tB});var O0,k0=b(()=>{O0=(t,e)=>{if(!e||e.length===0)return t;let r=[];for(let n of e)for(let s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function rB(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var N0,hi,rc=b(()=>{N0=w(ft());k0();hi=(t,e)=>(r,n)=>async s=>{let o=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),i=t.authSchemePreference?await t.authSchemePreference():[],a=O0(o,i),c=rB(t.httpAuthSchemes),u=(0,N0.getSmithyContext)(n),d=[];for(let l of a){let m=c.get(l.schemeId);if(!m){d.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}let h=m.identityProvider(await e.identityProviderConfigProvider(t));if(!h){d.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:g={},signingProperties:C={}}=l.propertiesExtractor?.(t,n)||{};l.identityProperties=Object.assign(l.identityProperties||{},g),l.signingProperties=Object.assign(l.signingProperties||{},C),u.selectedHttpAuthScheme={httpAuthOption:l,identity:await h(l.identityProperties),signer:m.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(d.join(`
`));return r(s)}});var D0,rs,M0=b(()=>{rc();D0={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},rs=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(hi(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),D0)}})});var kp=x(Ys=>{"use strict";var nB=ye(),F0=(t,e)=>(r,n)=>async s=>{let{response:o}=await r(s);try{let i=await e(o,t);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(nB.HttpResponse.isInstance(o)){let{headers:c={}}=o,u=Object.entries(c);i.$metadata={httpStatusCode:o.statusCode,requestId:Op(/^x-[\w-]+-request-?id$/,u),extendedRequestId:Op(/^x-[\w-]+-id-2$/,u),cfId:Op(/^x-[\w-]+-cf-id$/,u)}}}catch{}}throw i}},Op=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],L0=(t,e)=>(r,n)=>async s=>{let o=t,i=n.endpointV2?.url&&o.urlParser?async()=>o.urlParser(n.endpointV2.url):o.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await e(s.input,{...t,endpoint:i});return r({...s,request:a})},B0={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},U0={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function sB(t,e,r){return{applyToStack:n=>{n.add(F0(t,r),B0),n.add(L0(t,e),U0)}}}Ys.deserializerMiddleware=F0;Ys.deserializerMiddlewareOption=B0;Ys.getSerdePlugin=sB;Ys.serializerMiddleware=L0;Ys.serializerMiddlewareOption=U0});var $0,q0,oB,j0=b(()=>{$0=w(kp());rc();q0={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:$0.serializerMiddlewareOption.name},oB=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(hi(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),q0)}})});var H0=b(()=>{rc();M0();j0()});var z0,V0,iB,aB,Np,Dp=b(()=>{z0=w(ye()),V0=w(ft()),iB=t=>e=>{throw e},aB=(t,e)=>{},Np=t=>(e,r)=>async n=>{if(!z0.HttpRequest.isInstance(n.request))return e(n);let o=(0,V0.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,u=await e({...n,request:await c.sign(n.request,a,i)}).catch((c.errorHandler||iB)(i));return(c.successHandler||aB)(u.response,i),u}});var K0,ns,G0=b(()=>{Dp();K0={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},ns=t=>({applyToStack:e=>{e.addRelativeTo(Np(t),K0)}})});var W0=b(()=>{Dp();G0()});var en,Q0=b(()=>{en=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function Y0(t,e,r,n,s){return async function*(i,a,...c){let u=a,d=i.startingToken??u[r],l=!0,m;for(;l;){if(u[r]=d,s&&(u[s]=u[s]??i.pageSize),i.client instanceof t)m=await cB(e,i.client,a,i.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield m;let h=d;d=uB(m,n),l=!!(d&&(!i.stopOnSameToken||d!==h))}return void 0}}var cB,uB,J0=b(()=>{cB=async(t,e,r,n=o=>o,...s)=>{let o=new t(r);return o=n(o)??o,await e.send(o,...s)};uB=(t,e)=>{let r=t,n=e.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var Mp=x(X0=>{"use strict";var lB=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";X0.isArrayBuffer=lB});var Js=x(Lp=>{"use strict";var dB=Mp(),Fp=require("buffer"),fB=(t,e=0,r=t.byteLength-e)=>{if(!dB.isArrayBuffer(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Fp.Buffer.from(t,e,r)},pB=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Fp.Buffer.from(t,e):Fp.Buffer.from(t)};Lp.fromArrayBuffer=fB;Lp.fromString=pB});var Z0=x(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.fromBase64=void 0;var hB=Js(),mB=/^[A-Za-z0-9+/]*={0,2}$/,gB=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!mB.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,hB.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};nc.fromBase64=gB});var Ue=x(sc=>{"use strict";var eb=Js(),tb=t=>{let e=eb.fromString(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},yB=t=>typeof t=="string"?tb(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),SB=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return eb.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength).toString("utf8")};sc.fromUtf8=tb;sc.toUint8Array=yB;sc.toUtf8=SB});var rb=x(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.toBase64=void 0;var EB=Js(),bB=Ue(),_B=t=>{let e;if(typeof t=="string"?e=(0,bB.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,EB.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};oc.toBase64=_B});var $e=x(mi=>{"use strict";var nb=Z0(),sb=rb();Object.keys(nb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(mi,t)&&Object.defineProperty(mi,t,{enumerable:!0,get:function(){return nb[t]}})});Object.keys(sb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(mi,t)&&Object.defineProperty(mi,t,{enumerable:!0,get:function(){return sb[t]}})})});var Up=x(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.ChecksumStream=void 0;var wB=$e(),xB=require("stream"),Bp=class extends xB.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:e,checksum:r,source:n,checksumSourceLocation:s,base64Encoder:o}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=o??wB.toBase64,this.expectedChecksum=e,this.checksum=r,this.checksumSourceLocation=s,this.source.pipe(this)}_read(e){}_write(e,r,n){try{this.checksum.update(e),this.push(e)}catch(s){return n(s)}return n()}async _final(e){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return e(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return e(r)}return this.push(null),e()}};ic.ChecksumStream=Bp});var tn=x(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.isBlob=Xs.isReadableStream=void 0;var CB=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);Xs.isReadableStream=CB;var AB=t=>typeof Blob=="function"&&(t?.constructor?.name===Blob.name||t instanceof Blob);Xs.isBlob=AB});var ob=x(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.ChecksumStream=void 0;var vB=typeof ReadableStream=="function"?ReadableStream:function(){},$p=class extends vB{};ac.ChecksumStream=$p});var ib=x(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.createChecksumStream=void 0;var TB=$e(),RB=tn(),IB=ob(),PB=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,RB.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let o=s??TB.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(c,u){e.update(c),u.enqueue(c)},async flush(c){let u=await e.digest(),d=o(u);if(t!==d){let l=new Error(`Checksum mismatch: expected "${t}" but received "${d}" in response header "${n}".`);c.error(l)}else c.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,IB.ChecksumStream.prototype),a};cc.createChecksumStream=PB});var ab=x(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});qp.createChecksumStream=DB;var OB=tn(),kB=Up(),NB=ib();function DB(t){return typeof ReadableStream=="function"&&(0,OB.isReadableStream)(t.source)?(0,NB.createChecksumStream)(t):new kB.ChecksumStream(t)}});var Hp=x(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.ByteArrayCollector=void 0;var jp=class{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let e=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}};uc.ByteArrayCollector=jp});var db=x(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.createBufferedReadable=void 0;Ir.createBufferedReadableStream=cb;Ir.merge=ub;Ir.flush=lc;Ir.sizeOf=Zs;Ir.modeOf=lb;var MB=Hp();function cb(t,e,r){let n=t.getReader(),s=!1,o=0,i=["",new MB.ByteArrayCollector(u=>new Uint8Array(u))],a=-1,c=async u=>{let{value:d,done:l}=await n.read(),m=d;if(l){if(a!==-1){let h=lc(i,a);Zs(h)>0&&u.enqueue(h)}u.close()}else{let h=lb(m,!1);if(a!==h&&(a>=0&&u.enqueue(lc(i,a)),a=h),a===-1){u.enqueue(m);return}let g=Zs(m);o+=g;let C=Zs(i[a]);if(g>=e&&C===0)u.enqueue(m);else{let T=ub(i,a,m);!s&&o>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${g} is below threshold of ${e}, automatically buffering.`)),T>=e?u.enqueue(lc(i,a)):await c(u)}}};return new ReadableStream({pull:c})}Ir.createBufferedReadable=cb;function ub(t,e,r){switch(e){case 0:return t[0]+=r,Zs(t[0]);case 1:case 2:return t[e].push(r),Zs(t[e])}}function lc(t,e){switch(e){case 0:let r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Zs(t){return t?.byteLength??t?.length??0}function lb(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}});var pb=x(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.createBufferedReadable=BB;var FB=require("node:stream"),fb=Hp(),Pr=db(),LB=tn();function BB(t,e,r){if((0,LB.isReadableStream)(t))return(0,Pr.createBufferedReadableStream)(t,e,r);let n=new FB.Readable({read(){}}),s=!1,o=0,i=["",new fb.ByteArrayCollector(c=>new Uint8Array(c)),new fb.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return t.on("data",c=>{let u=(0,Pr.modeOf)(c,!0);if(a!==u&&(a>=0&&n.push((0,Pr.flush)(i,a)),a=u),a===-1){n.push(c);return}let d=(0,Pr.sizeOf)(c);o+=d;let l=(0,Pr.sizeOf)(i[a]);if(d>=e&&l===0)n.push(c);else{let m=(0,Pr.merge)(i,a,c);!s&&o>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${d} is below threshold of ${e}, automatically buffering.`)),m>=e&&n.push((0,Pr.flush)(i,a))}}),t.on("end",()=>{if(a!==-1){let c=(0,Pr.flush)(i,a);(0,Pr.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var hb=x(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.getAwsChunkedEncodingStream=void 0;var UB=require("stream"),$B=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:o,streamHasher:i}=e,a=r!==void 0&&s!==void 0&&o!==void 0&&i!==void 0,c=a?i(s,t):void 0,u=new UB.Readable({read:()=>{}});return t.on("data",d=>{let l=n(d)||0;u.push(`${l.toString(16)}\r
`),u.push(d),u.push(`\r
`)}),t.on("end",async()=>{if(u.push(`0\r
`),a){let d=r(await c);u.push(`${o}:${d}\r
`),u.push(`\r
`)}u.push(null)}),u};dc.getAwsChunkedEncodingStream=$B});var mb=x(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});Vp.headStream=qB;async function qB(t,e){let r=0,n=[],s=t.getReader(),o=!1;for(;!o;){let{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=u?.byteLength??0),r>=e)break;o=c}s.releaseLock();let i=new Uint8Array(Math.min(e,r)),a=0;for(let c of n){if(c.byteLength>i.byteLength-a){i.set(c.subarray(0,i.byteLength-a),a);break}else i.set(c,a);a+=c.length}return i}});var gb=x(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.headStream=void 0;var jB=require("stream"),HB=mb(),zB=tn(),VB=(t,e)=>(0,zB.isReadableStream)(t)?(0,HB.headStream)(t,e):new Promise((r,n)=>{let s=new Kp;s.limit=e,t.pipe(s),t.on("error",o=>{s.end(),n(o)}),s.on("error",n),s.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})});fc.headStream=VB;var Kp=class extends jB.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(e,r,n){if(this.buffers.push(e),this.bytesBuffered+=e.byteLength??0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-s),this.emit("finish")}n()}}});var Wp=x(Gp=>{"use strict";var yb=t=>encodeURIComponent(t).replace(/[!'()*]/g,KB),KB=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,GB=t=>t.split("/").map(yb).join("/");Gp.escapeUri=yb;Gp.escapeUriPath=GB});var Yp=x(Sb=>{"use strict";var Qp=Wp();function WB(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=Qp.escapeUri(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)e.push(`${r}=${Qp.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Qp.escapeUri(n)}`),e.push(s)}}return e.join("&")}Sb.buildQueryString=WB});var Or=x(gi=>{"use strict";var wb=ye(),xb=Yp(),pc=require("http"),hc=require("https"),Cb=require("stream"),Jp=require("http2"),QB=["ECONNRESET","EPIPE","ETIMEDOUT"],Ab=t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},pt={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},Eb=1e3,YB=(t,e,r=0)=>{if(!r)return-1;let n=s=>{let o=pt.setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),i=a=>{a?.connecting?a.on("connect",()=>{pt.clearTimeout(o)}):pt.clearTimeout(o)};t.socket?i(t.socket):t.on("socket",i)};return r<2e3?(n(0),0):pt.setTimeout(n.bind(null,Eb),Eb)},JB=(t,e,r=0,n,s)=>r?pt.setTimeout(()=>{let o=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let i=Object.assign(new Error(o),{name:"TimeoutError",code:"ETIMEDOUT"});t.destroy(i),e(i)}else o+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(o)},r):-1,XB=3e3,ZB=(t,{keepAlive:e,keepAliveMsecs:r},n=XB)=>{if(e!==!0)return-1;let s=()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",o=>{o.setKeepAlive(e,r||0)})};return n===0?(s(),0):pt.setTimeout(s,n)},bb=3e3,eU=(t,e,r=0)=>{let n=s=>{let o=r-s,i=()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};t.socket?(t.socket.setTimeout(o,i),t.on("close",()=>t.socket?.removeListener("timeout",i))):t.setTimeout(o,i)};return 0<r&&r<6e3?(n(0),0):pt.setTimeout(n.bind(null,r===0?0:bb),bb)},_b=6e3;async function vb(t,e,r=_b,n=!1){let s=e.headers??{},o=s.Expect||s.expect,i=-1,a=!0;!n&&o==="100-continue"&&(a=await Promise.race([new Promise(c=>{i=Number(pt.setTimeout(()=>c(!0),Math.max(_b,r)))}),new Promise(c=>{t.on("continue",()=>{pt.clearTimeout(i),c(!0)}),t.on("response",()=>{pt.clearTimeout(i),c(!1)}),t.on("error",()=>{pt.clearTimeout(i),c(!1)})})])),a&&tU(t,e.body)}function tU(t,e){if(e instanceof Cb.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}var rU=0,Xp=class t{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(e){return typeof e?.handle=="function"?e:new t(e)}static checkSocketUsage(e,r,n=console){let{sockets:s,requests:o,maxSockets:i}=e;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(s&&o)for(let c in s){let u=s[c]?.length??0,d=o[c]?.length??0;if(u>=i&&d>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${d} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(e){this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:c}=e||{},u=!0,d=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:c,httpAgent:i instanceof pc.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new pc.Agent({keepAlive:u,maxSockets:d,...i}),httpsAgent:a instanceof hc.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new hc.Agent({keepAlive:u,maxSockets:d,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,o)=>{let i=this.config,a,c=[],u=async G=>{await a,c.forEach(pt.clearTimeout),s(G)},d=async G=>{await a,c.forEach(pt.clearTimeout),o(G)};if(r?.aborted){let G=new Error("Request aborted");G.name="AbortError",d(G);return}let l=e.protocol==="https:",m=e.headers??{},h=(m.Expect??m.expect)==="100-continue",g=l?i.httpsAgent:i.httpAgent;h&&!this.externalAgent&&(g=new(l?hc.Agent:pc.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(pt.setTimeout(()=>{this.socketWarningTimestamp=t.checkSocketUsage(g,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let C=xb.buildQueryString(e.query||{}),T;if(e.username!=null||e.password!=null){let G=e.username??"",ne=e.password??"";T=`${G}:${ne}`}let R=e.path;C&&(R+=`?${C}`),e.fragment&&(R+=`#${e.fragment}`);let O=e.hostname??"";O[0]==="["&&O.endsWith("]")?O=e.hostname.slice(1,-1):O=e.hostname;let D={headers:e.headers,host:O,method:e.method,path:R,port:e.port,agent:g,auth:T},j=(l?hc.request:pc.request)(D,G=>{let ne=new wb.HttpResponse({statusCode:G.statusCode||-1,reason:G.statusMessage,headers:Ab(G.headers),body:G});u({response:ne})});if(j.on("error",G=>{QB.includes(G.code)?d(Object.assign(G,{name:"TimeoutError"})):d(G)}),r){let G=()=>{j.destroy();let ne=new Error("Request aborted");ne.name="AbortError",d(ne)};if(typeof r.addEventListener=="function"){let ne=r;ne.addEventListener("abort",G,{once:!0}),j.once("close",()=>ne.removeEventListener("abort",G))}else r.onabort=G}let Q=n??i.requestTimeout;c.push(YB(j,d,i.connectionTimeout)),c.push(JB(j,d,Q,i.throwOnRequestTimeout,i.logger??console)),c.push(eU(j,d,i.socketTimeout));let ve=D.agent;typeof ve=="object"&&"keepAlive"in ve&&c.push(ZB(j,{keepAlive:ve.keepAlive,keepAliveMsecs:ve.keepAliveMsecs})),a=vb(j,e,Q,this.externalAgent).catch(G=>(c.forEach(pt.clearTimeout),o(G)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}},Zp=class{sessions=[];constructor(e){this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}},eh=class{constructor(e){if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(e,r){let n=this.getUrlString(e),s=this.sessionCache.get(n);if(s){let c=s.poll();if(c&&!this.config.disableConcurrency)return c}let o=Jp.connect(n);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),o.unref();let i=()=>{o.destroy(),this.deleteSession(n,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(n,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new Zp;return a.offerLast(o),this.sessionCache.set(n,a),o}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},th=class t{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new eh({});static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(n):r(e||{})})}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:o}=this.config,i=n??s;return new Promise((a,c)=>{let u=!1,d,l=async _e=>{await d,a(_e)},m=async _e=>{await d,c(_e)};if(r?.aborted){u=!0;let _e=new Error("Request aborted");_e.name="AbortError",m(_e);return}let{hostname:h,method:g,port:C,protocol:T,query:R}=e,O="";if(e.username!=null||e.password!=null){let _e=e.username??"",Ve=e.password??"";O=`${_e}:${Ve}@`}let D=`${T}//${O}${h}${C?`:${C}`:""}`,M={destination:new URL(D)},j=this.connectionManager.lease(M,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:o||!1}),Q=_e=>{o&&this.destroySession(j),u=!0,m(_e)},ve=xb.buildQueryString(R||{}),G=e.path;ve&&(G+=`?${ve}`),e.fragment&&(G+=`#${e.fragment}`);let ne=j.request({...e.headers,[Jp.constants.HTTP2_HEADER_PATH]:G,[Jp.constants.HTTP2_HEADER_METHOD]:g});if(j.ref(),ne.on("response",_e=>{let Ve=new wb.HttpResponse({statusCode:_e[":status"]||-1,headers:Ab(_e),body:ne});u=!0,l({response:Ve}),o&&(j.close(),this.connectionManager.deleteSession(D,j))}),i&&ne.setTimeout(i,()=>{ne.close();let _e=new Error(`Stream timed out because of no activity for ${i} ms`);_e.name="TimeoutError",Q(_e)}),r){let _e=()=>{ne.close();let Ve=new Error("Request aborted");Ve.name="AbortError",Q(Ve)};if(typeof r.addEventListener=="function"){let Ve=r;Ve.addEventListener("abort",_e,{once:!0}),ne.once("close",()=>Ve.removeEventListener("abort",_e))}else r.onabort=_e}ne.on("frameError",(_e,Ve,xt)=>{Q(new Error(`Frame type id ${_e} in stream id ${xt} has failed with code ${Ve}.`))}),ne.on("error",Q),ne.on("aborted",()=>{Q(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${ne.rstCode}.`))}),ne.on("close",()=>{j.unref(),o&&j.destroy(),u||Q(new Error("Unexpected error: http2 request did not get a response"))}),d=vb(ne,e,i)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},rh=class extends Cb.Writable{bufferedBytes=[];_write(e,r,n){this.bufferedBytes.push(e),n()}},nU=t=>sU(t)?oU(t):new Promise((e,r)=>{let n=new rh;t.pipe(n),t.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),sU=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;async function oU(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let o=new Uint8Array(s),i=0;for(let a of e)o.set(a,i),i+=a.length;return o}gi.DEFAULT_REQUEST_TIMEOUT=rU;gi.NodeHttp2Handler=th;gi.NodeHttpHandler=Xp;gi.streamCollector=nU});var Ib=x(gc=>{"use strict";var Tb=ye(),iU=Yp(),aU=$e();function Rb(t,e){return new Request(t,e)}function cU(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}var mc={supported:void 0},nh=class t{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),mc.supported===void 0&&(mc.supported=typeof Request<"u"&&"keepalive"in Rb("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let O=new Error("Request aborted");return O.name="AbortError",Promise.reject(O)}let a=e.path,c=iU.buildQueryString(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){let O=e.username??"",D=e.password??"";u=`${O}:${D}@`}let{port:d,method:l}=e,m=`${e.protocol}//${u}${e.hostname}${d?`:${d}`:""}${a}`,h=l==="GET"||l==="HEAD"?void 0:e.body,g={body:h,headers:new Headers(e.headers),method:l,credentials:i};this.config?.cache&&(g.cache=this.config.cache),h&&(g.duplex="half"),typeof AbortController<"u"&&(g.signal=r),mc.supported&&(g.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(g,this.config.requestInit(e));let C=()=>{},T=Rb(m,g),R=[fetch(T).then(O=>{let D=O.headers,M={};for(let Q of D.entries())M[Q[0]]=Q[1];return O.body!=null?{response:new Tb.HttpResponse({headers:M,reason:O.statusText,statusCode:O.status,body:O.body})}:O.blob().then(Q=>({response:new Tb.HttpResponse({headers:M,reason:O.statusText,statusCode:O.status,body:Q})}))}),cU(s)];return r&&R.push(new Promise((O,D)=>{let M=()=>{let j=new Error("Request aborted");j.name="AbortError",D(j)};if(typeof r.addEventListener=="function"){let j=r;j.addEventListener("abort",M,{once:!0}),C=()=>j.removeEventListener("abort",M)}else r.onabort=M})),Promise.race(R).finally(C)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}},uU=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):lU(t):dU(t);async function lU(t){let e=await fU(t),r=aU.fromBase64(e);return new Uint8Array(r)}async function dU(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let o=new Uint8Array(s),i=0;for(let a of e)o.set(a,i),i+=a.length;return o}function fU(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",o=s.indexOf(","),i=o>-1?o+1:s.length;e(s.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}gc.FetchHttpHandler=nh;gc.keepAliveSupport=mc;gc.streamCollector=uU});var yc=x(oh=>{"use strict";var Pb={},sh={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Pb[t]=e,sh[e]=t}function pU(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in sh)e[r/2]=sh[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function hU(t){let e="";for(let r=0;r<t.byteLength;r++)e+=Pb[t[r]];return e}oh.fromHex=pU;oh.toHex=hU});var Db=x(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.sdkStreamMixin=void 0;var mU=Ib(),gU=$e(),yU=yc(),SU=Ue(),Ob=tn(),kb="The stream has already been transformed.",EU=t=>{if(!Nb(t)&&!(0,Ob.isReadableStream)(t)){let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(kb);return e=!0,await(0,mU.streamCollector)(t)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{let o=await r();if(s==="base64")return(0,gU.toBase64)(o);if(s==="hex")return(0,yU.toHex)(o);if(s===void 0||s==="utf8"||s==="utf-8")return(0,SU.toUtf8)(o);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(kb);if(e=!0,Nb(t))return n(t);if((0,Ob.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};Sc.sdkStreamMixin=EU;var Nb=t=>typeof Blob=="function"&&t instanceof Blob});var Fb=x(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.sdkStreamMixin=void 0;var bU=Or(),_U=Js(),ih=require("stream"),wU=Db(),Mb="The stream has already been transformed.",xU=t=>{if(!(t instanceof ih.Readable))try{return(0,wU.sdkStreamMixin)(t)}catch{let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(Mb);return e=!0,await(0,bU.streamCollector)(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,_U.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(e)throw new Error(Mb);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof ih.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return e=!0,ih.Readable.toWeb(t)}})};Ec.sdkStreamMixin=xU});var Lb=x(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.splitStream=CU;async function CU(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}});var $b=x(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.splitStream=vU;var Bb=require("stream"),AU=Lb(),Ub=tn();async function vU(t){if((0,Ub.isReadableStream)(t)||(0,Ub.isBlob)(t))return(0,AU.splitStream)(t);let e=new Bb.PassThrough,r=new Bb.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}});var bc=x(qe=>{"use strict";var qb=$e(),jb=Ue(),Hb=Up(),zb=ab(),Vb=pb(),Kb=hb(),Gb=gb(),Wb=Fb(),Qb=$b(),Yb=tn(),uh=class t extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?t.mutate(qb.fromBase64(e)):t.mutate(jb.fromUtf8(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return e==="base64"?qb.toBase64(this):jb.toUtf8(this)}};qe.Uint8ArrayBlobAdapter=uh;Object.keys(Hb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return Hb[t]}})});Object.keys(zb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return zb[t]}})});Object.keys(Vb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return Vb[t]}})});Object.keys(Kb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return Kb[t]}})});Object.keys(Gb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return Gb[t]}})});Object.keys(Wb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return Wb[t]}})});Object.keys(Qb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return Qb[t]}})});Object.keys(Yb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return Yb[t]}})})});var _c,Lt,wc=b(()=>{_c=w(bc()),Lt=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return _c.Uint8ArrayBlobAdapter.mutate(t);if(!t)return _c.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return _c.Uint8ArrayBlobAdapter.mutate(await r)}});function ar(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var xc=b(()=>{});var Qt,lh=b(()=>{Qt=t=>typeof t=="function"?t():t});var yi,Cc=b(()=>{yi=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s})});var Jb,Xb,Zb,dh,e_=b(()=>{Jb=w(ye()),Xb=w(ft());Cc();Zb=t=>(e,r)=>async n=>{let{response:s}=await e(n),{operationSchema:o}=(0,Xb.getSmithyContext)(r),[,i,a,c,u,d]=o??[];try{let l=await t.protocol.deserializeResponse(yi(i,a,c,u,d),{...t,...r},s);return{response:s,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in l)){let m="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+m}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(m):r.logger?.warn?.(m)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText);try{if(Jb.HttpResponse.isInstance(s)){let{headers:h={}}=s,g=Object.entries(h);l.$metadata={httpStatusCode:s.statusCode,requestId:dh(/^x-[\w-]+-request-?id$/,g),extendedRequestId:dh(/^x-[\w-]+-id-2$/,g),cfId:dh(/^x-[\w-]+-cf-id$/,g)}}}catch{}}throw l}},dh=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1]});var t_,r_,n_=b(()=>{t_=w(ft());Cc();r_=t=>(e,r)=>async n=>{let{operationSchema:s}=(0,t_.getSmithyContext)(r),[,o,i,a,c,u]=s??[],d=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,l=await t.protocol.serializeRequest(yi(o,i,a,c,u),n.input,{...t,...r,endpoint:d});return e({...n,request:l})}});function ss(t){return{applyToStack:e=>{e.add(r_(t),o_),e.add(Zb(t),s_),t.protocol.setSerdeContext(t)}}}var s_,o_,i_=b(()=>{e_();n_();s_={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},o_={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Me,rn=b(()=>{Me=class{name;namespace;traits;static assign(e,r){return Object.assign(e,r)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Ac,TU,a_=b(()=>{rn();Ac=class t extends Me{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=t.symbol},TU=(t,e,r,n)=>Me.assign(new Ac,{name:e,namespace:t,traits:r,valueSchema:n})});var vc,RU,c_=b(()=>{rn();vc=class t extends Me{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=t.symbol},RU=(t,e,r,n,s)=>Me.assign(new vc,{name:e,namespace:t,traits:r,keySchema:n,valueSchema:s})});var Tc,IU,u_=b(()=>{rn();Tc=class t extends Me{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=t.symbol},IU=(t,e,r,n,s)=>Me.assign(new Tc,{name:e,namespace:t,traits:r,input:n,output:s})});var eo,PU,fh=b(()=>{rn();eo=class t extends Me{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=t.symbol},PU=(t,e,r,n,s)=>Me.assign(new eo,{name:e,namespace:t,traits:r,memberNames:n,memberList:s})});var Rc,OU,l_=b(()=>{rn();fh();Rc=class t extends eo{static symbol=Symbol.for("@smithy/err");ctor;symbol=t.symbol},OU=(t,e,r,n,s,o)=>Me.assign(new Rc,{name:e,namespace:t,traits:r,memberNames:n,memberList:s,ctor:null})});function cr(t){if(typeof t=="object")return t;t=t|0;let e={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}var ph=b(()=>{});function Si(t,e){if(t instanceof F)return Object.assign(t,{memberName:e,_isMemberSchema:!0});let r=F;return new r(t,e)}var F,hh,d_,f_=b(()=>{lh();ph();F=class t{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=t.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;let n=[],s=e,o=e;for(this._isMemberSchema=!1;hh(s);)n.push(s[1]),s=s[0],o=Qt(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,cr(a))}}else this.memberTraits=0;if(o instanceof t){let i=this.memberTraits;Object.assign(this,o),this.memberTraits=Object.assign({},i,o.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??o.memberName;return}if(this.schema=Qt(o),d_(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(o),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){let r=Qt(e);if(r instanceof t)return r;if(hh(r)){let[n,s]=r;if(n instanceof t)return Object.assign(n.getMergedTraits(),cr(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new t(r)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){let r=this.getSchema()[0];return r===3||r===-3||r===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){let e=o=>(o&4)===4||!!o?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return e(r)||e(n)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return cr(this.memberTraits)}getOwnTraits(){return cr(this.traits)}getKeySchema(){let[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=e?15:n[4]??0;return Si([s,0],"key")}getValueSchema(){let e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],o=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(o!=null)return Si([o,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){let n=r[4].indexOf(e),s=r[5][n];return Si(hh(s)?s:[s,0],e)}if(this.isDocumentSchema())return Si([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],Si([e[5][r],0],e[4][r])]}};hh=t=>Array.isArray(t)&&t.length===2,d_=t=>Array.isArray(t)&&t.length>=5});var Ei,kU,NU,p_=b(()=>{rn();Ei=class t extends Me{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=t.symbol},kU=(t,e,r,n)=>Me.assign(new Ei,{name:e,namespace:t,traits:n,schemaRef:r}),NU=(t,e,r,n)=>Me.assign(new Ei,{name:e,namespace:t,traits:r,schemaRef:n})});var DU,h_=b(()=>{DU={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var H,m_=b(()=>{H=class t{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,n=new Map){this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return t.registries.has(e)||t.registries.set(e,new t(e)),t.registries.get(e)}register(e,r){let n=this.normalizeShapeId(e);t.for(n.split("#")[0]).schemas.set(n,r)}getSchema(e){let r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){let n=e,s=t.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(e){let r=e;return t.for(r[1]).exceptions.get(r)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}});var Ic={};dt(Ic,{ErrorSchema:()=>Rc,ListSchema:()=>Ac,MapSchema:()=>vc,NormalizedSchema:()=>F,OperationSchema:()=>Tc,SCHEMA:()=>DU,Schema:()=>Me,SimpleSchema:()=>Ei,StructureSchema:()=>eo,TypeRegistry:()=>H,deref:()=>Qt,deserializerMiddlewareOption:()=>s_,error:()=>OU,getSchemaSerdePlugin:()=>ss,isStaticSchema:()=>d_,list:()=>TU,map:()=>RU,op:()=>IU,operation:()=>yi,serializerMiddlewareOption:()=>o_,sim:()=>kU,simAdapter:()=>NU,struct:()=>PU,translateTraits:()=>cr});var le=b(()=>{lh();i_();a_();c_();u_();Cc();l_();f_();rn();p_();fh();h_();ph();m_()});var MU,g_=b(()=>{MU=(t,e,r=n=>n)=>t});var FU,LU,bi,BU,Pc,_i,UU,mh,gh,yh,Sh,$U,qU,y_,jU,HU,kc,zU,Eh,VU,to,bh,KU,GU,WU,S_,E_,QU,YU,os,_h,Oc,wi,wh=b(()=>{FU=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},LU=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&wi.warn(Oc(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&wi.warn(Oc(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},bi=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&wi.warn(Oc(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},BU=Math.ceil(34028234663852886e22),Pc=t=>{let e=bi(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>BU)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},_i=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},UU=_i,mh=t=>Sh(t,32),gh=t=>Sh(t,16),yh=t=>Sh(t,8),Sh=(t,e)=>{let r=_i(t);if(r!==void 0&&$U(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},$U=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},qU=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},y_=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},jU=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return wi.warn(Oc(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},HU=t=>{if(t==null)return;let e=y_(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},kc=t=>bi(typeof t=="string"?to(t):t),zU=kc,Eh=t=>Pc(typeof t=="string"?to(t):t),VU=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,to=t=>{let e=t.match(VU);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},bh=t=>typeof t=="string"?S_(t):bi(t),KU=bh,GU=bh,WU=t=>typeof t=="string"?S_(t):Pc(t),S_=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},E_=t=>_i(typeof t=="string"?to(t):t),QU=E_,YU=t=>mh(typeof t=="string"?to(t):t),os=t=>gh(typeof t=="string"?to(t):t),_h=t=>yh(typeof t=="string"?to(t):t),Oc=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),wi={warn:console.warn}});function Ci(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),o=t.getUTCHours(),i=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=o<10?`0${o}`:`${o}`,d=i<10?`0${i}`:`${i}`,l=a<10?`0${a}`:`${a}`;return`${JU[n]}, ${c} ${Ch[r]} ${e} ${u}:${d}:${l} GMT`}var JU,Ch,XU,ZU,e$,Ah,t$,r$,n$,vh,Th,xi,s$,o$,i$,xh,a$,c$,u$,ur,l$,d$,ro,b_=b(()=>{wh();JU=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ch=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];XU=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),ZU=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=XU.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,c,u]=e,d=os(ro(n)),l=ur(s,"month",1,12),m=ur(o,"day",1,31);return xi(d,l,m,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})},e$=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Ah=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=e$.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,c,u,d]=e,l=os(ro(n)),m=ur(s,"month",1,12),h=ur(o,"day",1,31),g=xi(l,m,h,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u});return d.toUpperCase()!="Z"&&g.setTime(g.getTime()-d$(d)),g},t$=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),r$=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),n$=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),vh=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=t$.exec(t);if(e){let[r,n,s,o,i,a,c,u]=e;return xi(os(ro(o)),xh(s),ur(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})}if(e=r$.exec(t),e){let[r,n,s,o,i,a,c,u]=e;return i$(xi(s$(o),xh(s),ur(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(e=n$.exec(t),e){let[r,n,s,o,i,a,c,u]=e;return xi(os(ro(u)),xh(n),ur(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},Th=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=kc(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},xi=(t,e,r,n)=>{let s=e-1;return c$(t,s,r),new Date(Date.UTC(t,s,r,ur(n.hours,"hour",0,23),ur(n.minutes,"minute",0,59),ur(n.seconds,"seconds",0,60),l$(n.fractionalMilliseconds)))},s$=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+os(ro(t));return r<e?r+100:r},o$=50*365*24*60*60*1e3,i$=t=>t.getTime()-new Date().getTime()>o$?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,xh=t=>{let e=Ch.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},a$=[31,28,31,30,31,30,31,31,30,31,30,31],c$=(t,e,r)=>{let n=a$[e];if(e===1&&u$(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Ch[e]} in ${t}: ${r}`)},u$=t=>t%4===0&&(t%100!==0||t%400===0),ur=(t,e,r,n)=>{let s=_h(ro(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},l$=t=>t==null?0:Eh("0."+t)*1e3,d$=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},ro=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)}});var is={};dt(is,{__addDisposableResource:()=>V_,__assign:()=>Nc,__asyncDelegator:()=>L_,__asyncGenerator:()=>F_,__asyncValues:()=>B_,__await:()=>no,__awaiter:()=>P_,__classPrivateFieldGet:()=>j_,__classPrivateFieldIn:()=>z_,__classPrivateFieldSet:()=>H_,__createBinding:()=>Mc,__decorate:()=>x_,__disposeResources:()=>K_,__esDecorate:()=>A_,__exportStar:()=>k_,__extends:()=>__,__generator:()=>O_,__importDefault:()=>q_,__importStar:()=>$_,__makeTemplateObject:()=>U_,__metadata:()=>I_,__param:()=>C_,__propKey:()=>T_,__read:()=>Ph,__rest:()=>w_,__rewriteRelativeImportExtension:()=>G_,__runInitializers:()=>v_,__setFunctionName:()=>R_,__spread:()=>N_,__spreadArray:()=>M_,__spreadArrays:()=>D_,__values:()=>Dc,default:()=>h$});function __(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Rh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function w_(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function x_(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function C_(t,e){return function(r,n){e(r,n,t)}}function A_(t,e,r,n,s,o){function i(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),l,m=!1,h=r.length-1;h>=0;h--){var g={};for(var C in n)g[C]=C==="access"?{}:n[C];for(var C in n.access)g.access[C]=n.access[C];g.addInitializer=function(R){if(m)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(R||null))};var T=(0,r[h])(a==="accessor"?{get:d.get,set:d.set}:d[c],g);if(a==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(l=i(T.get))&&(d.get=l),(l=i(T.set))&&(d.set=l),(l=i(T.init))&&s.unshift(l)}else(l=i(T))&&(a==="field"?s.unshift(l):d[c]=l)}u&&Object.defineProperty(u,n.name,d),m=!0}function v_(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function T_(t){return typeof t=="symbol"?t:"".concat(t)}function R_(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function I_(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function P_(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(l){i(l)}}function c(d){try{u(n.throw(d))}catch(l){i(l)}}function u(d){d.done?o(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function O_(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function k_(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Mc(e,t,r)}function Dc(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ph(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function N_(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ph(arguments[e]));return t}function D_(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function M_(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function no(t){return this instanceof no?(this.v=t,this):new no(t)}function F_(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(h){return function(g){return Promise.resolve(g).then(h,l)}}function a(h,g){n[h]&&(s[h]=function(C){return new Promise(function(T,R){o.push([h,C,T,R])>1||c(h,C)})},g&&(s[h]=g(s[h])))}function c(h,g){try{u(n[h](g))}catch(C){m(o[0][3],C)}}function u(h){h.value instanceof no?Promise.resolve(h.value.v).then(d,l):m(o[0][2],h)}function d(h){c("next",h)}function l(h){c("throw",h)}function m(h,g){h(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function L_(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:no(t[s](i)),done:!1}:o?o(i):i}:o}}function B_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Dc=="function"?Dc(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(a,c){i=t[o](i),s(a,c,i.done,i.value)})}}function s(o,i,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},i)}}function U_(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function $_(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Ih(t),n=0;n<r.length;n++)r[n]!=="default"&&Mc(e,t,r[n]);return f$(e,t),e}function q_(t){return t&&t.__esModule?t:{default:t}}function j_(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function H_(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function z_(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function V_(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function K_(t){function e(o){t.error=t.hasError?new p$(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function G_(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,i){return n?e?".jsx":".js":s&&(!o||!i)?r:s+o+"."+i.toLowerCase()+"js"}):t}var Rh,Nc,Mc,f$,Ih,p$,h$,as=b(()=>{Rh=function(t,e){return Rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Rh(t,e)};Nc=function(){return Nc=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Nc.apply(this,arguments)};Mc=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});f$=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Ih=function(t){return Ih=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Ih(t)};p$=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};h$={__extends:__,__assign:Nc,__rest:w_,__decorate:x_,__param:C_,__esDecorate:A_,__runInitializers:v_,__propKey:T_,__setFunctionName:R_,__metadata:I_,__awaiter:P_,__generator:O_,__createBinding:Mc,__exportStar:k_,__values:Dc,__read:Ph,__spread:N_,__spreadArrays:D_,__spreadArray:M_,__await:no,__asyncGenerator:F_,__asyncDelegator:L_,__asyncValues:B_,__makeTemplateObject:U_,__importStar:$_,__importDefault:q_,__classPrivateFieldGet:j_,__classPrivateFieldSet:H_,__classPrivateFieldIn:z_,__addDisposableResource:V_,__disposeResources:K_,__rewriteRelativeImportExtension:G_}});var Q_=x(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.randomUUID=void 0;var m$=(as(),re(is)),W_=m$.__importDefault(require("crypto"));Fc.randomUUID=W_.default.randomUUID.bind(W_.default)});var Oh=x(J_=>{"use strict";var Y_=Q_(),Ze=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),g$=()=>{if(Y_.randomUUID)return Y_.randomUUID();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,Ze[t[0]]+Ze[t[1]]+Ze[t[2]]+Ze[t[3]]+"-"+Ze[t[4]]+Ze[t[5]]+"-"+Ze[t[6]]+Ze[t[7]]+"-"+Ze[t[8]]+Ze[t[9]]+"-"+Ze[t[10]]+Ze[t[11]]+Ze[t[12]]+Ze[t[13]]+Ze[t[14]]+Ze[t[15]]};J_.v4=g$});var Bt,X_=b(()=>{Bt=w(Oh())});var ht,Z_=b(()=>{ht=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};ht.from=t=>t&&typeof t=="object"&&(t instanceof ht||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?ht(String(t)):ht(JSON.stringify(t));ht.fromObject=ht.from});function kh(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}var ew=b(()=>{});function kr(t,e,r){let n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}var Nh,Dh,Mh,tw,rw,y$,S$,E$,b$,_$,so,Fh,Lh,nw=b(()=>{Nh="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Dh="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Mh="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",tw="(\\d?\\d)",rw="(\\d{4})",y$=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),S$=new RegExp(`^${Nh}, ${tw} ${Dh} ${rw} ${Mh} GMT$`),E$=new RegExp(`^${Nh}, ${tw}-${Dh}-(\\d\\d) ${Mh} GMT$`),b$=new RegExp(`^${Nh} ${Dh} ( [1-9]|\\d\\d) ${Mh} ${rw}$`),_$=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],so=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},Fh=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");let e=y$.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,r,n,s,o,i,a,,c,u]=e;kr(n,1,12),kr(s,1,31),kr(o,0,23),kr(i,0,59),kr(a,0,60);let d=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(o),Number(i),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(d.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){let[,l,m,h]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],g=l==="-"?1:-1;d.setTime(d.getTime()+g*(Number(m)*60*60*1e3+Number(h)*60*1e3))}return d},Lh=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,o,i,a,c;if((c=S$.exec(t))?[,e,r,n,s,o,i,a]=c:(c=E$.exec(t))?([,e,r,n,s,o,i,a]=c,n=(Number(n)+1900).toString()):(c=b$.exec(t))&&([,r,e,s,o,i,a,n]=c),n&&i){let u=Date.UTC(Number(n),_$.indexOf(r),Number(e),Number(s),Number(o),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);kr(e,1,31),kr(s,0,23),kr(o,0,59),kr(i,0,60);let d=new Date(u);return d.setUTCFullYear(Number(n)),d}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)}});function Bh(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let s=[],o="";for(let i=0;i<n.length;i++)o===""?o=n[i]:o+=e+n[i],(i+1)%r===0&&(s.push(o),o="");return o!==""&&s.push(o),s}var sw=b(()=>{});var Ai,ow=b(()=>{Ai=t=>{let e=t.length,r=[],n=!1,s,o=0;for(let i=0;i<e;++i){let a=t[i];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(o,i)),o=i+1);break;default:}s=a}return r.push(t.slice(o)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function Uh(t){return new Te(String(t),"bigDecimal")}var iw,Te,aw=b(()=>{iw=/^-?\d*(\.\d+)?$/,Te=class t{string;type;constructor(e,r){if(this.string=e,this.type=r,!iw.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;let r=e;return t.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&iw.test(r.string)}}});var cw={};dt(cw,{LazyJsonString:()=>ht,NumericValue:()=>Te,_parseEpochTimestamp:()=>so,_parseRfc3339DateTimeWithOffset:()=>Fh,_parseRfc7231DateTime:()=>Lh,copyDocumentWithTransform:()=>MU,dateToUtcString:()=>Ci,expectBoolean:()=>LU,expectByte:()=>yh,expectFloat32:()=>Pc,expectInt:()=>UU,expectInt32:()=>mh,expectLong:()=>_i,expectNonNull:()=>qU,expectNumber:()=>bi,expectObject:()=>y_,expectShort:()=>gh,expectString:()=>jU,expectUnion:()=>HU,generateIdempotencyToken:()=>Bt.v4,handleFloat:()=>KU,limitedParseDouble:()=>bh,limitedParseFloat:()=>GU,limitedParseFloat32:()=>WU,logger:()=>wi,nv:()=>Uh,parseBoolean:()=>FU,parseEpochTimestamp:()=>Th,parseRfc3339DateTime:()=>ZU,parseRfc3339DateTimeWithOffset:()=>Ah,parseRfc7231DateTime:()=>vh,quoteHeader:()=>kh,splitEvery:()=>Bh,splitHeader:()=>Ai,strictParseByte:()=>_h,strictParseDouble:()=>kc,strictParseFloat:()=>zU,strictParseFloat32:()=>Eh,strictParseInt:()=>QU,strictParseInt32:()=>YU,strictParseLong:()=>E_,strictParseShort:()=>os});var Ct=b(()=>{g_();b_();X_();Z_();wh();ew();nw();sw();ow();aw()});var mt,oo=b(()=>{mt=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});var Lc,$h,uw=b(()=>{Lc=w(Ue()),$h=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:r,deserializer:n,serdeContext:s,defaultContentType:o}){this.marshaller=e,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=o}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){let s=this.marshaller,o=r.getEventStreamMember(),i=r.getMemberSchema(o),a=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),d={async*[Symbol.asyncIterator](){if(n){let l={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let m=a.flush();yield{[u]:!0,headers:l,body:m}}for await(let l of e)yield l}};return s.serialize(d,l=>{if(l[u])return{headers:l.headers,body:l.body};let m=Object.keys(l).find(O=>O!=="__type")??"",{additionalHeaders:h,body:g,eventType:C,explicitPayloadContentType:T}=this.writeEventBody(m,i,l);return{headers:{":event-type":{type:"string",value:C},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:T??c},...h},body:g}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,o=r.getEventStreamMember(),a=r.getMemberSchema(o).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=s.deserialize(e.body,async m=>{let h=Object.keys(m).find(C=>C!=="__type")??"",g=m[h].body;if(h==="initial-response"){let C=await this.deserializer.read(r,g);return delete C[o],{[c]:!0,...C}}else if(h in a){let C=a[h];if(C.isStructSchema()){let T={},R=!1;for(let[O,D]of C.structIterator()){let{eventHeader:M,eventPayload:j}=D.getMergedTraits();if(R=R||!!(M||j),j)D.isBlobSchema()?T[O]=g:D.isStringSchema()?T[O]=(this.serdeContext?.utf8Encoder??Lc.toUtf8)(g):D.isStructSchema()&&(T[O]=await this.deserializer.read(D,g));else if(M){let Q=m[h].headers[O]?.value;Q!=null&&(D.isNumericSchema()?Q&&typeof Q=="object"&&"bytes"in Q?T[O]=BigInt(Q.toString()):T[O]=Number(Q):T[O]=Q)}}if(R)return{[h]:T}}return{[h]:await this.deserializer.read(C,g)}}else return{$unknown:m}}),d=u[Symbol.asyncIterator](),l=await d.next();if(l.done)return u;if(l.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[m,h]of Object.entries(l.value))n[m]=h}return{async*[Symbol.asyncIterator](){for(l?.value?.[c]||(yield l.value);;){let{done:m,value:h}=await d.next();if(m)break;yield h}}}}writeEventBody(e,r,n){let s=this.serializer,o=e,i=null,a,c=r.getSchema()[4].includes(e),u={};if(c){let m=r.getMemberSchema(e);if(m.isStructSchema()){for(let[h,g]of m.structIterator()){let{eventHeader:C,eventPayload:T}=g.getMergedTraits();if(T)i=h;else if(C){let R=n[e][h],O="binary";g.isNumericSchema()?(-2)**31<=R&&R<=2**31-1?O="integer":O="long":g.isTimestampSchema()?O="timestamp":g.isStringSchema()?O="string":g.isBooleanSchema()&&(O="boolean"),R!=null&&(u[h]={type:O,value:R},delete n[e][h])}}if(i!==null){let h=m.getMemberSchema(i);h.isBlobSchema()?a="application/octet-stream":h.isStringSchema()&&(a="text/plain"),s.write(h,n[e][i])}else s.write(m,n[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[m,h]=n[e];o=m,s.write(15,h)}let d=s.flush();return{body:typeof d=="string"?(this.serdeContext?.utf8Decoder??Lc.fromUtf8)(d):d,eventType:o,explicitPayloadContentType:a,additionalHeaders:u}}}});var lw={};dt(lw,{EventStreamSerde:()=>$h});var dw=b(()=>{uw()});var Bc,cs,Uc=b(()=>{le();Bc=w(ye());oo();cs=class extends mt{options;constructor(e){super(),this.options=e}getRequestType(){return Bc.HttpRequest}getResponseType(){return Bc.HttpResponse}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(let[n,s]of r.url.searchParams.entries())e.query[n]=s;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,n){let s=F.of(r.input),o=cr(r.traits??{});if(o.endpoint){let i=o.endpoint?.[0];if(typeof i=="string"){let a=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let u=n[c];if(typeof u!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);i=i.replace(`{${c}}`,u)}e.hostname=i+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:e}=await Promise.resolve().then(()=>(dw(),lw));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,n,s,o){return[]}getEventStreamMarshaller(){let e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}});var fw,pw,us,hw=b(()=>{le();Ct();fw=w(ye()),pw=w(bc());wc();xc();Uc();us=class extends cs{async serializeRequest(e,r,n){let s={...r??{}},o=this.serializer,i={},a={},c=await n.endpoint(),u=F.of(e?.input),d=u.getSchema(),l=!1,m,h=new fw.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(c){this.updateServiceEndpoint(h,c),this.setHostPrefix(h,e,s);let g=cr(e.traits);if(g.http){h.method=g.http[0];let[C,T]=g.http[1].split("?");h.path=="/"?h.path=C:h.path+=C;let R=new URLSearchParams(T??"");Object.assign(i,Object.fromEntries(R))}}for(let[g,C]of u.structIterator()){let T=C.getMergedTraits()??{},R=s[g];if(!(R==null&&!C.isIdempotencyToken()))if(T.httpPayload)C.isStreaming()?C.isStructSchema()?s[g]&&(m=await this.serializeEventStream({eventStream:s[g],requestSchema:u})):m=R:(o.write(C,R),m=o.flush()),delete s[g];else if(T.httpLabel){o.write(C,R);let O=o.flush();h.path.includes(`{${g}+}`)?h.path=h.path.replace(`{${g}+}`,O.split("/").map(ar).join("/")):h.path.includes(`{${g}}`)&&(h.path=h.path.replace(`{${g}}`,ar(O))),delete s[g]}else if(T.httpHeader)o.write(C,R),a[T.httpHeader.toLowerCase()]=String(o.flush()),delete s[g];else if(typeof T.httpPrefixHeaders=="string"){for(let[O,D]of Object.entries(R)){let M=T.httpPrefixHeaders+O;o.write([C.getValueSchema(),{httpHeader:M}],D),a[M.toLowerCase()]=o.flush()}delete s[g]}else T.httpQuery||T.httpQueryParams?(this.serializeQuery(C,R,i),delete s[g]):l=!0}return l&&s&&(o.write(d,s),m=o.flush()),h.headers=a,h.query=i,h.body=m,h}serializeQuery(e,r,n){let s=this.serializer,o=e.getMergedTraits();if(o.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in n)){let c=e.getValueSchema();Object.assign(c.getMergedTraits(),{...o,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(e.isListSchema()){let i=!!e.getMergedTraits().sparse,a=[];for(let c of r){s.write([e.getValueSchema(),o],c);let u=s.flush();(i||u!==void 0)&&a.push(u)}n[o.httpQuery]=a}else s.write([e,o],r),n[o.httpQuery]=s.flush()}async deserializeResponse(e,r,n){let s=this.deserializer,o=F.of(e.output),i={};if(n.statusCode>=300){let c=await Lt(n.body,r);throw c.byteLength>0&&Object.assign(i,await s.read(15,c)),await this.handleError(e,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=await this.deserializeHttpMessage(o,r,n,i);if(a.length){let c=await Lt(n.body,r);if(c.byteLength>0){let u=await s.read(o,c);for(let d of a)i[d]=u[d]}}else a.discardResponseBody&&await Lt(n.body,r);return i.$metadata=this.deserializeMetadata(n),i}async deserializeHttpMessage(e,r,n,s,o){let i;s instanceof Set?i=o:i=s;let a=!0,c=this.deserializer,u=F.of(e),d=[];for(let[l,m]of u.structIterator()){let h=m.getMemberTraits();if(h.httpPayload){if(a=!1,m.isStreaming())m.isStructSchema()?i[l]=await this.deserializeEventStream({response:n,responseSchema:u}):i[l]=(0,pw.sdkStreamMixin)(n.body);else if(n.body){let C=await Lt(n.body,r);C.byteLength>0&&(i[l]=await c.read(m,C))}}else if(h.httpHeader){let g=String(h.httpHeader).toLowerCase(),C=n.headers[g];if(C!=null)if(m.isListSchema()){let T=m.getValueSchema();T.getMergedTraits().httpHeader=g;let R;T.isTimestampSchema()&&T.getSchema()===4?R=Bh(C,",",2):R=Ai(C);let O=[];for(let D of R)O.push(await c.read(T,D.trim()));i[l]=O}else i[l]=await c.read(m,C)}else if(h.httpPrefixHeaders!==void 0){i[l]={};for(let[g,C]of Object.entries(n.headers))if(g.startsWith(h.httpPrefixHeaders)){let T=m.getValueSchema();T.getMergedTraits().httpHeader=g,i[l][g.slice(h.httpPrefixHeaders.length)]=await c.read(T,C)}}else h.httpResponseCode?i[l]=n.statusCode:d.push(l)}return d.discardResponseBody=a,d}}});var mw,Nr,gw=b(()=>{le();mw=w(ye());wc();Uc();Nr=class extends cs{async serializeRequest(e,r,n){let s=this.serializer,o={},i={},a=await n.endpoint(),c=F.of(e?.input),u=c.getSchema(),d,l=new mw.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:o,headers:i,body:void 0});a&&(this.updateServiceEndpoint(l,a),this.setHostPrefix(l,e,r));let m={...r};if(r){let h=c.getEventStreamMember();if(h){if(m[h]){let g={};for(let[C,T]of c.structIterator())C!==h&&m[C]&&(s.write(T,m[C]),g[C]=s.flush());d=await this.serializeEventStream({eventStream:m[h],requestSchema:c,initialRequest:g})}}else s.write(u,m),d=s.flush()}return l.headers=i,l.query=o,l.body=d,l.method="POST",l}async deserializeResponse(e,r,n){let s=this.deserializer,o=F.of(e.output),i={};if(n.statusCode>=300){let c=await Lt(n.body,r);throw c.byteLength>0&&Object.assign(i,await s.read(15,c)),await this.handleError(e,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=o.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:n,responseSchema:o,initialResponseContainer:i});else{let c=await Lt(n.body,r);c.byteLength>0&&Object.assign(i,await s.read(o,c))}return i.$metadata=this.deserializeMetadata(n),i}}});var qh,jh=b(()=>{xc();qh=(t,e,r,n,s,o)=>{if(e!=null&&e[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,o?i.split("/").map(a=>ar(a)).join("/"):ar(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return t}});function Hh(t,e){return new $c(t,e)}var yw,$c,Sw=b(()=>{yw=w(ye());jh();$c=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(e,r){this.input=e,this.context=r}async build(){let{hostname:e,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let o of this.resolvePathStack)o(this.path);return new yw.HttpRequest({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,s){return this.resolvePathStack.push(o=>{this.path=qh(o,this.input,e,r,n,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});function Pt(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:o}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:o||r?5:void 0:void 0)??e.timestampFormat.default}var qc=b(()=>{});var zh,Ew,ls,Vh=b(()=>{le();Ct();zh=w($e()),Ew=w(Ue());oo();qc();ls=class extends mt{settings;constructor(e){super(),this.settings=e}read(e,r){let n=F.of(e);if(n.isListSchema())return Ai(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??zh.fromBase64)(r);if(n.isTimestampSchema())switch(Pt(n,this.settings)){case 5:return Fh(r);case 6:return Lh(r);case 7:return so(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let s=n.getMergedTraits().mediaType,o=r;if(s)return n.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(s==="application/json"||s.endsWith("+json"))&&(o=ht.from(o)),o}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new Te(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??Ew.toUtf8)((this.serdeContext?.base64Decoder??zh.fromBase64)(e))}}});var jc,ds,bw=b(()=>{le();jc=w(Ue());oo();Vh();ds=class extends mt{codecDeserializer;stringDeserializer;constructor(e,r){super(),this.codecDeserializer=e,this.stringDeserializer=new ls(r)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,r){let n=F.of(e),s=n.getMergedTraits(),o=this.serdeContext?.utf8Encoder??jc.toUtf8;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(n,o(r));if(s.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??jc.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(n,r)}}});var Kh,vi,Gh=b(()=>{le();Ct();Kh=w($e());oo();qc();vi=class extends mt{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,r){let n=F.of(e);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(Pt(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Ci(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??Kh.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let c=this.flush(),u=n.getValueSchema().isTimestampSchema()?c:kh(c);i!==""&&(i+=", "),i+=u}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let s=n.getMergedTraits().mediaType,o=r;if(s&&((s==="application/json"||s.endsWith("+json"))&&(o=ht.from(o)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Kh.toBase64)(o.toString());return}this.stringBuffer=r;break;default:n.isIdempotencyToken()?this.stringBuffer=(0,Bt.v4)():this.stringBuffer=String(r)}}flush(){let e=this.stringBuffer;return this.stringBuffer="",e}}});var fs,_w=b(()=>{le();Gh();fs=class{codecSerializer;stringSerializer;buffer;constructor(e,r,n=new vi(r)){this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){let n=F.of(e),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}});var ww={};dt(ww,{FromStringShapeDeserializer:()=>ls,HttpBindingProtocol:()=>us,HttpInterceptingShapeDeserializer:()=>ds,HttpInterceptingShapeSerializer:()=>fs,HttpProtocol:()=>cs,RequestBuilder:()=>$c,RpcProtocol:()=>Nr,SerdeContext:()=>mt,ToStringShapeSerializer:()=>vi,collectBody:()=>Lt,determineTimestampFormat:()=>Pt,extendedEncodeURIComponent:()=>ar,requestBuilder:()=>Hh,resolvedPath:()=>qh});var At=b(()=>{wc();xc();hw();Uc();gw();Sw();jh();Vh();bw();_w();Gh();qc();oo()});var xw=b(()=>{At()});function w$(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var Cw=b(()=>{});var Dr,Aw=b(()=>{Dr=class{authSchemes=new Map;constructor(e){for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var vw,Wh,Qh,Tw=b(()=>{vw=w(ye()),Wh=w(Xr()),Qh=class{async sign(e,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=vw.HttpRequest.clone(e);if(n.in===Wh.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===Wh.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var Rw,Yh,Iw=b(()=>{Rw=w(ye()),Yh=class{async sign(e,r,n){let s=Rw.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var Yt,Pw=b(()=>{Yt=class{async sign(e,r,n){return e}}});var Ow=b(()=>{Tw();Iw();Pw()});var kw,x$,Jh,Hc,Xh,Nw=b(()=>{kw=t=>function(r){return Hc(r)&&r.expiration.getTime()-Date.now()<t},x$=3e5,Jh=kw(3e5),Hc=t=>t.expiration!==void 0,Xh=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,s,o,i,a=!1,c=async u=>{o||(o=n(u));try{s=await o,i=!0,a=!1}finally{o=void 0}return s};return e===void 0?async u=>((!i||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!i||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(e(s)&&await c(u),s):(a=!0,s))}});var Dw=b(()=>{Aw();Ow();Nw()});var io={};dt(io,{DefaultIdentityProviderConfig:()=>Dr,EXPIRATION_MS:()=>x$,HttpApiKeyAuthSigner:()=>Qh,HttpBearerAuthSigner:()=>Yh,NoAuthSigner:()=>Yt,createIsIdentityExpiredFunction:()=>kw,createPaginator:()=>Y0,doesIdentityRequireRefresh:()=>Hc,getHttpAuthSchemeEndpointRuleSetPlugin:()=>rs,getHttpAuthSchemePlugin:()=>oB,getHttpSigningPlugin:()=>ns,getSmithyContext:()=>ZL,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>D0,httpAuthSchemeMiddleware:()=>hi,httpAuthSchemeMiddlewareOptions:()=>q0,httpSigningMiddleware:()=>Np,httpSigningMiddlewareOptions:()=>K0,isIdentityExpired:()=>Jh,memoizeIdentityProvider:()=>Xh,normalizeProvider:()=>en,requestBuilder:()=>Hh,setFeature:()=>w$});var gt=b(()=>{I0();H0();W0();Q0();J0();xw();Cw();Dw()});var sn=x(ps=>{"use strict";var em=Xr(),tm=class{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),o=0;for(;;){let{value:i,done:a}=s.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let o=String(e[s]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}},C$=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Mw=t=>C$.test(t)||t.startsWith("[")&&t.endsWith("]"),A$=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),nm=(t,e=!1)=>{if(!e)return A$.test(t);let r=t.split(".");for(let n of r)if(!nm(n))return!1;return!0},rm={},Ti="endpoints";function nn(t){return typeof t!="object"||t==null?t:"ref"in t?`$${nn(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(nn).join(", ")})`:JSON.stringify(t,null,2)}var et=class extends Error{constructor(e){super(e),this.name="EndpointError"}},v$=(t,e)=>t===e,T$=t=>{let e=t.split("."),r=[];for(let n of e){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new et(`Path: '${t}' does not end with ']'`);let o=n.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new et(`Invalid array index: '${o}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(o)}else r.push(n)}return r},Fw=(t,e)=>T$(e).reduce((r,n)=>{if(typeof r!="object")throw new et(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),R$=t=>t!=null,I$=t=>!t,Zh={[em.EndpointURLScheme.HTTP]:80,[em.EndpointURLScheme.HTTPS]:443},P$=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:m,port:h,protocol:g="",path:C="",query:T={}}=t,R=new URL(`${g}//${m}${h?`:${h}`:""}${C}`);return R.search=Object.entries(T).map(([O,D])=>`${O}=${D}`).join("&"),R}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:s,pathname:o,protocol:i,search:a}=e;if(a)return null;let c=i.slice(0,-1);if(!Object.values(em.EndpointURLScheme).includes(c))return null;let u=Mw(s),d=r.includes(`${n}:${Zh[c]}`)||typeof t=="string"&&t.includes(`${n}:${Zh[c]}`),l=`${n}${d?`:${Zh[c]}`:""}`;return{scheme:c,authority:l,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:u}},O$=(t,e)=>t===e,k$=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),N$=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),D$={booleanEquals:v$,getAttr:Fw,isSet:R$,isValidHostLabel:nm,not:I$,parseURL:P$,stringEquals:O$,substring:k$,uriEncode:N$},Lw=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let o=t.indexOf("{",s);if(o===-1){r.push(t.slice(s));break}r.push(t.slice(s,o));let i=t.indexOf("}",o);if(i===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[i+1]==="}"&&(r.push(t.slice(o+1,i)),s=i+2);let a=t.substring(o+1,i);if(a.includes("#")){let[c,u]=a.split("#");r.push(Fw(n[c],u))}else r.push(n[a]);s=i+1}return r.join("")},M$=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],zc=(t,e,r)=>{if(typeof t=="string")return Lw(t,r);if(t.fn)return Uw.callFunction(t,r);if(t.ref)return M$(t,r);throw new et(`'${e}': ${String(t)} is not a string, function or reference.`)},Bw=({fn:t,argv:e},r)=>{let n=e.map(o=>["boolean","number"].includes(typeof o)?o:Uw.evaluateExpression(o,"arg",r)),s=t.split(".");return s[0]in rm&&s[1]!=null?rm[s[0]][s[1]](...n):D$[t](...n)},Uw={evaluateExpression:zc,callFunction:Bw},F$=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new et(`'${t}' is already defined in Reference Record.`);let n=Bw(e,r);return r.logger?.debug?.(`${Ti} evaluateCondition: ${nn(e)} = ${nn(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},sm=(t=[],e)=>{let r={};for(let n of t){let{result:s,toAssign:o}=F$(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};o&&(r[o.name]=o.value,e.logger?.debug?.(`${Ti} assign: ${o.name} := ${nn(o.value)}`))}return{result:!0,referenceRecord:r}},L$=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(o=>{let i=zc(o,"Header value entry",e);if(typeof i!="string")throw new et(`Header '${n}' value '${i}' is not a string`);return i})}),{}),$w=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:jw.getEndpointProperty(s,e)}),{}),qw=(t,e)=>{if(Array.isArray(t))return t.map(r=>qw(r,e));switch(typeof t){case"string":return Lw(t,e);case"object":if(t===null)throw new et(`Unexpected endpoint property: ${t}`);return jw.getEndpointProperties(t,e);case"boolean":return t;default:throw new et(`Unexpected endpoint property type: ${typeof t}`)}},jw={getEndpointProperty:qw,getEndpointProperties:$w},B$=(t,e)=>{let r=zc(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new et(`Endpoint URL must be a string, got ${typeof r}`)},U$=(t,e)=>{let{conditions:r,endpoint:n}=t,{result:s,referenceRecord:o}=sm(r,e);if(!s)return;let i={...e,referenceRecord:{...e.referenceRecord,...o}},{url:a,properties:c,headers:u}=n;return e.logger?.debug?.(`${Ti} Resolving endpoint from template: ${nn(n)}`),{...u!=null&&{headers:L$(u,i)},...c!=null&&{properties:$w(c,i)},url:B$(a,i)}},$$=(t,e)=>{let{conditions:r,error:n}=t,{result:s,referenceRecord:o}=sm(r,e);if(s)throw new et(zc(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))},Hw=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=U$(r,e);if(n)return n}else if(r.type==="error")$$(r,e);else if(r.type==="tree"){let n=zw.evaluateTreeRule(r,e);if(n)return n}else throw new et(`Unknown endpoint rule: ${r}`);throw new et("Rules evaluation failed")},q$=(t,e)=>{let{conditions:r,rules:n}=t,{result:s,referenceRecord:o}=sm(r,e);if(s)return zw.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...o}})},zw={evaluateRules:Hw,evaluateTreeRule:q$},j$=(t,e)=>{let{endpointParams:r,logger:n}=e,{parameters:s,rules:o}=t;e.logger?.debug?.(`${Ti} Initial EndpointParams: ${nn(r)}`);let i=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,d])=>[u,d.default]);if(i.length>0)for(let[u,d]of i)r[u]=r[u]??d;let a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(let u of a)if(r[u]==null)throw new et(`Missing required parameter: '${u}'`);let c=Hw(o,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${Ti} Resolved endpoint: ${nn(c)}`),c};ps.EndpointCache=tm;ps.EndpointError=et;ps.customEndpointFunctions=rm;ps.isIpAddress=Mw;ps.isValidHostLabel=nm;ps.resolveEndpoint=j$});var Kw=x(Vw=>{"use strict";function H$(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}Vw.parseQueryString=H$});var Mr=x(Ww=>{"use strict";var z$=Kw(),Gw=t=>{if(typeof t=="string")return Gw(new URL(t));let{hostname:e,pathname:r,port:n,protocol:s,search:o}=t,i;return o&&(i=z$.parseQueryString(o)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:i}};Ww.parseUrl=Gw});var hs=x(Jt=>{"use strict";var ao=sn(),V$=Mr(),Yw=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!Yw(r))return!1;return!0}return!(!ao.isValidHostLabel(t)||t.length<3||t.length>63||t!==t.toLowerCase()||ao.isIpAddress(t))},Qw=":",K$="/",G$=t=>{let e=t.split(Qw);if(e.length<6)return null;let[r,n,s,o,i,...a]=e;if(r!=="arn"||n===""||s===""||a.join(Qw)==="")return null;let c=a.map(u=>u.split(K$)).flat();return{partition:n,service:s,region:o,accountId:i,resourceId:c}},W$=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],Q$="1.1",Jw={partitions:W$,version:Q$},Xw=Jw,Zw="",ex=t=>{let{partitions:e}=Xw;for(let n of e){let{regions:s,outputs:o}=n;for(let[i,a]of Object.entries(s))if(i===t)return{...o,...a}}for(let n of e){let{regionRegex:s,outputs:o}=n;if(new RegExp(s).test(t))return{...o}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},tx=(t,e="")=>{Xw=t,Zw=e},Y$=()=>{tx(Jw,"")},J$=()=>Zw,rx={isVirtualHostableS3Bucket:Yw,parseArn:G$,partition:ex};ao.customEndpointFunctions.aws=rx;var X$=t=>{if(typeof t.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>nx(t.endpointProvider({Region:typeof t.region=="function"?await t.region():t.region,UseDualStack:typeof t.useDualstackEndpoint=="function"?await t.useDualstackEndpoint():t.useDualstackEndpoint,UseFIPS:typeof t.useFipsEndpoint=="function"?await t.useFipsEndpoint():t.useFipsEndpoint,Endpoint:void 0},{logger:t.logger}))),t},nx=t=>V$.parseUrl(t.url);Object.defineProperty(Jt,"EndpointError",{enumerable:!0,get:function(){return ao.EndpointError}});Object.defineProperty(Jt,"isIpAddress",{enumerable:!0,get:function(){return ao.isIpAddress}});Object.defineProperty(Jt,"resolveEndpoint",{enumerable:!0,get:function(){return ao.resolveEndpoint}});Jt.awsEndpointFunctions=rx;Jt.getUserAgentPrefix=J$;Jt.partition=ex;Jt.resolveDefaultAwsRegionalEndpointsConfig=X$;Jt.setPartitionInfo=tx;Jt.toEndpointV1=nx;Jt.useDefaultPartitionInfo=Y$});var Vc,on,sx=b(()=>{Vc={warningEmitted:!1},on=t=>{t&&!Vc.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<20&&(Vc.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${t} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`))}});function an(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var ox=b(()=>{});function ix(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var ax=b(()=>{});function cx(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var ux=b(()=>{});var Fr={};dt(Fr,{emitWarningIfUnsupportedVersion:()=>on,setCredentialFeature:()=>an,setFeature:()=>ix,setTokenFeature:()=>cx,state:()=>Vc});var Ut=b(()=>{sx();ox();ax();ux()});var lx,om,dx=b(()=>{lx=w(ye()),om=t=>lx.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var co,im=b(()=>{co=t=>new Date(Date.now()+t)});var fx,px=b(()=>{im();fx=(t,e)=>Math.abs(co(e).getTime()-t)>=3e5});var am,hx=b(()=>{px();am=(t,e)=>{let r=Date.parse(t);return fx(r,e)?r-Date.now():e}});var cm=b(()=>{dx();im();hx()});var mx,Ri,uo,tt,um,lm=b(()=>{mx=w(ye());cm();Ri=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},uo=async t=>{let e=Ri("context",t.context),r=Ri("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],o=await Ri("signer",r.signer)(n),i=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}},tt=class{async sign(e,r,n){if(!mx.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await uo(n),{config:o,signer:i}=s,{signingRegion:a,signingName:c}=s,u=n.context;if(u?.authSchemes?.length??!1){let[l,m]=u.authSchemes;l?.name==="sigv4a"&&m?.name==="sigv4"&&(a=m?.signingRegion??a,c=m?.signingName??c)}return await i.sign(e,{signingDate:co(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{let n=r.ServerTime??om(r.$response);if(n){let s=Ri("config",e.config),o=s.systemClockOffset;s.systemClockOffset=am(n,s.systemClockOffset),s.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=om(e);if(n){let s=Ri("config",r.config);s.systemClockOffset=am(n,s.systemClockOffset)}}},um=tt});var gx,Ii,yx=b(()=>{gx=w(ye());cm();lm();Ii=class extends tt{async sign(e,r,n){if(!gx.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}=await uo(n),d=(await s.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(e,{signingDate:co(s.systemClockOffset),signingRegion:d,signingService:c})}}});var dm,Sx=b(()=>{dm=t=>typeof t=="string"&&t.length>0?t.split(",").map(e=>e.trim()):[]});var Kc,fm=b(()=>{Kc=t=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`});var Ex,bx,cn,_x=b(()=>{Sx();fm();Ex="AWS_AUTH_SCHEME_PREFERENCE",bx="auth_scheme_preference",cn={environmentVariableSelector:(t,e)=>{if(e?.signingName&&Kc(e.signingName)in t)return["httpBearerAuth"];if(Ex in t)return dm(t[Ex])},configFileSelector:t=>{if(bx in t)return dm(t[bx])},default:[]}});var rt=x(ms=>{"use strict";var lo=class t extends Error{name="ProviderError";tryNextLink;constructor(e,r=!0){let n,s=!0;typeof r=="boolean"?(n=void 0,s=r):r!=null&&typeof r=="object"&&(n=r.logger,s=r.tryNextLink??!0),super(e),this.tryNextLink=s,Object.setPrototypeOf(this,t.prototype),n?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}},pm=class t extends lo{name="CredentialsProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},hm=class t extends lo{name="TokenProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},Z$=(...t)=>async()=>{if(t.length===0)throw new lo("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},e3=t=>()=>Promise.resolve(t),t3=(t,e,r)=>{let n,s,o,i=!1,a=async()=>{s||(s=t());try{n=await s,o=!0,i=!1}finally{s=void 0}return n};return e===void 0?async c=>((!o||c?.forceRefresh)&&(n=await a()),n):async c=>((!o||c?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(e(n)&&await a(),n))};ms.CredentialsProviderError=pm;ms.ProviderError=lo;ms.TokenProviderError=hm;ms.chain=Z$;ms.fromStatic=e3;ms.memoize=t3});var mm,wx,xx,Cx=b(()=>{gt();mm=w(rt()),wx=t=>(t.sigv4aSigningRegionSet=en(t.sigv4aSigningRegionSet),t),xx={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new mm.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new mm.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var Wx=x(Y=>{"use strict";var un=yc(),gs=Ue(),r3=Mp(),Rx=ye(),Ax=ft(),Gc=Wp(),Ix="X-Amz-Algorithm",Px="X-Amz-Credential",_m="X-Amz-Date",Ox="X-Amz-SignedHeaders",kx="X-Amz-Expires",wm="X-Amz-Signature",xm="X-Amz-Security-Token",n3="X-Amz-Region-Set",Cm="authorization",Am=_m.toLowerCase(),Nx="date",Dx=[Cm,Am,Nx],Mx=wm.toLowerCase(),Xc="x-amz-content-sha256",Fx=xm.toLowerCase(),s3="host",Lx={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Bx=/^proxy-/,Ux=/^sec-/,o3=[/^proxy-/i,/^sec-/i],Wc="AWS4-HMAC-SHA256",i3="AWS4-ECDSA-P256-SHA256",$x="AWS4-HMAC-SHA256-PAYLOAD",qx="UNSIGNED-PAYLOAD",jx=50,vm="aws4_request",Hx=3600*24*7,fo={},Qc=[],Yc=(t,e,r)=>`${t}/${e}/${r}/${vm}`,zx=async(t,e,r,n,s)=>{let o=await vx(t,e.secretAccessKey,e.accessKeyId),i=`${r}:${n}:${s}:${un.toHex(o)}:${e.sessionToken}`;if(i in fo)return fo[i];for(Qc.push(i);Qc.length>jx;)delete fo[Qc.shift()];let a=`AWS4${e.secretAccessKey}`;for(let c of[r,n,s,vm])a=await vx(t,a,c);return fo[i]=a},a3=()=>{Qc.length=0,Object.keys(fo).forEach(t=>{delete fo[t]})},vx=(t,e,r)=>{let n=new t(e);return n.update(gs.toUint8Array(r)),n.digest()},gm=({headers:t},e,r)=>{let n={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let o=s.toLowerCase();(o in Lx||e?.has(o)||Bx.test(o)||Ux.test(o))&&(!r||r&&!r.has(o))||(n[o]=t[s].trim().replace(/\s+/g," "))}return n},Jc=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===Xc)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||r3.isArrayBuffer(e)){let n=new r;return n.update(gs.toUint8Array(e)),un.toHex(await n.digest())}return qx},ym=class{format(e){let r=[];for(let o of Object.keys(e)){let i=gs.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[o]))}let n=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),s=0;for(let o of r)n.set(o,s),s+=o.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(e.value,3),i;case"string":let a=gs.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set(Sm.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!c3.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let l=new Uint8Array(17);return l[0]=9,l.set(un.fromHex(e.value.replace(/\-/g,"")),1),l}}},c3=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Sm=class t{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&Tx(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&Tx(e),parseInt(un.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Tx(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var Vx=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},Kx=(t,e={})=>{let{headers:r,query:n={}}=Rx.HttpRequest.clone(t);for(let s of Object.keys(r)){let o=s.toLowerCase();(o.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(o)||e.hoistableHeaders?.has(o))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},Em=t=>{t=Rx.HttpRequest.clone(t);for(let e of Object.keys(t.headers))Dx.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},Gx=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t)){if(n.toLowerCase()===Mx)continue;let s=Gc.escapeUri(n);e.push(s);let o=t[n];typeof o=="string"?r[s]=`${s}=${Gc.escapeUri(o)}`:Array.isArray(o)&&(r[s]=o.slice(0).reduce((i,a)=>i.concat([`${s}=${Gc.escapeUri(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},u3=t=>l3(t).toISOString().replace(/\.\d{3}Z$/,"Z"),l3=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,Zc=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Ax.normalizeProvider(n),this.credentialProvider=Ax.normalizeProvider(r)}createCanonicalRequest(e,r,n){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Gx(e)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){let o=new this.sha256;o.update(gs.toUint8Array(n));let i=await o.digest();return`${s}
${e}
${r}
${un.toHex(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return Gc.escapeUri(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let r=u3(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}},bm=class extends Zc{headerFormatter=new ym;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){super({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i})}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let m=u??await this.regionProvider(),{longDate:h,shortDate:g}=this.formatDate(n);if(s>Hx)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let C=Yc(g,m,d??this.service),T=Kx(Em(e),{unhoistableHeaders:i,hoistableHeaders:c});l.sessionToken&&(T.query[xm]=l.sessionToken),T.query[Ix]=Wc,T.query[Px]=`${l.accessKeyId}/${C}`,T.query[_m]=h,T.query[kx]=s.toString(10);let R=gm(T,o,a);return T.query[Ox]=this.getCanonicalHeaderList(R),T.query[wm]=await this.getSignature(h,C,this.getSigningKey(l,m,g,d),this.createCanonicalRequest(T,R,await Jc(e,this.sha256))),T}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(n),d=Yc(c,a,i??this.service),l=await Jc({headers:{},body:r},this.sha256),m=new this.sha256;m.update(e);let h=un.toHex(await m.digest()),g=[$x,u,d,s,h,l].join(`
`);return this.signString(g,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then(i=>({message:e.message,signature:i}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(o,i,a,s));return c.update(gs.toUint8Array(e)),un.toHex(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=o??await this.regionProvider(),u=Em(e),{longDate:d,shortDate:l}=this.formatDate(r),m=Yc(l,c,i??this.service);u.headers[Am]=d,a.sessionToken&&(u.headers[Fx]=a.sessionToken);let h=await Jc(u,this.sha256);!Vx(Xc,u.headers)&&this.applyChecksum&&(u.headers[Xc]=h);let g=gm(u,s,n),C=await this.getSignature(d,m,this.getSigningKey(a,c,l,i),this.createCanonicalRequest(u,g,h));return u.headers[Cm]=`${Wc} Credential=${a.accessKeyId}/${m}, SignedHeaders=${this.getCanonicalHeaderList(g)}, Signature=${C}`,u}async getSignature(e,r,n,s){let o=await this.createStringToSign(e,r,s,Wc),i=new this.sha256(await n);return i.update(gs.toUint8Array(o)),un.toHex(await i.digest())}getSigningKey(e,r,n,s){return zx(this.sha256,e,n,r,s||this.service)}},d3={SignatureV4a:null};Y.ALGORITHM_IDENTIFIER=Wc;Y.ALGORITHM_IDENTIFIER_V4A=i3;Y.ALGORITHM_QUERY_PARAM=Ix;Y.ALWAYS_UNSIGNABLE_HEADERS=Lx;Y.AMZ_DATE_HEADER=Am;Y.AMZ_DATE_QUERY_PARAM=_m;Y.AUTH_HEADER=Cm;Y.CREDENTIAL_QUERY_PARAM=Px;Y.DATE_HEADER=Nx;Y.EVENT_ALGORITHM_IDENTIFIER=$x;Y.EXPIRES_QUERY_PARAM=kx;Y.GENERATED_HEADERS=Dx;Y.HOST_HEADER=s3;Y.KEY_TYPE_IDENTIFIER=vm;Y.MAX_CACHE_SIZE=jx;Y.MAX_PRESIGNED_TTL=Hx;Y.PROXY_HEADER_PATTERN=Bx;Y.REGION_SET_PARAM=n3;Y.SEC_HEADER_PATTERN=Ux;Y.SHA256_HEADER=Xc;Y.SIGNATURE_HEADER=Mx;Y.SIGNATURE_QUERY_PARAM=wm;Y.SIGNED_HEADERS_QUERY_PARAM=Ox;Y.SignatureV4=bm;Y.SignatureV4Base=Zc;Y.TOKEN_HEADER=Fx;Y.TOKEN_QUERY_PARAM=xm;Y.UNSIGNABLE_PATTERNS=o3;Y.UNSIGNED_PAYLOAD=qx;Y.clearCredentialCache=a3;Y.createScope=Yc;Y.getCanonicalHeaders=gm;Y.getCanonicalQuery=Gx;Y.getPayloadHash=Jc;Y.getSigningKey=zx;Y.hasHeader=Vx;Y.moveHeadersToQuery=Kx;Y.prepareRequest=Em;Y.signatureV4aContainer=d3});function f3(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=Xh(e,Jh,Hc):r?n=en(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function p3(t,e){if(e.configBound)return e;let r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var Tm,Lr,Qx,Yx=b(()=>{Ut();gt();Tm=w(Wx()),Lr=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==n&&(r=!0),e=u;let d=f3(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),l=p3(t,d);r&&!l.attributed?(n=async m=>l(m).then(h=>an(h,"CREDENTIALS_CODE","e")),n.memoized=l.memoized,n.configBound=l.configBound,n.attributed=!0):n=l},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:s=!0,systemClockOffset:o=t.systemClockOffset||0,sha256:i}=t,a;return t.signer?a=en(t.signer):t.regionInfoProvider?a=()=>en(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,d])=>{let{signingRegion:l,signingService:m}=u;t.signingRegion=t.signingRegion||l||d,t.signingName=t.signingName||m||t.serviceId;let h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},g=t.signerConstructor||Tm.SignatureV4;return new g(h)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await en(t.region)(),properties:{}},u);let d=u.signingRegion,l=u.signingName;t.signingRegion=t.signingRegion||d,t.signingName=t.signingName||l||t.serviceId;let m={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},h=t.signerConstructor||Tm.SignatureV4;return new h(m)},Object.assign(t,{systemClockOffset:o,signingEscapePath:s,signer:a})},Qx=Lr});var Jx=b(()=>{lm();yx();_x();Cx();Yx()});var Xx={};dt(Xx,{AWSSDKSigV4Signer:()=>um,AwsSdkSigV4ASigner:()=>Ii,AwsSdkSigV4Signer:()=>tt,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>cn,NODE_SIGV4A_CONFIG_OPTIONS:()=>xx,getBearerTokenEnvKey:()=>Kc,resolveAWSSDKSigV4Config:()=>Qx,resolveAwsSdkSigV4AConfig:()=>wx,resolveAwsSdkSigV4Config:()=>Lr,validateSigningProperties:()=>uo});var Rm=b(()=>{Jx();fm()});function ln(t){return typeof Buffer<"u"?Buffer.alloc(t):new Uint8Array(t)}function eu(t){return t[Im]=!0,t}var Im,tu=b(()=>{Im=Symbol("@smithy/core/cbor::tagSymbol")});function tC(t){Se=t,Ur=new DataView(Se.buffer,Se.byteOffset,Se.byteLength)}function lr(t,e){if(t>=e)throw new Error("unexpected end of (decode) payload.");let r=(Se[t]&224)>>5,n=Se[t]&31;switch(r){case 0:case 1:case 6:let s,o;if(n<24)s=n,o=1;else switch(n){case 24:case 25:case 26:case 27:let i=nC[n],a=i+1;if(o=a,e-t<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let c=t+1;i===1?s=Se[c]:i===2?s=Ur.getUint16(c):i===4?s=Ur.getUint32(c):s=Ur.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return ee=o,Pm(s);if(r===1){let i;return typeof s=="bigint"?i=BigInt(-1)-s:i=-1-s,ee=o,Pm(i)}else if(n===2||n===3){let i=Ni(t+o,e),a=BigInt(0),c=t+o+ee;for(let u=c;u<c+i;++u)a=a<<BigInt(8)|BigInt(Se[u]);return ee=o+ee+i,n===3?-a-BigInt(1):a}else if(n===4){let i=lr(t+o,e),[a,c]=i,u=c<0?-1:1,d="0".repeat(Math.abs(a)+1)+String(BigInt(u)*BigInt(c)),l,m=c<0?"-":"";return l=a===0?d:d.slice(0,d.length+a)+"."+d.slice(a),l=l.replace(/^0+/g,""),l===""&&(l="0"),l[0]==="."&&(l="0"+l),l=m+l,ee=o+ee,Uh(l)}else{let i=lr(t+o,e);return ee=o+ee,eu({tag:Pm(s),value:i})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return b3(t,e);case 5:return A3(t,e);case 4:return x3(t,e);case 2:return _3(t,e)}else switch(r){case 3:return E3(t,e);case 5:return C3(t,e);case 4:return w3(t,e);case 2:return Fm(t,e)}default:return v3(t,e)}}function rC(t,e,r){return g3&&t.constructor?.name==="Buffer"?t.toString("utf-8",e,r):Zx?Zx.decode(t.subarray(e,r)):(0,eC.toUtf8)(t.subarray(e,r))}function y3(t){let e=Number(t);return(e<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<e)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${t}) to ${e} with loss of precision.`)),e}function S3(t,e){let r=t>>7,n=(t&124)>>2,s=(t&3)<<8|e,o=r===0?1:-1,i,a;if(n===0){if(s===0)return 0;i=Math.pow(2,-14),a=0}else{if(n===31)return s===0?o*(1/0):NaN;i=Math.pow(2,n-15),a=1}return a+=s/1024,o*(i*a)}function Ni(t,e){let r=Se[t]&31;if(r<24)return ee=1,r;if(r===24||r===25||r===26||r===27){let n=nC[r];if(ee=n+1,e-t<ee)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=t+1;return n===1?Se[s]:n===2?Ur.getUint16(s):n===4?Ur.getUint32(s):y3(Ur.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function E3(t,e){let r=Ni(t,e),n=ee;if(t+=n,e-t<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=rC(Se,t,t+r);return ee=n+r,s}function b3(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Se[t]===255){let c=ln(r.length);return c.set(r,0),ee=t-n+2,rC(c,0,c.length)}let s=(Se[t]&224)>>5,o=Se[t]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=Fm(t,e);t+=ee;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function Fm(t,e){let r=Ni(t,e),n=ee;if(t+=n,e-t<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=Se.subarray(t,t+r);return ee=n+r,s}function _3(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Se[t]===255){let c=ln(r.length);return c.set(r,0),ee=t-n+2,c}let s=(Se[t]&224)>>5,o=Se[t]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=Fm(t,e);t+=ee;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function w3(t,e){let r=Ni(t,e),n=ee;t+=n;let s=t,o=Array(r);for(let i=0;i<r;++i){let a=lr(t,e),c=ee;o[i]=a,t+=c}return ee=n+(t-s),o}function x3(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Se[t]===255)return ee=t-n+2,r;let s=lr(t,e);t+=ee,r.push(s)}throw new Error("expected break marker.")}function C3(t,e){let r=Ni(t,e),n=ee;t+=n;let s=t,o={};for(let i=0;i<r;++i){if(t>=e)throw new Error("unexpected end of map payload.");let a=(Se[t]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${t}.`);let c=lr(t,e);t+=ee;let u=lr(t,e);t+=ee,o[c]=u}return ee=n+(t-s),o}function A3(t,e){t+=1;let r=t,n={};for(;t<e;){if(t>=e)throw new Error("unexpected end of map payload.");if(Se[t]===255)return ee=t-r+2,n;let s=(Se[t]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let o=lr(t,e);t+=ee;let i=lr(t,e);t+=ee,n[o]=i}throw new Error("expected break marker.")}function v3(t,e){let r=Se[t]&31;switch(r){case 21:case 20:return ee=1,r===21;case 22:return ee=1,null;case 23:return ee=1,null;case 25:if(e-t<3)throw new Error("incomplete float16 at end of buf.");return ee=3,S3(Se[t+1],Se[t+2]);case 26:if(e-t<5)throw new Error("incomplete float32 at end of buf.");return ee=5,Ur.getFloat32(t+1);case 27:if(e-t<9)throw new Error("incomplete float64 at end of buf.");return ee=9,Ur.getFloat64(t+1);default:throw new Error(`unexpected minor value ${r}.`)}}function Pm(t){if(typeof t=="number")return t;let e=Number(t);return Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:t}var eC,m3,g3,Se,Ur,Zx,ee,nC,sC=b(()=>{Ct();eC=w(Ue());tu();m3=typeof TextDecoder<"u",g3=typeof Buffer<"u",Se=ln(0),Ur=new DataView(Se.buffer,Se.byteOffset,Se.byteLength),Zx=m3?new TextDecoder:null,ee=0;nC={24:1,25:2,26:4,27:8}});function Bm(t){z.byteLength-B<t&&(B<16e6?nu(Math.max(z.byteLength*4,z.byteLength+t)):nu(z.byteLength+t+16e6))}function Um(){let t=ln(B);return t.set(z.subarray(0,B),0),B=0,t}function nu(t){let e=z;z=ln(t),e&&(e.copy?e.copy(z,0,0,e.byteLength):z.set(e,0)),jr=new DataView(z.buffer,z.byteOffset,z.byteLength)}function qr(t,e){e<24?z[B++]=t<<5|e:e<256?(z[B++]=t<<5|24,z[B++]=e):e<65536?(z[B++]=t<<5|25,jr.setUint16(B,e),B+=2):e<2**32?(z[B++]=t<<5|26,jr.setUint32(B,e),B+=4):(z[B++]=t<<5|27,jr.setBigUint64(B,typeof e=="bigint"?e:BigInt(e)),B+=8)}function aC(t){let e=[t];for(;e.length;){let r=e.pop();if(Bm(typeof r=="string"?r.length*4:64),typeof r=="string"){if(oC)qr(3,Buffer.byteLength(r)),B+=z.write(r,B);else{let n=(0,iC.fromUtf8)(r);qr(3,n.byteLength),z.set(n,B),B+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,o=n?r:-r-1;o<24?z[B++]=s<<5|o:o<256?(z[B++]=s<<5|24,z[B++]=o):o<65536?(z[B++]=s<<5|25,z[B++]=o>>8,z[B++]=o):o<4294967296?(z[B++]=s<<5|26,jr.setUint32(B,o),B+=4):(z[B++]=s<<5|27,jr.setBigUint64(B,BigInt(o)),B+=8);continue}z[B++]=251,jr.setFloat64(B,r),B+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,o=n?r:-r-BigInt(1),i=Number(o);if(i<24)z[B++]=s<<5|i;else if(i<256)z[B++]=s<<5|24,z[B++]=i;else if(i<65536)z[B++]=s<<5|25,z[B++]=i>>8,z[B++]=i&255;else if(i<4294967296)z[B++]=s<<5|26,jr.setUint32(B,i),B+=4;else if(o<BigInt("18446744073709551616"))z[B++]=s<<5|27,jr.setBigUint64(B,o),B+=8;else{let a=o.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),u=o,d=0;for(;c.byteLength-++d>=0;)c[c.byteLength-d]=Number(u&BigInt(255)),u>>=BigInt(8);Bm(c.byteLength*2),z[B++]=n?194:195,oC?qr(2,Buffer.byteLength(c)):qr(2,c.byteLength),z.set(c,B),B+=c.byteLength}continue}else if(r===null){z[B++]=246;continue}else if(typeof r=="boolean"){z[B++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)e.push(r[n]);qr(4,r.length);continue}else if(typeof r.byteLength=="number"){Bm(r.length*2),qr(2,r.length),z.set(r,B),B+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof Te){let s=r.string.indexOf("."),o=s===-1?0:s-r.string.length+1,i=BigInt(r.string.replace(".",""));z[B++]=196,e.push(i),e.push(o),qr(4,2);continue}if(r[Im])if("tag"in r&&"value"in r){e.push(r.value),qr(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let o=n[s];e.push(r[o]),e.push(o)}qr(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var iC,oC,T3,z,jr,B,cC=b(()=>{Ct();iC=w(Ue());tu();oC=typeof Buffer<"u",T3=2048,z=ln(T3),jr=new DataView(z.buffer,z.byteOffset,z.byteLength),B=0});var $m,uC=b(()=>{sC();cC();$m={deserialize(t){return tC(t),lr(0,t.length)},serialize(t){try{return aC(t),Um()}catch(e){throw Um(),e}},resizeEncodingBuffer(t){nu(t)}}});var su,ou,iu=b(()=>{tu();su=t=>eu({tag:1,value:t.getTime()/1e3}),ou=(t,e)=>{let r=s=>{let o=s;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o};if(e.__type!==void 0)return r(e.__type);let n=Object.keys(e).find(s=>s.toLowerCase()==="code");if(n&&e[n]!==void 0)return r(e[n])}});var Hm,au,qm,jm,zm=b(()=>{At();le();Ct();Hm=w($e());uC();iu();au=class extends mt{createSerializer(){let e=new qm;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new jm;return e.setSerdeContext(this.serdeContext),e}},qm=class extends mt{value;write(e,r){this.value=this.serialize(e,r)}serialize(e,r){let n=F.of(e);if(r==null)return n.isIdempotencyToken()?(0,Bt.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Hm.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?su(new Date(Number(r)/1e3|0)):su(r);if(typeof r=="function"||typeof r=="object"){let s=r;if(n.isListSchema()&&Array.isArray(s)){let i=!!n.getMergedTraits().sparse,a=[],c=0;for(let u of s){let d=this.serialize(n.getValueSchema(),u);(d!=null||i)&&(a[c++]=d)}return a}if(s instanceof Date)return su(s);let o={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse;for(let a of Object.keys(s)){let c=this.serialize(n.getValueSchema(),s[a]);(c!=null||i)&&(o[a]=c)}}else if(n.isStructSchema()){for(let[a,c]of n.structIterator()){let u=this.serialize(c,s[a]);u!=null&&(o[a]=u)}if(n.isUnionSchema()&&Array.isArray(s.$unknown)){let[a,c]=s.$unknown;o[a]=c}}else if(n.isDocumentSchema())for(let i of Object.keys(s))o[i]=this.serialize(n.getValueSchema(),s[i]);return o}return r}flush(){let e=$m.serialize(this.value);return this.value=void 0,e}},jm=class extends mt{read(e,r){let n=$m.deserialize(r);return this.readValue(e,n)}readValue(e,r){let n=F.of(e);if(n.isTimestampSchema()){if(typeof r=="number")return so(r);if(typeof r=="object"&&r.tag===1&&"value"in r)return so(r.value)}if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Hm.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let o=[],i=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let u=this.readValue(i,c);(u!=null||a)&&o.push(u)}return o}let s={};if(n.isMapSchema()){let o=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(i,r[a]);(c!=null||o)&&(s[a]=c)}}else if(n.isStructSchema()){let o=n.isUnionSchema(),i;o&&(i=new Set(Object.keys(r).filter(a=>a!=="__type")));for(let[a,c]of n.structIterator())o&&i.delete(a),r[a]!=null&&(s[a]=this.readValue(c,r[a]));if(o&&i?.size===1&&Object.keys(s).length===0){let a=i.values().next().value;s.$unknown=[a,r[a]]}}return s}else return r}}});var lC,cu,dC=b(()=>{At();le();lC=w(ft());zm();iu();cu=class extends Nr{codec=new au;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:e}){super({defaultNamespace:e})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);if(Object.assign(s.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Qt(e.input)==="unit")delete s.body,delete s.headers["content-type"];else{s.body||(this.serializer.write(15,{}),s.body=this.serializer.flush());try{s.headers["content-length"]=String(s.body.byteLength)}catch{}}let{service:o,operation:i}=(0,lC.getSmithyContext)(n),a=`/service/${o}/operation/${i}`;return s.path.endsWith("/")?s.path+=a.slice(1):s.path+=a,s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,o){let i=ou(n,s)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let c={$metadata:o,$fault:n.statusCode<=500?"client":"server"},u=H.for(a),d;try{d=u.getSchema(i)}catch{s.Message&&(s.message=s.Message);let R=H.for("smithy.ts.sdk.synthetic."+a),O=R.getBaseException();if(O){let D=R.getErrorCtor(O);throw Object.assign(new D({name:i}),c,s)}throw Object.assign(new Error(i),c,s)}let l=F.of(d),m=u.getErrorCtor(d),h=s.message??s.Message??"Unknown",g=new m(h),C={};for(let[T,R]of l.structIterator())C[T]=this.deserializer.readValue(R,s[T]);throw Object.assign(g,c,{$fault:l.getMergedTraits().error,message:h},C)}getDefaultContentType(){return"application/cbor"}}});var fC=b(()=>{iu();dC();zm()});var gC=x(mC=>{"use strict";var ys=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},hn=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,Vm=()=>{let t=[],e=[],r=!1,n=new Set,s=l=>l.sort((m,h)=>pC[h.step]-pC[m.step]||hC[h.priority||"normal"]-hC[m.priority||"normal"]),o=l=>{let m=!1,h=g=>{let C=ys(g.name,g.aliases);if(C.includes(l)){m=!0;for(let T of C)n.delete(T);return!1}return!0};return t=t.filter(h),e=e.filter(h),m},i=l=>{let m=!1,h=g=>{if(g.middleware===l){m=!0;for(let C of ys(g.name,g.aliases))n.delete(C);return!1}return!0};return t=t.filter(h),e=e.filter(h),m},a=l=>(t.forEach(m=>{l.add(m.middleware,{...m})}),e.forEach(m=>{l.addRelativeTo(m.middleware,{...m})}),l.identifyOnResolve?.(d.identifyOnResolve()),l),c=l=>{let m=[];return l.before.forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...c(h))}),m.push(l),l.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...c(h))}),m},u=(l=!1)=>{let m=[],h=[],g={};return t.forEach(T=>{let R={...T,before:[],after:[]};for(let O of ys(R.name,R.aliases))g[O]=R;m.push(R)}),e.forEach(T=>{let R={...T,before:[],after:[]};for(let O of ys(R.name,R.aliases))g[O]=R;h.push(R)}),h.forEach(T=>{if(T.toMiddleware){let R=g[T.toMiddleware];if(R===void 0){if(l)return;throw new Error(`${T.toMiddleware} is not found when adding ${hn(T.name,T.aliases)} middleware ${T.relation} ${T.toMiddleware}`)}T.relation==="after"&&R.after.push(T),T.relation==="before"&&R.before.push(T)}}),s(m).map(c).reduce((T,R)=>(T.push(...R),T),[])},d={add:(l,m={})=>{let{name:h,override:g,aliases:C}=m,T={step:"initialize",priority:"normal",middleware:l,...m},R=ys(h,C);if(R.length>0){if(R.some(O=>n.has(O))){if(!g)throw new Error(`Duplicate middleware name '${hn(h,C)}'`);for(let O of R){let D=t.findIndex(j=>j.name===O||j.aliases?.some(Q=>Q===O));if(D===-1)continue;let M=t[D];if(M.step!==T.step||T.priority!==M.priority)throw new Error(`"${hn(M.name,M.aliases)}" middleware with ${M.priority} priority in ${M.step} step cannot be overridden by "${hn(h,C)}" middleware with ${T.priority} priority in ${T.step} step.`);t.splice(D,1)}}for(let O of R)n.add(O)}t.push(T)},addRelativeTo:(l,m)=>{let{name:h,override:g,aliases:C}=m,T={middleware:l,...m},R=ys(h,C);if(R.length>0){if(R.some(O=>n.has(O))){if(!g)throw new Error(`Duplicate middleware name '${hn(h,C)}'`);for(let O of R){let D=e.findIndex(j=>j.name===O||j.aliases?.some(Q=>Q===O));if(D===-1)continue;let M=e[D];if(M.toMiddleware!==T.toMiddleware||M.relation!==T.relation)throw new Error(`"${hn(M.name,M.aliases)}" middleware ${M.relation} "${M.toMiddleware}" middleware cannot be overridden by "${hn(h,C)}" middleware ${T.relation} "${T.toMiddleware}" middleware.`);e.splice(D,1)}}for(let O of R)n.add(O)}e.push(T)},clone:()=>a(Vm()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?o(l):i(l),removeByTag:l=>{let m=!1,h=g=>{let{tags:C,name:T,aliases:R}=g;if(C&&C.includes(l)){let O=ys(T,R);for(let D of O)n.delete(D);return m=!0,!1}return!0};return t=t.filter(h),e=e.filter(h),m},concat:l=>{let m=a(Vm());return m.use(l),m.identifyOnResolve(r||m.identifyOnResolve()||(l.identifyOnResolve?.()??!1)),m},applyToStack:a,identify:()=>u(!0).map(l=>{let m=l.step??l.relation+" "+l.toMiddleware;return hn(l.name,l.aliases)+" - "+m}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,m)=>{for(let h of u().map(g=>g.middleware).reverse())l=h(l,m);return r&&console.log(d.identify()),l}};return d},pC={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},hC={high:3,normal:2,low:1};mC.constructStack=Vm});var te=x(me=>{"use strict";var EC=gC(),eg=(At(),re(ww)),Gm=Xr(),R3=(le(),re(Ic)),yC=(Ct(),re(cw)),Wm=class{config;middlewareStack=EC.constructStack();initConfig;handlers;constructor(e){this.config=e;let{protocol:r,protocolSettings:n}=e;n&&typeof r=="function"&&(e.protocol=new r(n))}send(e,r,n){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,i=s===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(e).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},Km="***SensitiveInformation***";function Qm(t,e){if(e==null)return e;let r=R3.NormalizedSchema.of(t);if(r.getMergedTraits().sensitive)return Km;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Km}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Km}else if(r.isStructSchema()&&typeof e=="object"){let n=e,s={};for(let[o,i]of r.structIterator())n[o]!=null&&(s[o]=Qm(i,n[o]));return s}return e}var uu=class{middlewareStack=EC.constructStack();schema;static classBuilder(){return new Ym}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:d,CommandCtor:l}){for(let T of s.bind(this)(l,e,r,n))this.middlewareStack.use(T);let m=e.concat(this.middlewareStack),{logger:h}=r,g={logger:h,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Gm.SMITHY_CONTEXT_KEY]:{commandInstance:this,...u},...d},{requestHandler:C}=r;return m.resolve(T=>C.handle(T.request,n||{}),g)}},Ym=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,r;return r=class extends uu{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.input=n??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,s,o){let i=e._operationSchema,a=i?.[4]??i?.input,c=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(n,s,o,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(i?Qm.bind(null,a):u=>u),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(i?Qm.bind(null,c):u=>u),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}},I3="***SensitiveInformation***",P3=(t,e)=>{for(let r of Object.keys(t)){let n=t[r],s=async function(i,a,c){let u=new n(i);if(typeof a=="function")this.send(u,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(u,a||{},c)}else return this.send(u,a)},o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[o]=s}},Jm=class t extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;let r=e;return t.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;let r=e;return this===t?t.isInstance(e):t.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}},bC=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},_C=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let s=k3(t),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new r({name:e?.code||e?.Code||n||o||"UnknownError",$fault:"client",$metadata:s});throw bC(i,e)},O3=t=>({output:e,parsedBody:r,errorCode:n})=>{_C({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},k3=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),N3=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},SC=!1,D3=t=>{t&&!SC&&parseInt(t.substring(1,t.indexOf(".")))<16&&(SC=!0)},M3=t=>{let e=[];for(let r in Gm.AlgorithmId){let n=Gm.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},F3=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},L3=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),B3=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},wC=t=>Object.assign(M3(t),L3(t)),U3=wC,$3=t=>Object.assign(F3(t),B3(t)),q3=t=>Array.isArray(t)?t:[t],xC=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=xC(t[r]));return t},j3=t=>t!=null,Xm=class{trace(){}debug(){}info(){}warn(){}error(){}};function CC(t,e,r){let n,s,o;if(typeof e>"u"&&typeof r>"u")n={},o=t;else{if(n=t,typeof e=="function")return s=e,o=r,V3(n,s,o);o=e}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){n[i]=o[i];continue}AC(n,null,o,i)}return n}var H3=t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},z3=(t,e)=>{let r={};for(let n in e)AC(r,t,e,n);return r},V3=(t,e,r)=>CC(t,Object.entries(r).reduce((n,[s,o])=>(Array.isArray(o)?n[s]=o:typeof o=="function"?n[s]=[e,o()]:n[s]=[e,o],n),{})),AC=(t,e,r,n)=>{if(e!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=K3,c=G3,u=n]=i;(typeof a=="function"&&a(e[u])||typeof a!="function"&&a)&&(t[n]=c(e[u]));return}let[s,o]=r[n];if(typeof o=="function"){let i,a=s===void 0&&(i=o())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=i:c&&(t[n]=o())}else{let i=s===void 0&&o!=null,a=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(i||a)&&(t[n]=o)}},K3=t=>t!=null,G3=t=>t,W3=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},Q3=t=>t.toISOString().replace(".000Z","Z"),Zm=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(Zm);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=Zm(t[r]));return e}return t};Object.defineProperty(me,"collectBody",{enumerable:!0,get:function(){return eg.collectBody}});Object.defineProperty(me,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return eg.extendedEncodeURIComponent}});Object.defineProperty(me,"resolvedPath",{enumerable:!0,get:function(){return eg.resolvedPath}});me.Client=Wm;me.Command=uu;me.NoOpLogger=Xm;me.SENSITIVE_STRING=I3;me.ServiceException=Jm;me._json=Zm;me.convertMap=H3;me.createAggregatedClient=P3;me.decorateServiceException=bC;me.emitWarningIfUnsupportedVersion=D3;me.getArrayIfSingleItem=q3;me.getDefaultClientConfiguration=U3;me.getDefaultExtensionConfiguration=wC;me.getValueFromTextNode=xC;me.isSerializableHeaderValue=j3;me.loadConfigsForDefaultMode=N3;me.map=CC;me.resolveDefaultRuntimeConfig=$3;me.serializeDateTime=Q3;me.serializeFloat=W3;me.take=z3;me.throwDefaultError=_C;me.withBaseException=O3;Object.keys(yC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(me,t)&&Object.defineProperty(me,t,{enumerable:!0,get:function(){return yC[t]}})})});var tg,$t,ho=b(()=>{le();tg=w(te()),$t=class{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){let n=r.getMemberSchemas(),s=Object.values(n).find(o=>!!o.getMergedTraits().httpPayload);if(s){let o=s.getMergedTraits().mediaType;return o||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:d,httpPrefixHeaders:l}=i.getMergedTraits();return!a&&!c&&!u&&!d&&l===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,o,i){let a=r,c=e;e.includes("#")&&([a,c]=e.split("#"));let u={$metadata:o,$fault:n.statusCode<500?"client":"server"},d=H.for(a);try{return{errorSchema:i?.(d,c)??d.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";let m=H.for("smithy.ts.sdk.synthetic."+a),h=m.getBaseException();if(h){let g=m.getErrorCtor(h)??Error;throw this.decorateServiceException(Object.assign(new g({name:c}),u),s)}throw this.decorateServiceException(Object.assign(new Error(c),u),s)}}decorateServiceException(e,r={}){if(this.queryCompat){let n=e.Message??r.Message,s=(0,tg.decorateServiceException)(e,r);n&&(s.message=n),s.Error={...s.Error,Type:s.Error.Type,Code:s.Error.Code,Message:s.Error.message??s.Error.Message??n};let o=s.$metadata.requestId;return o&&(s.RequestId=o),s}return(0,tg.decorateServiceException)(e,r)}setQueryCompatError(e,r){let n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){let[s,o]=n.split(";"),i=Object.entries(e),a={Code:s,Type:o};Object.assign(e,a);for(let[c,u]of i)a[c==="message"?"Message":c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(s=>F.of(s).getMergedTraits().awsQueryError?.[0]===r)}}}});var lu,vC=b(()=>{fC();le();ho();lu=class extends cu{awsQueryCompatible;mixin;constructor({defaultNamespace:e,awsQueryCompatible:r}){super({defaultNamespace:e}),this.awsQueryCompatible=!!r,this.mixin=new $t(this.awsQueryCompatible)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),s}async handleError(e,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=(()=>{let g=n.headers["x-amzn-query-error"];return g&&this.awsQueryCompatible?g.split(";")[0]:ou(n,s)??"Unknown"})(),{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),u=F.of(a),d=s.message??s.Message??"Unknown",l=H.for(a[1]).getErrorCtor(a)??Error,m=new l(d),h={};for(let[g,C]of u.structIterator())s[g]!=null&&(h[g]=this.deserializer.readValue(C,s[g]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,h),this.mixin.decorateServiceException(Object.assign(m,c,{$fault:u.getMergedTraits().error,message:d},h),s)}}});var TC,RC,IC,PC=b(()=>{TC=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},RC=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},IC=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var nt,mn=b(()=>{nt=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});function*mo(t,e){if(t.isUnitSchema())return;let r=t.getSchema();for(let n=0;n<r[4].length;++n){let s=r[4][n],o=r[5][n],i=new F([o,0],s);!(s in e)&&!i.isIdempotencyToken()||(yield[s,i])}}function*OC(t,e,r){if(t.isUnitSchema())return;let n=t.getSchema(),s=Object.keys(e).filter(o=>o!=="__type").length;for(let o=0;o<n[4].length&&s!==0;++o){let i=n[4][o],a=n[5][o],c=new F([a,0],i),u=i;r&&(u=c.getMergedTraits()[r]??i),u in e&&(yield[i,c],s-=1)}}var Di=b(()=>{le()});function kC(t,e,r){if(r?.source){let n=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||n!==String(e)))return n.includes(".")?new Te(n,"bigDecimal"):BigInt(n)}return e}var NC=b(()=>{Ct()});var DC,MC,du,rg=b(()=>{DC=w(te()),MC=w(Ue()),du=(t,e)=>(0,DC.collectBody)(t,e).then(r=>(e?.utf8Encoder??MC.toUtf8)(r))});var Mi,FC,go,Fi=b(()=>{rg();Mi=(t,e)=>du(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),FC=async(t,e)=>{let r=await Mi(t,e);return r.message=r.message??r.Message,r},go=(t,e)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e&&typeof e=="object"){let o=r(e,"code");if(o&&e[o]!==void 0)return n(e[o]);if(e.__type!==void 0)return n(e.__type)}}});var LC,yo,ng=b(()=>{At();le();Ct();LC=w($e());mn();Di();NC();Fi();yo=class extends nt{settings;constructor(e){super(),this.settings=e}async read(e,r){return this._read(e,typeof r=="string"?JSON.parse(r,kC):await Mi(r,this.serdeContext))}readObject(e,r){return this._read(e,r)}_read(e,r){let n=r!==null&&typeof r=="object",s=F.of(e);if(n){if(s.isStructSchema()){let i={};for(let[a,c]of OC(s,r,this.settings.jsonName?"jsonName":!1)){let u=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,d=this._read(c,r[u]);d!=null&&(i[a]=d)}return i}if(Array.isArray(r)&&s.isListSchema()){let i=s.getValueSchema(),a=[],c=!!s.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._read(i,u));return a}if(s.isMapSchema()){let i=s.getValueSchema(),a={},c=!!s.getMergedTraits().sparse;for(let[u,d]of Object.entries(r))(c||d!=null)&&(a[u]=this._read(i,d));return a}}if(s.isBlobSchema()&&typeof r=="string")return(0,LC.fromBase64)(r);let o=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof r=="string"&&o)return o==="application/json"||o.endsWith("+json")?ht.from(r):r;if(s.isTimestampSchema()&&r!=null)switch(Pt(s,this.settings)){case 5:return Ah(r);case 6:return vh(r);case 7:return Th(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(s.isBigDecimalSchema()&&r!=null){if(r instanceof Te)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new Te(i.string,i.type):new Te(String(r),"bigDecimal")}if(s.isNumericSchema()&&typeof r=="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(s.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof Te?i[a]=c:i[a]=this._read(s,c);return i}else return structuredClone(r);return r}}});var BC,fu,UC=b(()=>{Ct();BC="\u039D",fu=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof Te){let n=`${BC+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${BC+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(let[r,n]of this.values)e=e.replace(r,n);return e}}});var sg,So,og=b(()=>{At();le();Ct();sg=w($e());mn();Di();UC();So=class extends nt{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,r){this.rootSchema=F.of(e),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(e,r){this.write(e,r),typeof this.buffer=="object"&&(this.buffer.__type=F.of(e).getName(!0))}flush(){let{rootSchema:e,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);let n=new fu;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(e,r,n){let s=r!==null&&typeof r=="object",o=F.of(e);if(s){if(o.isStructSchema()){let i={};for(let[a,c]of mo(o,r)){let u=this._write(c,r[a],o);if(u!==void 0){let d=c.getMergedTraits().jsonName,l=this.settings.jsonName?d??a:a;i[l]=u}}return i}if(Array.isArray(r)&&o.isListSchema()){let i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._write(i,u));return a}if(o.isMapSchema()){let i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(let[u,d]of Object.entries(r))(c||d!=null)&&(a[u]=this._write(i,d));return a}if(r instanceof Uint8Array&&(o.isBlobSchema()||o.isDocumentSchema()))return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??sg.toBase64)(r);if(r instanceof Date&&(o.isTimestampSchema()||o.isDocumentSchema()))switch(Pt(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return Ci(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}r instanceof Te&&(this.useReplacer=!0)}if(!(r===null&&n?.isStructSchema())){if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,Bt.v4)();let i=o.getMergedTraits().mediaType;return r!=null&&i&&(i==="application/json"||i.endsWith("+json"))?ht.from(r):r}if(typeof r=="number"&&o.isNumericSchema())return Math.abs(r)===1/0||isNaN(r)?String(r):r;if(typeof r=="string"&&o.isBlobSchema())return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??sg.toBase64)(r);if(typeof r=="bigint"&&(this.useReplacer=!0),o.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof Te?(this.useReplacer=!0,i[a]=c):i[a]=this._write(o,c);return i}else return structuredClone(r);return r}}}});var gn,pu=b(()=>{mn();ng();og();gn=class extends nt{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new So(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new yo(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var yn,hu=b(()=>{At();le();ho();pu();Fi();yn=class extends Nr{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e}),this.serviceTarget=r,this.codec=s??new gn({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n,this.mixin=new $t(this.awsQueryCompatible)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(Qt(e.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(e,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=go(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),u=F.of(a),d=s.message??s.Message??"Unknown",l=H.for(a[1]).getErrorCtor(a)??Error,m=new l(d),h={};for(let[g,C]of u.structIterator())s[g]!=null&&(h[g]=this.codec.createDeserializer().readObject(C,s[g]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,h),this.mixin.decorateServiceException(Object.assign(m,c,{$fault:u.getMergedTraits().error,message:d},h),s)}}});var mu,$C=b(()=>{hu();mu=class extends yn{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var gu,qC=b(()=>{hu();gu=class extends yn{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Sn,jC=b(()=>{At();le();ho();pu();Fi();Sn=class extends us{serializer;deserializer;codec;mixin=new $t;constructor({defaultNamespace:e}){super({defaultNamespace:e});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new gn(r),this.serializer=new fs(this.codec.createSerializer(),r),this.deserializer=new ds(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),o=F.of(e.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return s.body==null&&s.headers["content-type"]===this.getDefaultContentType()&&(s.body="{}"),s}async deserializeResponse(e,r,n){let s=await super.deserializeResponse(e,r,n),o=F.of(e.output);for(let[i,a]of o.structIterator())a.getMemberTraits().httpPayload&&!(i in s)&&(s[i]=null);return s}async handleError(e,r,n,s,o){let i=go(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=F.of(a),d=s.message??s.Message??"Unknown",l=H.for(a[1]).getErrorCtor(a)??Error,m=new l(d);await this.deserializeHttpMessage(a,r,n,s);let h={};for(let[g,C]of u.structIterator()){let T=C.getMergedTraits().jsonName??g;h[g]=this.codec.createDeserializer().readObject(C,s[T])}throw this.mixin.decorateServiceException(Object.assign(m,c,{$fault:u.getMergedTraits().error,message:d},h),s)}getDefaultContentType(){return"application/json"}}});var HC,zC,VC=b(()=>{HC=w(te()),zC=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,HC.expectUnion)(t)}});var GC=x((qse,KC)=>{(()=>{"use strict";var t={d:(f,p)=>{for(var y in p)t.o(p,y)&&!t.o(f,y)&&Object.defineProperty(f,y,{enumerable:!0,get:p[y]})},o:(f,p)=>Object.prototype.hasOwnProperty.call(f,p),r:f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{XMLBuilder:()=>Yr,XMLParser:()=>SL,XMLValidator:()=>vL});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(f,p){let y=[],A=p.exec(f);for(;A;){let E=[];E.startIndex=p.lastIndex-A[0].length;let _=A.length;for(let P=0;P<_;P++)E.push(A[P]);y.push(E),A=p.exec(f)}return y}let o=function(f){return n.exec(f)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(f,p){p=Object.assign({},i,p);let y=[],A=!1,E=!1;f[0]==="\uFEFF"&&(f=f.substr(1));for(let _=0;_<f.length;_++)if(f[_]==="<"&&f[_+1]==="?"){if(_+=2,_=u(f,_),_.err)return _}else{if(f[_]!=="<"){if(c(f[_]))continue;return R("InvalidChar","char '"+f[_]+"' is not expected.",D(f,_))}{let P=_;if(_++,f[_]==="!"){_=d(f,_);continue}{let I=!1;f[_]==="/"&&(I=!0,_++);let k="";for(;_<f.length&&f[_]!==">"&&f[_]!==" "&&f[_]!=="	"&&f[_]!==`
`&&f[_]!=="\r";_++)k+=f[_];if(k=k.trim(),k[k.length-1]==="/"&&(k=k.substring(0,k.length-1),_--),!o(k)){let U;return U=k.trim().length===0?"Invalid space after '<'.":"Tag '"+k+"' is an invalid name.",R("InvalidTag",U,D(f,_))}let N=h(f,_);if(N===!1)return R("InvalidAttr","Attributes for '"+k+"' have open quote.",D(f,_));let K=N.value;if(_=N.index,K[K.length-1]==="/"){let U=_-K.length;K=K.substring(0,K.length-1);let oe=C(K,p);if(oe!==!0)return R(oe.err.code,oe.err.msg,D(f,U+oe.err.line));A=!0}else if(I){if(!N.tagClosed)return R("InvalidTag","Closing tag '"+k+"' doesn't have proper closing.",D(f,_));if(K.trim().length>0)return R("InvalidTag","Closing tag '"+k+"' can't have attributes or invalid starting.",D(f,P));if(y.length===0)return R("InvalidTag","Closing tag '"+k+"' has not been opened.",D(f,P));{let U=y.pop();if(k!==U.tagName){let oe=D(f,U.tagStartPos);return R("InvalidTag","Expected closing tag '"+U.tagName+"' (opened in line "+oe.line+", col "+oe.col+") instead of closing tag '"+k+"'.",D(f,P))}y.length==0&&(E=!0)}}else{let U=C(K,p);if(U!==!0)return R(U.err.code,U.err.msg,D(f,_-K.length+U.err.line));if(E===!0)return R("InvalidXml","Multiple possible root nodes found.",D(f,_));p.unpairedTags.indexOf(k)!==-1||y.push({tagName:k,tagStartPos:P}),A=!0}for(_++;_<f.length;_++)if(f[_]==="<"){if(f[_+1]==="!"){_++,_=d(f,_);continue}if(f[_+1]!=="?")break;if(_=u(f,++_),_.err)return _}else if(f[_]==="&"){let U=T(f,_);if(U==-1)return R("InvalidChar","char '&' is not expected.",D(f,_));_=U}else if(E===!0&&!c(f[_]))return R("InvalidXml","Extra text at the end",D(f,_));f[_]==="<"&&_--}}}return A?y.length==1?R("InvalidTag","Unclosed tag '"+y[0].tagName+"'.",D(f,y[0].tagStartPos)):!(y.length>0)||R("InvalidXml","Invalid '"+JSON.stringify(y.map((_=>_.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):R("InvalidXml","Start tag expected.",1)}function c(f){return f===" "||f==="	"||f===`
`||f==="\r"}function u(f,p){let y=p;for(;p<f.length;p++)if(!(f[p]!="?"&&f[p]!=" ")){let A=f.substr(y,p-y);if(p>5&&A==="xml")return R("InvalidXml","XML declaration allowed only at the start of the document.",D(f,p));if(f[p]=="?"&&f[p+1]==">"){p++;break}}return p}function d(f,p){if(f.length>p+5&&f[p+1]==="-"&&f[p+2]==="-"){for(p+=3;p<f.length;p++)if(f[p]==="-"&&f[p+1]==="-"&&f[p+2]===">"){p+=2;break}}else if(f.length>p+8&&f[p+1]==="D"&&f[p+2]==="O"&&f[p+3]==="C"&&f[p+4]==="T"&&f[p+5]==="Y"&&f[p+6]==="P"&&f[p+7]==="E"){let y=1;for(p+=8;p<f.length;p++)if(f[p]==="<")y++;else if(f[p]===">"&&(y--,y===0))break}else if(f.length>p+9&&f[p+1]==="["&&f[p+2]==="C"&&f[p+3]==="D"&&f[p+4]==="A"&&f[p+5]==="T"&&f[p+6]==="A"&&f[p+7]==="["){for(p+=8;p<f.length;p++)if(f[p]==="]"&&f[p+1]==="]"&&f[p+2]===">"){p+=2;break}}return p}let l='"',m="'";function h(f,p){let y="",A="",E=!1;for(;p<f.length;p++){if(f[p]===l||f[p]===m)A===""?A=f[p]:A!==f[p]||(A="");else if(f[p]===">"&&A===""){E=!0;break}y+=f[p]}return A===""&&{value:y,index:p,tagClosed:E}}let g=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function C(f,p){let y=s(f,g),A={};for(let E=0;E<y.length;E++){if(y[E][1].length===0)return R("InvalidAttr","Attribute '"+y[E][2]+"' has no space in starting.",M(y[E]));if(y[E][3]!==void 0&&y[E][4]===void 0)return R("InvalidAttr","Attribute '"+y[E][2]+"' is without value.",M(y[E]));if(y[E][3]===void 0&&!p.allowBooleanAttributes)return R("InvalidAttr","boolean attribute '"+y[E][2]+"' is not allowed.",M(y[E]));let _=y[E][2];if(!O(_))return R("InvalidAttr","Attribute '"+_+"' is an invalid name.",M(y[E]));if(A.hasOwnProperty(_))return R("InvalidAttr","Attribute '"+_+"' is repeated.",M(y[E]));A[_]=1}return!0}function T(f,p){if(f[++p]===";")return-1;if(f[p]==="#")return(function(A,E){let _=/\d/;for(A[E]==="x"&&(E++,_=/[\da-fA-F]/);E<A.length;E++){if(A[E]===";")return E;if(!A[E].match(_))break}return-1})(f,++p);let y=0;for(;p<f.length;p++,y++)if(!(f[p].match(/\w/)&&y<20)){if(f[p]===";")break;return-1}return p}function R(f,p,y){return{err:{code:f,msg:p,line:y.line||y,col:y.col}}}function O(f){return o(f)}function D(f,p){let y=f.substring(0,p).split(/\r?\n/);return{line:y.length,col:y[y.length-1].length+1}}function M(f){return f.startIndex+f[1].length}let j={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(f,p){return p},attributeValueProcessor:function(f,p){return p},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(f,p,y){return f},captureMetaData:!1},Q;Q=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class ve{constructor(p){this.tagname=p,this.child=[],this[":@"]={}}add(p,y){p==="__proto__"&&(p="#__proto__"),this.child.push({[p]:y})}addChild(p,y){p.tagname==="__proto__"&&(p.tagname="#__proto__"),p[":@"]&&Object.keys(p[":@"]).length>0?this.child.push({[p.tagname]:p.child,":@":p[":@"]}):this.child.push({[p.tagname]:p.child}),y!==void 0&&(this.child[this.child.length-1][Q]={startIndex:y})}static getMetaDataSymbol(){return Q}}function G(f,p){let y={};if(f[p+3]!=="O"||f[p+4]!=="C"||f[p+5]!=="T"||f[p+6]!=="Y"||f[p+7]!=="P"||f[p+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{p+=9;let A=1,E=!1,_=!1,P="";for(;p<f.length;p++)if(f[p]!=="<"||_)if(f[p]===">"){if(_?f[p-1]==="-"&&f[p-2]==="-"&&(_=!1,A--):A--,A===0)break}else f[p]==="["?E=!0:P+=f[p];else{if(E&&es(f,"!ENTITY",p)){let I,k;p+=7,[I,k,p]=_e(f,p+1),k.indexOf("&")===-1&&(y[I]={regx:RegExp(`&${I};`,"g"),val:k})}else if(E&&es(f,"!ELEMENT",p)){p+=8;let{index:I}=J2(f,p+1);p=I}else if(E&&es(f,"!ATTLIST",p))p+=8;else if(E&&es(f,"!NOTATION",p)){p+=9;let{index:I}=Ve(f,p+1);p=I}else{if(!es(f,"!--",p))throw new Error("Invalid DOCTYPE");_=!0}A++,P=""}if(A!==0)throw new Error("Unclosed DOCTYPE")}return{entities:y,i:p}}let ne=(f,p)=>{for(;p<f.length&&/\s/.test(f[p]);)p++;return p};function _e(f,p){p=ne(f,p);let y="";for(;p<f.length&&!/\s/.test(f[p])&&f[p]!=='"'&&f[p]!=="'";)y+=f[p],p++;if(gp(y),p=ne(f,p),f.substring(p,p+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(f[p]==="%")throw new Error("Parameter entities are not supported");let A="";return[p,A]=xt(f,p,"entity"),[y,A,--p]}function Ve(f,p){p=ne(f,p);let y="";for(;p<f.length&&!/\s/.test(f[p]);)y+=f[p],p++;gp(y),p=ne(f,p);let A=f.substring(p,p+6).toUpperCase();if(A!=="SYSTEM"&&A!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${A}"`);p+=A.length,p=ne(f,p);let E=null,_=null;if(A==="PUBLIC")[p,E]=xt(f,p,"publicIdentifier"),f[p=ne(f,p)]!=='"'&&f[p]!=="'"||([p,_]=xt(f,p,"systemIdentifier"));else if(A==="SYSTEM"&&([p,_]=xt(f,p,"systemIdentifier"),!_))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:y,publicIdentifier:E,systemIdentifier:_,index:--p}}function xt(f,p,y){let A="",E=f[p];if(E!=='"'&&E!=="'")throw new Error(`Expected quoted string, found "${E}"`);for(p++;p<f.length&&f[p]!==E;)A+=f[p],p++;if(f[p]!==E)throw new Error(`Unterminated ${y} value`);return[++p,A]}function J2(f,p){p=ne(f,p);let y="";for(;p<f.length&&!/\s/.test(f[p]);)y+=f[p],p++;if(!gp(y))throw new Error(`Invalid element name: "${y}"`);let A="";if(f[p=ne(f,p)]==="E"&&es(f,"MPTY",p))p+=4;else if(f[p]==="A"&&es(f,"NY",p))p+=2;else{if(f[p]!=="(")throw new Error(`Invalid Element Expression, found "${f[p]}"`);for(p++;p<f.length&&f[p]!==")";)A+=f[p],p++;if(f[p]!==")")throw new Error("Unterminated content model")}return{elementName:y,contentModel:A.trim(),index:p}}function es(f,p,y){for(let A=0;A<p.length;A++)if(p[A]!==f[y+A+1])return!1;return!0}function gp(f){if(o(f))return f;throw new Error(`Invalid entity name ${f}`)}let X2=/^[-+]?0x[a-fA-F0-9]+$/,Z2=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,eL={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},tL=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function m0(f){return typeof f=="function"?f:Array.isArray(f)?p=>{for(let y of f)if(typeof y=="string"&&p===y||y instanceof RegExp&&y.test(p))return!0}:()=>!1}class rL{constructor(p){this.options=p,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(y,A)=>String.fromCodePoint(Number.parseInt(A,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(y,A)=>String.fromCodePoint(Number.parseInt(A,16))}},this.addExternalEntities=nL,this.parseXml=cL,this.parseTextData=sL,this.resolveNameSpace=oL,this.buildAttributesMap=aL,this.isItStopNode=fL,this.replaceEntitiesValue=lL,this.readStopNodeData=pL,this.saveTextToParentTag=dL,this.addChild=uL,this.ignoreAttributesFn=m0(this.options.ignoreAttributes)}}function nL(f){let p=Object.keys(f);for(let y=0;y<p.length;y++){let A=p[y];this.lastEntities[A]={regex:new RegExp("&"+A+";","g"),val:f[A]}}}function sL(f,p,y,A,E,_,P){if(f!==void 0&&(this.options.trimValues&&!A&&(f=f.trim()),f.length>0)){P||(f=this.replaceEntitiesValue(f));let I=this.options.tagValueProcessor(p,f,y,E,_);return I==null?f:typeof I!=typeof f||I!==f?I:this.options.trimValues||f.trim()===f?g0(f,this.options.parseTagValue,this.options.numberParseOptions):f}}function oL(f){if(this.options.removeNSPrefix){let p=f.split(":"),y=f.charAt(0)==="/"?"/":"";if(p[0]==="xmlns")return"";p.length===2&&(f=y+p[1])}return f}let iL=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function aL(f,p,y){if(this.options.ignoreAttributes!==!0&&typeof f=="string"){let A=s(f,iL),E=A.length,_={};for(let P=0;P<E;P++){let I=this.resolveNameSpace(A[P][1]);if(this.ignoreAttributesFn(I,p))continue;let k=A[P][4],N=this.options.attributeNamePrefix+I;if(I.length)if(this.options.transformAttributeName&&(N=this.options.transformAttributeName(N)),N==="__proto__"&&(N="#__proto__"),k!==void 0){this.options.trimValues&&(k=k.trim()),k=this.replaceEntitiesValue(k);let K=this.options.attributeValueProcessor(I,k,p);_[N]=K==null?k:typeof K!=typeof k||K!==k?K:g0(k,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(_[N]=!0)}if(!Object.keys(_).length)return;if(this.options.attributesGroupName){let P={};return P[this.options.attributesGroupName]=_,P}return _}}let cL=function(f){f=f.replace(/\r\n?/g,`
`);let p=new ve("!xml"),y=p,A="",E="";for(let _=0;_<f.length;_++)if(f[_]==="<")if(f[_+1]==="/"){let P=ts(f,">",_,"Closing Tag is not closed."),I=f.substring(_+2,P).trim();if(this.options.removeNSPrefix){let K=I.indexOf(":");K!==-1&&(I=I.substr(K+1))}this.options.transformTagName&&(I=this.options.transformTagName(I)),y&&(A=this.saveTextToParentTag(A,y,E));let k=E.substring(E.lastIndexOf(".")+1);if(I&&this.options.unpairedTags.indexOf(I)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${I}>`);let N=0;k&&this.options.unpairedTags.indexOf(k)!==-1?(N=E.lastIndexOf(".",E.lastIndexOf(".")-1),this.tagsNodeStack.pop()):N=E.lastIndexOf("."),E=E.substring(0,N),y=this.tagsNodeStack.pop(),A="",_=P}else if(f[_+1]==="?"){let P=yp(f,_,!1,"?>");if(!P)throw new Error("Pi Tag is not closed.");if(A=this.saveTextToParentTag(A,y,E),!(this.options.ignoreDeclaration&&P.tagName==="?xml"||this.options.ignorePiTags)){let I=new ve(P.tagName);I.add(this.options.textNodeName,""),P.tagName!==P.tagExp&&P.attrExpPresent&&(I[":@"]=this.buildAttributesMap(P.tagExp,E,P.tagName)),this.addChild(y,I,E,_)}_=P.closeIndex+1}else if(f.substr(_+1,3)==="!--"){let P=ts(f,"-->",_+4,"Comment is not closed.");if(this.options.commentPropName){let I=f.substring(_+4,P-2);A=this.saveTextToParentTag(A,y,E),y.add(this.options.commentPropName,[{[this.options.textNodeName]:I}])}_=P}else if(f.substr(_+1,2)==="!D"){let P=G(f,_);this.docTypeEntities=P.entities,_=P.i}else if(f.substr(_+1,2)==="!["){let P=ts(f,"]]>",_,"CDATA is not closed.")-2,I=f.substring(_+9,P);A=this.saveTextToParentTag(A,y,E);let k=this.parseTextData(I,y.tagname,E,!0,!1,!0,!0);k==null&&(k=""),this.options.cdataPropName?y.add(this.options.cdataPropName,[{[this.options.textNodeName]:I}]):y.add(this.options.textNodeName,k),_=P+2}else{let P=yp(f,_,this.options.removeNSPrefix),I=P.tagName,k=P.rawTagName,N=P.tagExp,K=P.attrExpPresent,U=P.closeIndex;this.options.transformTagName&&(I=this.options.transformTagName(I)),y&&A&&y.tagname!=="!xml"&&(A=this.saveTextToParentTag(A,y,E,!1));let oe=y;oe&&this.options.unpairedTags.indexOf(oe.tagname)!==-1&&(y=this.tagsNodeStack.pop(),E=E.substring(0,E.lastIndexOf("."))),I!==p.tagname&&(E+=E?"."+I:I);let he=_;if(this.isItStopNode(this.options.stopNodes,E,I)){let ae="";if(N.length>0&&N.lastIndexOf("/")===N.length-1)I[I.length-1]==="/"?(I=I.substr(0,I.length-1),E=E.substr(0,E.length-1),N=I):N=N.substr(0,N.length-1),_=P.closeIndex;else if(this.options.unpairedTags.indexOf(I)!==-1)_=P.closeIndex;else{let ir=this.readStopNodeData(f,k,U+1);if(!ir)throw new Error(`Unexpected end of ${k}`);_=ir.i,ae=ir.tagContent}let Fe=new ve(I);I!==N&&K&&(Fe[":@"]=this.buildAttributesMap(N,E,I)),ae&&(ae=this.parseTextData(ae,I,E,!0,K,!0,!0)),E=E.substr(0,E.lastIndexOf(".")),Fe.add(this.options.textNodeName,ae),this.addChild(y,Fe,E,he)}else{if(N.length>0&&N.lastIndexOf("/")===N.length-1){I[I.length-1]==="/"?(I=I.substr(0,I.length-1),E=E.substr(0,E.length-1),N=I):N=N.substr(0,N.length-1),this.options.transformTagName&&(I=this.options.transformTagName(I));let ae=new ve(I);I!==N&&K&&(ae[":@"]=this.buildAttributesMap(N,E,I)),this.addChild(y,ae,E,he),E=E.substr(0,E.lastIndexOf("."))}else{let ae=new ve(I);this.tagsNodeStack.push(y),I!==N&&K&&(ae[":@"]=this.buildAttributesMap(N,E,I)),this.addChild(y,ae,E,he),y=ae}A="",_=U}}else A+=f[_];return p.child};function uL(f,p,y,A){this.options.captureMetaData||(A=void 0);let E=this.options.updateTag(p.tagname,y,p[":@"]);E===!1||(typeof E=="string"&&(p.tagname=E),f.addChild(p,A))}let lL=function(f){if(this.options.processEntities){for(let p in this.docTypeEntities){let y=this.docTypeEntities[p];f=f.replace(y.regx,y.val)}for(let p in this.lastEntities){let y=this.lastEntities[p];f=f.replace(y.regex,y.val)}if(this.options.htmlEntities)for(let p in this.htmlEntities){let y=this.htmlEntities[p];f=f.replace(y.regex,y.val)}f=f.replace(this.ampEntity.regex,this.ampEntity.val)}return f};function dL(f,p,y,A){return f&&(A===void 0&&(A=p.child.length===0),(f=this.parseTextData(f,p.tagname,y,!1,!!p[":@"]&&Object.keys(p[":@"]).length!==0,A))!==void 0&&f!==""&&p.add(this.options.textNodeName,f),f=""),f}function fL(f,p,y){let A="*."+y;for(let E in f){let _=f[E];if(A===_||p===_)return!0}return!1}function ts(f,p,y,A){let E=f.indexOf(p,y);if(E===-1)throw new Error(A);return E+p.length-1}function yp(f,p,y,A=">"){let E=(function(U,oe,he=">"){let ae,Fe="";for(let ir=oe;ir<U.length;ir++){let Jr=U[ir];if(ae)Jr===ae&&(ae="");else if(Jr==='"'||Jr==="'")ae=Jr;else if(Jr===he[0]){if(!he[1])return{data:Fe,index:ir};if(U[ir+1]===he[1])return{data:Fe,index:ir}}else Jr==="	"&&(Jr=" ");Fe+=Jr}})(f,p+1,A);if(!E)return;let _=E.data,P=E.index,I=_.search(/\s/),k=_,N=!0;I!==-1&&(k=_.substring(0,I),_=_.substring(I+1).trimStart());let K=k;if(y){let U=k.indexOf(":");U!==-1&&(k=k.substr(U+1),N=k!==E.data.substr(U+1))}return{tagName:k,tagExp:_,closeIndex:P,attrExpPresent:N,rawTagName:K}}function pL(f,p,y){let A=y,E=1;for(;y<f.length;y++)if(f[y]==="<")if(f[y+1]==="/"){let _=ts(f,">",y,`${p} is not closed`);if(f.substring(y+2,_).trim()===p&&(E--,E===0))return{tagContent:f.substring(A,y),i:_};y=_}else if(f[y+1]==="?")y=ts(f,"?>",y+1,"StopNode is not closed.");else if(f.substr(y+1,3)==="!--")y=ts(f,"-->",y+3,"StopNode is not closed.");else if(f.substr(y+1,2)==="![")y=ts(f,"]]>",y,"StopNode is not closed.")-2;else{let _=yp(f,y,">");_&&((_&&_.tagName)===p&&_.tagExp[_.tagExp.length-1]!=="/"&&E++,y=_.closeIndex)}}function g0(f,p,y){if(p&&typeof f=="string"){let A=f.trim();return A==="true"||A!=="false"&&(function(E,_={}){if(_=Object.assign({},eL,_),!E||typeof E!="string")return E;let P=E.trim();if(_.skipLike!==void 0&&_.skipLike.test(P))return E;if(E==="0")return 0;if(_.hex&&X2.test(P))return(function(k){if(parseInt)return parseInt(k,16);if(Number.parseInt)return Number.parseInt(k,16);if(window&&window.parseInt)return window.parseInt(k,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(P);if(P.search(/.+[eE].+/)!==-1)return(function(k,N,K){if(!K.eNotation)return k;let U=N.match(tL);if(U){let oe=U[1]||"",he=U[3].indexOf("e")===-1?"E":"e",ae=U[2],Fe=oe?k[ae.length+1]===he:k[ae.length]===he;return ae.length>1&&Fe?k:ae.length!==1||!U[3].startsWith(`.${he}`)&&U[3][0]!==he?K.leadingZeros&&!Fe?(N=(U[1]||"")+U[3],Number(N)):k:Number(N)}return k})(E,P,_);{let k=Z2.exec(P);if(k){let N=k[1]||"",K=k[2],U=((I=k[3])&&I.indexOf(".")!==-1&&((I=I.replace(/0+$/,""))==="."?I="0":I[0]==="."?I="0"+I:I[I.length-1]==="."&&(I=I.substring(0,I.length-1))),I),oe=N?E[K.length+1]===".":E[K.length]===".";if(!_.leadingZeros&&(K.length>1||K.length===1&&!oe))return E;{let he=Number(P),ae=String(he);if(he===0||he===-0)return he;if(ae.search(/[eE]/)!==-1)return _.eNotation?he:E;if(P.indexOf(".")!==-1)return ae==="0"||ae===U||ae===`${N}${U}`?he:E;let Fe=K?U:P;return K?Fe===ae||N+Fe===ae?he:E:Fe===ae||Fe===N+ae?he:E}}return E}var I})(f,y)}return f!==void 0?f:""}let Sp=ve.getMetaDataSymbol();function hL(f,p){return y0(f,p)}function y0(f,p,y){let A,E={};for(let _=0;_<f.length;_++){let P=f[_],I=mL(P),k="";if(k=y===void 0?I:y+"."+I,I===p.textNodeName)A===void 0?A=P[I]:A+=""+P[I];else{if(I===void 0)continue;if(P[I]){let N=y0(P[I],p,k),K=yL(N,p);P[Sp]!==void 0&&(N[Sp]=P[Sp]),P[":@"]?gL(N,P[":@"],k,p):Object.keys(N).length!==1||N[p.textNodeName]===void 0||p.alwaysCreateTextNode?Object.keys(N).length===0&&(p.alwaysCreateTextNode?N[p.textNodeName]="":N=""):N=N[p.textNodeName],E[I]!==void 0&&E.hasOwnProperty(I)?(Array.isArray(E[I])||(E[I]=[E[I]]),E[I].push(N)):p.isArray(I,k,K)?E[I]=[N]:E[I]=N}}}return typeof A=="string"?A.length>0&&(E[p.textNodeName]=A):A!==void 0&&(E[p.textNodeName]=A),E}function mL(f){let p=Object.keys(f);for(let y=0;y<p.length;y++){let A=p[y];if(A!==":@")return A}}function gL(f,p,y,A){if(p){let E=Object.keys(p),_=E.length;for(let P=0;P<_;P++){let I=E[P];A.isArray(I,y+"."+I,!0,!0)?f[I]=[p[I]]:f[I]=p[I]}}}function yL(f,p){let{textNodeName:y}=p,A=Object.keys(f).length;return A===0||!(A!==1||!f[y]&&typeof f[y]!="boolean"&&f[y]!==0)}class SL{constructor(p){this.externalEntities={},this.options=(function(y){return Object.assign({},j,y)})(p)}parse(p,y){if(typeof p!="string"){if(!p.toString)throw new Error("XML data is accepted in String or Bytes[] form.");p=p.toString()}if(y){y===!0&&(y={});let _=a(p,y);if(_!==!0)throw Error(`${_.err.msg}:${_.err.line}:${_.err.col}`)}let A=new rL(this.options);A.addExternalEntities(this.externalEntities);let E=A.parseXml(p);return this.options.preserveOrder||E===void 0?E:hL(E,this.options)}addEntity(p,y){if(y.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(p.indexOf("&")!==-1||p.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(y==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[p]=y}static getMetaDataSymbol(){return ve.getMetaDataSymbol()}}function EL(f,p){let y="";return p.format&&p.indentBy.length>0&&(y=`
`),S0(f,p,"",y)}function S0(f,p,y,A){let E="",_=!1;for(let P=0;P<f.length;P++){let I=f[P],k=bL(I);if(k===void 0)continue;let N="";if(N=y.length===0?k:`${y}.${k}`,k===p.textNodeName){let he=I[k];_L(N,p)||(he=p.tagValueProcessor(k,he),he=b0(he,p)),_&&(E+=A),E+=he,_=!1;continue}if(k===p.cdataPropName){_&&(E+=A),E+=`<![CDATA[${I[k][0][p.textNodeName]}]]>`,_=!1;continue}if(k===p.commentPropName){E+=A+`<!--${I[k][0][p.textNodeName]}-->`,_=!0;continue}if(k[0]==="?"){let he=E0(I[":@"],p),ae=k==="?xml"?"":A,Fe=I[k][0][p.textNodeName];Fe=Fe.length!==0?" "+Fe:"",E+=ae+`<${k}${Fe}${he}?>`,_=!0;continue}let K=A;K!==""&&(K+=p.indentBy);let U=A+`<${k}${E0(I[":@"],p)}`,oe=S0(I[k],p,N,K);p.unpairedTags.indexOf(k)!==-1?p.suppressUnpairedNode?E+=U+">":E+=U+"/>":oe&&oe.length!==0||!p.suppressEmptyNode?oe&&oe.endsWith(">")?E+=U+`>${oe}${A}</${k}>`:(E+=U+">",oe&&A!==""&&(oe.includes("/>")||oe.includes("</"))?E+=A+p.indentBy+oe+A:E+=oe,E+=`</${k}>`):E+=U+"/>",_=!0}return E}function bL(f){let p=Object.keys(f);for(let y=0;y<p.length;y++){let A=p[y];if(f.hasOwnProperty(A)&&A!==":@")return A}}function E0(f,p){let y="";if(f&&!p.ignoreAttributes)for(let A in f){if(!f.hasOwnProperty(A))continue;let E=p.attributeValueProcessor(A,f[A]);E=b0(E,p),E===!0&&p.suppressBooleanAttributes?y+=` ${A.substr(p.attributeNamePrefix.length)}`:y+=` ${A.substr(p.attributeNamePrefix.length)}="${E}"`}return y}function _L(f,p){let y=(f=f.substr(0,f.length-p.textNodeName.length-1)).substr(f.lastIndexOf(".")+1);for(let A in p.stopNodes)if(p.stopNodes[A]===f||p.stopNodes[A]==="*."+y)return!0;return!1}function b0(f,p){if(f&&f.length>0&&p.processEntities)for(let y=0;y<p.entities.length;y++){let A=p.entities[y];f=f.replace(A.regex,A.val)}return f}let wL={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(f,p){return p},attributeValueProcessor:function(f,p){return p},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Yr(f){this.options=Object.assign({},wL,f),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=m0(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=AL),this.processTextOrObjNode=xL,this.options.format?(this.indentate=CL,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function xL(f,p,y,A){let E=this.j2x(f,y+1,A.concat(p));return f[this.options.textNodeName]!==void 0&&Object.keys(f).length===1?this.buildTextValNode(f[this.options.textNodeName],p,E.attrStr,y):this.buildObjectNode(E.val,p,E.attrStr,y)}function CL(f){return this.options.indentBy.repeat(f)}function AL(f){return!(!f.startsWith(this.options.attributeNamePrefix)||f===this.options.textNodeName)&&f.substr(this.attrPrefixLen)}Yr.prototype.build=function(f){return this.options.preserveOrder?EL(f,this.options):(Array.isArray(f)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(f={[this.options.arrayNodeName]:f}),this.j2x(f,0,[]).val)},Yr.prototype.j2x=function(f,p,y){let A="",E="",_=y.join(".");for(let P in f)if(Object.prototype.hasOwnProperty.call(f,P))if(f[P]===void 0)this.isAttribute(P)&&(E+="");else if(f[P]===null)this.isAttribute(P)||P===this.options.cdataPropName?E+="":P[0]==="?"?E+=this.indentate(p)+"<"+P+"?"+this.tagEndChar:E+=this.indentate(p)+"<"+P+"/"+this.tagEndChar;else if(f[P]instanceof Date)E+=this.buildTextValNode(f[P],P,"",p);else if(typeof f[P]!="object"){let I=this.isAttribute(P);if(I&&!this.ignoreAttributesFn(I,_))A+=this.buildAttrPairStr(I,""+f[P]);else if(!I)if(P===this.options.textNodeName){let k=this.options.tagValueProcessor(P,""+f[P]);E+=this.replaceEntitiesValue(k)}else E+=this.buildTextValNode(f[P],P,"",p)}else if(Array.isArray(f[P])){let I=f[P].length,k="",N="";for(let K=0;K<I;K++){let U=f[P][K];if(U!==void 0)if(U===null)P[0]==="?"?E+=this.indentate(p)+"<"+P+"?"+this.tagEndChar:E+=this.indentate(p)+"<"+P+"/"+this.tagEndChar;else if(typeof U=="object")if(this.options.oneListGroup){let oe=this.j2x(U,p+1,y.concat(P));k+=oe.val,this.options.attributesGroupName&&U.hasOwnProperty(this.options.attributesGroupName)&&(N+=oe.attrStr)}else k+=this.processTextOrObjNode(U,P,p,y);else if(this.options.oneListGroup){let oe=this.options.tagValueProcessor(P,U);oe=this.replaceEntitiesValue(oe),k+=oe}else k+=this.buildTextValNode(U,P,"",p)}this.options.oneListGroup&&(k=this.buildObjectNode(k,P,N,p)),E+=k}else if(this.options.attributesGroupName&&P===this.options.attributesGroupName){let I=Object.keys(f[P]),k=I.length;for(let N=0;N<k;N++)A+=this.buildAttrPairStr(I[N],""+f[P][I[N]])}else E+=this.processTextOrObjNode(f[P],P,p,y);return{attrStr:A,val:E}},Yr.prototype.buildAttrPairStr=function(f,p){return p=this.options.attributeValueProcessor(f,""+p),p=this.replaceEntitiesValue(p),this.options.suppressBooleanAttributes&&p==="true"?" "+f:" "+f+'="'+p+'"'},Yr.prototype.buildObjectNode=function(f,p,y,A){if(f==="")return p[0]==="?"?this.indentate(A)+"<"+p+y+"?"+this.tagEndChar:this.indentate(A)+"<"+p+y+this.closeTag(p)+this.tagEndChar;{let E="</"+p+this.tagEndChar,_="";return p[0]==="?"&&(_="?",E=""),!y&&y!==""||f.indexOf("<")!==-1?this.options.commentPropName!==!1&&p===this.options.commentPropName&&_.length===0?this.indentate(A)+`<!--${f}-->`+this.newLine:this.indentate(A)+"<"+p+y+_+this.tagEndChar+f+this.indentate(A)+E:this.indentate(A)+"<"+p+y+_+">"+f+E}},Yr.prototype.closeTag=function(f){let p="";return this.options.unpairedTags.indexOf(f)!==-1?this.options.suppressUnpairedNode||(p="/"):p=this.options.suppressEmptyNode?"/":`></${f}`,p},Yr.prototype.buildTextValNode=function(f,p,y,A){if(this.options.cdataPropName!==!1&&p===this.options.cdataPropName)return this.indentate(A)+`<![CDATA[${f}]]>`+this.newLine;if(this.options.commentPropName!==!1&&p===this.options.commentPropName)return this.indentate(A)+`<!--${f}-->`+this.newLine;if(p[0]==="?")return this.indentate(A)+"<"+p+y+"?"+this.tagEndChar;{let E=this.options.tagValueProcessor(p,f);return E=this.replaceEntitiesValue(E),E===""?this.indentate(A)+"<"+p+y+this.closeTag(p)+this.tagEndChar:this.indentate(A)+"<"+p+y+">"+E+"</"+p+this.tagEndChar}},Yr.prototype.replaceEntitiesValue=function(f){if(f&&f.length>0&&this.options.processEntities)for(let p=0;p<this.options.entities.length;p++){let y=this.options.entities[p];f=f.replace(y.regex,y.val)}return f};let vL={validate:a};KC.exports=e})()});var WC=x(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.parseXML=J3;var Y3=GC(),ig=new Y3.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>e.trim()===""&&e.includes(`
`)?"":void 0});ig.addEntity("#xD","\r");ig.addEntity("#10",`
`);function J3(t){return ig.parse(t,!0)}});var Eu=x(Su=>{"use strict";var X3=WC();function Z3(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function eq(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var yu=class{value;constructor(e){this.value=e}toString(){return eq(""+this.value)}},cg=class t{name;children;attributes={};static of(e,r,n){let s=new t(e);return r!==void 0&&s.addChildNode(new yu(r)),n!==void 0&&s.withName(n),s}constructor(e,r=[]){this.name=e,this.children=r}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,n=r){if(e[r]!=null){let s=t.of(r,e[r]).withName(n);this.c(s)}}l(e,r,n,s){e[r]!=null&&s().map(i=>{i.withName(n),this.c(i)})}lc(e,r,n,s){if(e[r]!=null){let o=s(),i=new t(n);o.map(a=>{i.c(a)}),this.c(i)}}toString(){let e=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let o=n[s];o!=null&&(r+=` ${s}="${Z3(""+o)}"`)}return r+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(Su,"parseXML",{enumerable:!0,get:function(){return X3.parseXML}});Su.XmlNode=cg;Su.XmlText=yu});var QC,YC,JC,En,bu=b(()=>{QC=w(Eu());At();le();YC=w(te()),JC=w(Ue());mn();En=class extends nt{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new ls(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,r,n){let s=F.of(e),o=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(o).find(u=>!!u.getMemberTraits().eventPayload)){let u={},d=Object.keys(o)[0];return o[d].isBlobSchema()?u[d]=r:u[d]=this.read(o[d],r),u}let a=(this.serdeContext?.utf8Encoder??JC.toUtf8)(r),c=this.parseXml(a);return this.readSchema(e,n?c[n]:c)}readSchema(e,r){let n=F.of(e);if(n.isUnitSchema())return;let s=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!s.sparse,i=!!s.xmlFlattened;if(n.isListSchema()){let c=n.getValueSchema(),u=[],d=c.getMergedTraits().xmlName??"member",l=i?r:(r[0]??r)[d],m=Array.isArray(l)?l:[l];for(let h of m)(h!=null||o)&&u.push(this.readSchema(c,h));return u}let a={};if(n.isMapSchema()){let c=n.getKeySchema(),u=n.getValueSchema(),d;i?d=Array.isArray(r)?r:[r]:d=Array.isArray(r.entry)?r.entry:[r.entry];let l=c.getMergedTraits().xmlName??"key",m=u.getMergedTraits().xmlName??"value";for(let h of d){let g=h[l],C=h[m];(C!=null||o)&&(a[g]=this.readSchema(u,C))}return a}if(n.isStructSchema()){for(let[c,u]of n.structIterator()){let d=u.getMergedTraits(),l=d.httpPayload?d.xmlName??u.getName():u.getMemberTraits().xmlName??c;r[l]!=null&&(a[c]=this.readSchema(u,r[l]))}return a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(e){if(e.length){let r;try{r=(0,QC.parseXML)(e)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:e}),i}let n="#text",s=Object.keys(r)[0],o=r[s];return o[n]&&(o[s]=o[n],delete o[n]),(0,YC.getValueFromTextNode)(o)}return{}}}});var XC,ZC,_u,eA=b(()=>{At();le();Ct();XC=w(te()),ZC=w($e());mn();Di();_u=class extends nt{settings;buffer;constructor(e){super(),this.settings=e}write(e,r,n=""){this.buffer===void 0&&(this.buffer="");let s=F.of(e);if(n&&!n.endsWith(".")&&(n+="."),s.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??ZC.toBase64)(r)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):s.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Bt.v4)()));else if(s.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(s.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof Te?r.string:String(r)));else if(s.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),Pt(s,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,XC.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(s.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${s.getName(!0)}`);if(s.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let o=s.getValueSchema(),i=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let u=this.getKey("member",o.getMergedTraits().xmlName),d=i?`${n}${a}`:`${n}${u}.${a}`;this.write(o,c,d),++a}}}else if(s.isMapSchema()){if(r&&typeof r=="object"){let o=s.getKeySchema(),i=s.getValueSchema(),a=s.getMergedTraits().xmlFlattened,c=1;for(let[u,d]of Object.entries(r)){if(d==null)continue;let l=this.getKey("key",o.getMergedTraits().xmlName),m=a?`${n}${c}.${l}`:`${n}entry.${c}.${l}`,h=this.getKey("value",i.getMergedTraits().xmlName),g=a?`${n}${c}.${h}`:`${n}entry.${c}.${h}`;this.write(o,u,m),this.write(i,d,g),++c}}}else if(s.isStructSchema()){if(r&&typeof r=="object")for(let[o,i]of mo(s,r)){if(r[o]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(o,i.getMergedTraits().xmlName),c=`${n}${a}`;this.write(i,r[o],c)}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let e=this.buffer;return delete this.buffer,e}getKey(e,r){let n=r??e;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${ar(e)}=`}writeValue(e){this.buffer+=ar(e)}}});var bn,ug=b(()=>{At();le();ho();bu();eA();bn=class extends Nr{options;serializer;deserializer;mixin=new $t;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new _u(r),this.deserializer=new En(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(Qt(e.input)==="unit"||!s.body)&&(s.body="");let o=e.name.split("#")[1]??e.name;return s.body=`Action=${o}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(e,r,n){let s=this.deserializer,o=F.of(e.output),i={};if(n.statusCode>=300){let l=await Lt(n.body,r);l.byteLength>0&&Object.assign(i,await s.read(15,l)),await this.handleError(e,r,n,i,this.deserializeMetadata(n))}for(let l in n.headers){let m=n.headers[l];delete n.headers[l],n.headers[l.toLowerCase()]=m}let a=e.name.split("#")[1]??e.name,c=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,u=await Lt(n.body,r);return u.byteLength>0&&Object.assign(i,await s.read(o,u,c)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(e,r,n,s,o){let i=this.loadQueryErrorCode(n,s)??"Unknown",a=this.loadQueryError(s),c=this.loadQueryErrorMessage(s);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:u,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,a,o,this.mixin.findQueryCompatibleError),l=F.of(u),m=H.for(u[1]).getErrorCtor(u)??Error,h=new m(c),g={Type:a.Error.Type,Code:a.Error.Code,Error:a.Error};for(let[C,T]of l.structIterator()){let R=T.getMergedTraits().xmlName??C,O=a[R]??s[R];g[C]=this.deserializer.readSchema(T,O)}throw this.mixin.decorateServiceException(Object.assign(h,d,{$fault:l.getMergedTraits().error,message:c},g),s)}loadQueryErrorCode(e,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(e.statusCode==404)return"NotFound"}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let r=this.loadQueryError(e);return r?.message??r?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var wu,tA=b(()=>{ug();wu=class extends bn{options;constructor(e){super(e),this.options=e;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var rA,nA,lg,sA,xu,dg=b(()=>{rA=w(Eu()),nA=w(te());rg();lg=(t,e)=>du(t,e).then(r=>{if(r.length){let n;try{n=(0,rA.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",o=Object.keys(n)[0],i=n[o];return i[s]&&(i[o]=i[s],delete i[s]),(0,nA.getValueFromTextNode)(i)}return{}}),sA=async(t,e)=>{let r=await lg(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},xu=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var qt,fg,Cu,Eo,pg=b(()=>{qt=w(Eu());At();le();Ct();fg=w(te()),Cu=w($e());mn();Di();Eo=class extends nt{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,r){let n=F.of(e);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Cu.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let s=n.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,r,n){let s=e.getMergedTraits(),o=e.isMemberSchema()&&!s.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():s.xmlName??e.getName();if(!o||!e.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);let i=qt.XmlNode.of(o),[a,c]=this.getXmlnsAttribute(e,n);for(let[u,d]of mo(e,r)){let l=r[u];if(l!=null||d.isIdempotencyToken()){if(d.getMergedTraits().xmlAttribute){i.addAttribute(d.getMergedTraits().xmlName??u,this.writeSimple(d,l));continue}if(d.isListSchema())this.writeList(d,l,i,c);else if(d.isMapSchema())this.writeMap(d,l,i,c);else if(d.isStructSchema())i.addChildNode(this.writeStruct(d,l,c));else{let m=qt.XmlNode.of(d.getMergedTraits().xmlName??d.getMemberName());this.writeSimpleInto(d,l,m,c),i.addChildNode(m)}}}return c&&i.addAttribute(a,c),i}writeList(e,r,n,s){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);let o=e.getMergedTraits(),i=e.getValueSchema(),a=i.getMergedTraits(),c=!!a.sparse,u=!!o.xmlFlattened,[d,l]=this.getXmlnsAttribute(e,s),m=(h,g)=>{if(i.isListSchema())this.writeList(i,Array.isArray(g)?g:[g],h,l);else if(i.isMapSchema())this.writeMap(i,g,h,l);else if(i.isStructSchema()){let C=this.writeStruct(i,g,l);h.addChildNode(C.withName(u?o.xmlName??e.getMemberName():a.xmlName??"member"))}else{let C=qt.XmlNode.of(u?o.xmlName??e.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,g,C,l),h.addChildNode(C)}};if(u)for(let h of r)(c||h!=null)&&m(n,h);else{let h=qt.XmlNode.of(o.xmlName??e.getMemberName());l&&h.addAttribute(d,l);for(let g of r)(c||g!=null)&&m(h,g);n.addChildNode(h)}}writeMap(e,r,n,s,o=!1){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);let i=e.getMergedTraits(),a=e.getKeySchema(),u=a.getMergedTraits().xmlName??"key",d=e.getValueSchema(),l=d.getMergedTraits(),m=l.xmlName??"value",h=!!l.sparse,g=!!i.xmlFlattened,[C,T]=this.getXmlnsAttribute(e,s),R=(O,D,M)=>{let j=qt.XmlNode.of(u,D),[Q,ve]=this.getXmlnsAttribute(a,T);ve&&j.addAttribute(Q,ve),O.addChildNode(j);let G=qt.XmlNode.of(m);d.isListSchema()?this.writeList(d,M,G,T):d.isMapSchema()?this.writeMap(d,M,G,T,!0):d.isStructSchema()?G=this.writeStruct(d,M,T):this.writeSimpleInto(d,M,G,T),O.addChildNode(G)};if(g){for(let[O,D]of Object.entries(r))if(h||D!=null){let M=qt.XmlNode.of(i.xmlName??e.getMemberName());R(M,O,D),n.addChildNode(M)}}else{let O;o||(O=qt.XmlNode.of(i.xmlName??e.getMemberName()),T&&O.addAttribute(C,T),n.addChildNode(O));for(let[D,M]of Object.entries(r))if(h||M!=null){let j=qt.XmlNode.of("entry");R(j,D,M),(o?n:O).addChildNode(j)}}}writeSimple(e,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=F.of(e),s=null;if(r&&typeof r=="object")if(n.isBlobSchema())s=(this.serdeContext?.base64Encoder??Cu.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(Pt(n,this.settings)){case 5:s=r.toISOString().replace(".000Z","Z");break;case 6:s=(0,fg.dateToUtcString)(r);break;case 7:s=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),s=(0,fg.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof Te?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(s=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?s=(0,Bt.v4)():s=String(r)),s===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return s}writeSimpleInto(e,r,n,s){let o=this.writeSimple(e,r),i=F.of(e),a=new qt.XmlText(o),[c,u]=this.getXmlnsAttribute(i,s);u&&n.addAttribute(c,u),n.addChildNode(a)}getXmlnsAttribute(e,r){let n=e.getMergedTraits(),[s,o]=n.xmlNamespace??[];return o&&o!==r?[s?`xmlns:${s}`:"xmlns",o]:[void 0,void 0]}}});var bo,hg=b(()=>{mn();bu();pg();bo=class extends nt{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new Eo(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new En(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var Au,oA=b(()=>{At();le();ho();dg();hg();Au=class extends us{codec;serializer;deserializer;mixin=new $t;constructor(e){super(e);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new bo(r),this.serializer=new fs(this.codec.createSerializer(),r),this.deserializer=new ds(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),o=F.of(e.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return typeof s.body=="string"&&s.headers["content-type"]===this.getDefaultContentType()&&!s.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(o)&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,o){let i=xu(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=F.of(a),d=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",l=H.for(a[1]).getErrorCtor(a)??Error,m=new l(d);await this.deserializeHttpMessage(a,r,n,s);let h={};for(let[g,C]of u.structIterator()){let T=C.getMergedTraits().xmlName??g,R=s.Error?.[T]??s[T];h[g]=this.codec.createDeserializer().readSchema(C,R)}throw this.mixin.decorateServiceException(Object.assign(m,c,{$fault:u.getMergedTraits().error,message:d},h),s)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(e){for(let[,r]of e.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}});var mg={};dt(mg,{AwsEc2QueryProtocol:()=>wu,AwsJson1_0Protocol:()=>mu,AwsJson1_1Protocol:()=>gu,AwsJsonRpcProtocol:()=>yn,AwsQueryProtocol:()=>bn,AwsRestJsonProtocol:()=>Sn,AwsRestXmlProtocol:()=>Au,AwsSmithyRpcV2CborProtocol:()=>lu,JsonCodec:()=>gn,JsonShapeDeserializer:()=>yo,JsonShapeSerializer:()=>So,XmlCodec:()=>bo,XmlShapeDeserializer:()=>En,XmlShapeSerializer:()=>Eo,_toBool:()=>RC,_toNum:()=>IC,_toStr:()=>TC,awsExpectUnion:()=>zC,loadRestJsonErrorCode:()=>go,loadRestXmlErrorCode:()=>xu,parseJsonBody:()=>Mi,parseJsonErrorBody:()=>FC,parseXmlBody:()=>lg,parseXmlErrorBody:()=>sA});var Ss=b(()=>{vC();PC();$C();qC();hu();jC();pu();ng();og();VC();Fi();tA();ug();oA();hg();bu();pg();dg()});var _n={};dt(_n,{AWSSDKSigV4Signer:()=>um,AwsEc2QueryProtocol:()=>wu,AwsJson1_0Protocol:()=>mu,AwsJson1_1Protocol:()=>gu,AwsJsonRpcProtocol:()=>yn,AwsQueryProtocol:()=>bn,AwsRestJsonProtocol:()=>Sn,AwsRestXmlProtocol:()=>Au,AwsSdkSigV4ASigner:()=>Ii,AwsSdkSigV4Signer:()=>tt,AwsSmithyRpcV2CborProtocol:()=>lu,JsonCodec:()=>gn,JsonShapeDeserializer:()=>yo,JsonShapeSerializer:()=>So,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>cn,NODE_SIGV4A_CONFIG_OPTIONS:()=>xx,XmlCodec:()=>bo,XmlShapeDeserializer:()=>En,XmlShapeSerializer:()=>Eo,_toBool:()=>RC,_toNum:()=>IC,_toStr:()=>TC,awsExpectUnion:()=>zC,emitWarningIfUnsupportedVersion:()=>on,getBearerTokenEnvKey:()=>Kc,loadRestJsonErrorCode:()=>go,loadRestXmlErrorCode:()=>xu,parseJsonBody:()=>Mi,parseJsonErrorBody:()=>FC,parseXmlBody:()=>lg,parseXmlErrorBody:()=>sA,resolveAWSSDKSigV4Config:()=>Qx,resolveAwsSdkSigV4AConfig:()=>wx,resolveAwsSdkSigV4Config:()=>Lr,setCredentialFeature:()=>an,setFeature:()=>ix,setTokenFeature:()=>cx,state:()=>Vc,validateSigningProperties:()=>uo});var Ke=b(()=>{Ut();Rm();Ss()});var Es=x(_o=>{"use strict";var tq=(gt(),re(io)),rq=hs(),nq=ye(),dr=(Ke(),re(_n)),uA=void 0;function sq(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function oq(t){let e=tq.normalizeProvider(t.userAgentAppId??uA),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await e();if(!sq(n)){let s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var iq=/\d{12}\.ddb/;async function aq(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&dr.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let o=await e.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?dr.setFeature(t,"RETRY_MODE_ADAPTIVE","F"):dr.setFeature(t,"RETRY_MODE_STANDARD","E"):dr.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let o=t.endpointV2;switch(String(o?.url?.hostname).match(iq)&&dr.setFeature(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":dr.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":dr.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":dr.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let o=s;o.accountId&&dr.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))dr.setFeature(t,i,a)}}var iA="user-agent",gg="x-amz-user-agent",aA=" ",yg="/",cq=/[^!$%&'*+\-.^_`|~\w]/g,uq=/[^!$%&'*+\-.^_`|~\w#]/g,cA="-",lq=1024;function dq(t){let e="";for(let r in t){let n=t[r];if(e.length+n.length+1<=lq){e.length?e+=","+n:e+=n;continue}break}return e}var lA=t=>(e,r)=>async n=>{let{request:s}=n;if(!nq.HttpRequest.isInstance(s))return e(n);let{headers:o}=s,i=r?.userAgent?.map(vu)||[],a=(await t.defaultUserAgentProvider()).map(vu);await aq(r,t,n);let c=r;a.push(`m/${dq(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let u=t?.customUserAgent?.map(vu)||[],d=await t.userAgentAppId();d&&a.push(vu(["app",`${d}`]));let l=rq.getUserAgentPrefix(),m=(l?[l]:[]).concat([...a,...i,...u]).join(aA),h=[...a.filter(g=>g.startsWith("aws-sdk-")),...u].join(aA);return t.runtime!=="browser"?(h&&(o[gg]=o[gg]?`${o[iA]} ${h}`:h),o[iA]=m):o[gg]=m,e({...n,request:s})},vu=t=>{let e=t[0].split(yg).map(i=>i.replace(cq,cA)).join(yg),r=t[1]?.replace(uq,cA),n=e.indexOf(yg),s=e.substring(0,n),o=e.substring(n+1);return s==="api"&&(o=o.toLowerCase()),[s,o,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},dA={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},fq=t=>({applyToStack:e=>{e.add(lA(t),dA)}});_o.DEFAULT_UA_APP_ID=uA;_o.getUserAgentMiddlewareOptions=dA;_o.getUserAgentPlugin=fq;_o.resolveUserAgentConfig=oq;_o.userAgentMiddleware=lA});var fA=x(wo=>{"use strict";var pq=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},hq=(t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n};wo.SelectorType=void 0;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(wo.SelectorType||(wo.SelectorType={}));wo.booleanSelector=pq;wo.numberSelector=hq});var vt=x(Ge=>{"use strict";var wn=fA(),Tu=ft(),mq=sn(),mA="AWS_USE_DUALSTACK_ENDPOINT",gA="use_dualstack_endpoint",gq=!1,yq={environmentVariableSelector:t=>wn.booleanSelector(t,mA,wn.SelectorType.ENV),configFileSelector:t=>wn.booleanSelector(t,gA,wn.SelectorType.CONFIG),default:!1},yA="AWS_USE_FIPS_ENDPOINT",SA="use_fips_endpoint",Sq=!1,Eq={environmentVariableSelector:t=>wn.booleanSelector(t,yA,wn.SelectorType.ENV),configFileSelector:t=>wn.booleanSelector(t,SA,wn.SelectorType.CONFIG),default:!1},bq=t=>{let{tls:e,endpoint:r,urlParser:n,useDualstackEndpoint:s}=t;return Object.assign(t,{tls:e??!0,endpoint:Tu.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:Tu.normalizeProvider(s??!1)})},_q=async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await t.useDualstackEndpoint(),o=await t.useFipsEndpoint(),{hostname:i}=await t.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:o})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${i}`)},wq=t=>{let e=Tu.normalizeProvider(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:o}=t;return Object.assign(t,{tls:o??!0,endpoint:r?Tu.normalizeProvider(typeof r=="string"?s(r):r):()=>_q({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e})},EA="AWS_REGION",bA="region",xq={environmentVariableSelector:t=>t[EA],configFileSelector:t=>t[bA],default:()=>{throw new Error("Region is missing")}},Cq={preferredFile:"credentials"},pA=new Set,Aq=(t,e=mq.isValidHostLabel)=>{if(!pA.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else pA.add(t)},_A=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),vq=t=>_A(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,Tq=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{let n=typeof e=="function"?await e():e,s=vq(n);return Aq(s),s},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return _A(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},hA=(t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>t.find(({tags:n})=>e===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,Rq=(t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),Iq=(t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws",Pq=(t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=t.match(s);if(o)return o[0].slice(1,-1)}},Oq=(t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:o})=>{let i=Iq(t,{partitionHash:o}),a=t in s?t:o[i]?.endpoint??t,c={useFipsEndpoint:e,useDualstackEndpoint:r},u=hA(s[a]?.variants,c),d=hA(o[i]?.variants,c),l=Rq(a,{regionHostname:u,partitionHostname:d});if(l===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let m=Pq(l,{signingRegion:s[a]?.signingRegion,regionRegex:o[i].regionRegex,useFipsEndpoint:e});return{partition:i,signingService:n,hostname:l,...m&&{signingRegion:m},...s[a]?.signingService&&{signingService:s[a].signingService}}};Ge.CONFIG_USE_DUALSTACK_ENDPOINT=gA;Ge.CONFIG_USE_FIPS_ENDPOINT=SA;Ge.DEFAULT_USE_DUALSTACK_ENDPOINT=gq;Ge.DEFAULT_USE_FIPS_ENDPOINT=Sq;Ge.ENV_USE_DUALSTACK_ENDPOINT=mA;Ge.ENV_USE_FIPS_ENDPOINT=yA;Ge.NODE_REGION_CONFIG_FILE_OPTIONS=Cq;Ge.NODE_REGION_CONFIG_OPTIONS=xq;Ge.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=yq;Ge.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=Eq;Ge.REGION_ENV_NAME=EA;Ge.REGION_INI_NAME=bA;Ge.getRegionInfo=Oq;Ge.resolveCustomEndpointsConfig=bq;Ge.resolveEndpointsConfig=wq;Ge.resolveRegionConfig=Tq});var xA=x(wA=>{"use strict";var kq=t=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)});wA.resolveEventStreamSerdeConfig=kq});var xo=x(Ru=>{"use strict";var Nq=ye(),CA="content-length";function AA(t){return e=>async r=>{let n=r.request;if(Nq.HttpRequest.isInstance(n)){let{body:s,headers:o}=n;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(CA)===-1)try{let i=t(s);n.headers={...n.headers,[CA]:String(i)}}catch{}}return e({...r,request:n})}}var vA={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Dq=t=>({applyToStack:e=>{e.add(AA(t.bodyLengthChecker),vA)}});Ru.contentLengthMiddleware=AA;Ru.contentLengthMiddlewareOptions=vA;Ru.getContentLengthPlugin=Dq});var Eg=x(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.getHomeDir=void 0;var Mq=require("os"),Fq=require("path"),Sg={},Lq=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Bq=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${Fq.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let s=Lq();return Sg[s]||(Sg[s]=(0,Mq.homedir)()),Sg[s]};Iu.getHomeDir=Bq});var bg=x(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.getSSOTokenFilepath=void 0;var Uq=require("crypto"),$q=require("path"),qq=Eg(),jq=t=>{let r=(0,Uq.createHash)("sha1").update(t).digest("hex");return(0,$q.join)((0,qq.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Pu.getSSOTokenFilepath=jq});var TA=x(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.getSSOTokenFromFile=xn.tokenIntercept=void 0;var Hq=require("fs/promises"),zq=bg();xn.tokenIntercept={};var Vq=async t=>{if(xn.tokenIntercept[t])return xn.tokenIntercept[t];let e=(0,zq.getSSOTokenFilepath)(t),r=await(0,Hq.readFile)(e,"utf8");return JSON.parse(r)};xn.getSSOTokenFromFile=Vq});var RA=x(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.readFile=Ot.fileIntercept=Ot.filePromises=void 0;var Kq=require("node:fs/promises");Ot.filePromises={};Ot.fileIntercept={};var Gq=(t,e)=>Ot.fileIntercept[t]!==void 0?Ot.fileIntercept[t]:((!Ot.filePromises[t]||e?.ignoreCache)&&(Ot.filePromises[t]=(0,Kq.readFile)(t,"utf8")),Ot.filePromises[t]);Ot.readFile=Gq});var fr=x(yt=>{"use strict";var Li=Eg(),IA=bg(),_g=TA(),Ou=require("path"),ku=Xr(),Co=RA(),OA="AWS_PROFILE",kA="default",Wq=t=>t.profile||process.env[OA]||kA,bs=".",Qq=t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(bs);return r===-1?!1:Object.values(ku.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let s=r.indexOf(bs),o=r.substring(0,s)===ku.IniSectionType.PROFILE?r.substring(s+1):r;return e[o]=n,e},{...t.default&&{default:t.default}}),Yq="AWS_CONFIG_FILE",NA=()=>process.env[Yq]||Ou.join(Li.getHomeDir(),".aws","config"),Jq="AWS_SHARED_CREDENTIALS_FILE",Xq=()=>process.env[Jq]||Ou.join(Li.getHomeDir(),".aws","credentials"),Zq=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,ej=["__proto__","profile __proto__"],wg=t=>{let e={},r,n;for(let s of t.split(/\r?\n/)){let o=s.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,n=void 0;let a=o.substring(1,o.length-1),c=Zq.exec(a);if(c){let[,u,,d]=c;Object.values(ku.IniSectionType).includes(u)&&(r=[u,d].join(bs))}else r=a;if(ej.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[c,u]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(u==="")n=c;else{n&&s.trimStart()===s&&(n=void 0),e[r]=e[r]||{};let d=n?[n,c].join(bs):c;e[r][d]=u}}}}return e},PA=()=>({}),DA=async(t={})=>{let{filepath:e=Xq(),configFilepath:r=NA()}=t,n=Li.getHomeDir(),s="~/",o=e;e.startsWith(s)&&(o=Ou.join(n,e.slice(2)));let i=r;r.startsWith(s)&&(i=Ou.join(n,r.slice(2)));let a=await Promise.all([Co.readFile(i,{ignoreCache:t.ignoreCache}).then(wg).then(Qq).catch(PA),Co.readFile(o,{ignoreCache:t.ignoreCache}).then(wg).catch(PA)]);return{configFile:a[0],credentialsFile:a[1]}},tj=t=>Object.entries(t).filter(([e])=>e.startsWith(ku.IniSectionType.SSO_SESSION+bs)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(bs)+1)]:n}),{}),rj=()=>({}),nj=async(t={})=>Co.readFile(t.configFilepath??NA()).then(wg).then(tj).catch(rj),sj=(...t)=>{let e={};for(let r of t)for(let[n,s]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],s):e[n]=s;return e},oj=async t=>{let e=await DA(t);return sj(e.configFile,e.credentialsFile)},ij={getFileRecord(){return Co.fileIntercept},interceptFile(t,e){Co.fileIntercept[t]=Promise.resolve(e)},getTokenRecord(){return _g.tokenIntercept},interceptToken(t,e){_g.tokenIntercept[t]=e}};Object.defineProperty(yt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return _g.getSSOTokenFromFile}});Object.defineProperty(yt,"readFile",{enumerable:!0,get:function(){return Co.readFile}});yt.CONFIG_PREFIX_SEPARATOR=bs;yt.DEFAULT_PROFILE=kA;yt.ENV_PROFILE=OA;yt.externalDataInterceptor=ij;yt.getProfileName=Wq;yt.loadSharedConfigFiles=DA;yt.loadSsoSessionData=nj;yt.parseKnownFiles=oj;Object.keys(Li).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(yt,t)&&Object.defineProperty(yt,t,{enumerable:!0,get:function(){return Li[t]}})});Object.keys(IA).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(yt,t)&&Object.defineProperty(yt,t,{enumerable:!0,get:function(){return IA[t]}})})});var pr=x(LA=>{"use strict";var Bi=rt(),MA=fr();function FA(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}var aj=(t,e)=>async()=>{try{let r=t(process.env,e);if(r===void 0)throw new Error;return r}catch(r){throw new Bi.CredentialsProviderError(r.message||`Not found in ENV: ${FA(t.toString())}`,{logger:e?.logger})}},cj=(t,{preferredFile:e="config",...r}={})=>async()=>{let n=MA.getProfileName(r),{configFile:s,credentialsFile:o}=await MA.loadSharedConfigFiles(r),i=o[n]||{},a=s[n]||{},c=e==="config"?{...i,...a}:{...a,...i};try{let d=t(c,e==="config"?s:o);if(d===void 0)throw new Error;return d}catch(u){throw new Bi.CredentialsProviderError(u.message||`Not found in config files w/ profile [${n}]: ${FA(t.toString())}`,{logger:r.logger})}},uj=t=>typeof t=="function",lj=t=>uj(t)?async()=>await t():Bi.fromStatic(t),dj=({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>{let{signingName:s,logger:o}=n,i={signingName:s,logger:o};return Bi.memoize(Bi.chain(aj(t,i),cj(e,n),lj(r)))};LA.loadConfig=dj});var qA=x(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.getEndpointUrlConfig=void 0;var BA=fr(),UA="AWS_ENDPOINT_URL",$A="endpoint_url",fj=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(o=>o.toUpperCase()),n=e[[UA,...r].join("_")];if(n)return n;let s=e[UA];if(s)return s},configFileSelector:(e,r)=>{if(r&&e.services){let s=r[["services",e.services].join(BA.CONFIG_PREFIX_SEPARATOR)];if(s){let o=t.split(" ").map(a=>a.toLowerCase()),i=s[[o.join("_"),$A].join(BA.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=e[$A];if(n)return n},default:void 0});Nu.getEndpointUrlConfig=fj});var jA=x(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.getEndpointFromConfig=void 0;var pj=pr(),hj=qA(),mj=async t=>(0,pj.loadConfig)((0,hj.getEndpointUrlConfig)(t??""))();Du.getEndpointFromConfig=mj});var hr=x(Hr=>{"use strict";var zA=jA(),HA=Mr(),gj=(gt(),re(io)),Mu=ft(),yj=kp(),Sj=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),xj(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!wj(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},Ej=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,bj=/(\d+\.){3}\d+/,_j=/\.\./,wj=t=>Ej.test(t)&&!bj.test(t)&&!_j.test(t),xj=t=>{let[e,r,n,,,s]=t.split(":"),o=e==="arn"&&t.split(":").length>=6,i=!!(o&&r&&n&&s);if(o&&!i)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return i},Cj=(t,e,r,n=!1)=>{let s=async()=>{let o;return n?o=r.clientContextParams?.[t]??r[t]??r[e]:o=r[t]??r[e],typeof o=="function"?o():o};return t==="credentialScope"||e==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let o=await s();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:i,hostname:a,port:c,path:u}=o;return`${i}//${a}${c?":"+c:""}${u}`}}return o}:s},xg=t=>typeof t=="object"?"url"in t?HA.parseUrl(t.url):t:HA.parseUrl(t),VA=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await zA.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(xg(i)),r.isCustomEndpoint=!0)}let s=await KA(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},KA=async(t,e,r)=>{let n={},s=e?.getEndpointParameterInstructions?.()||{};for(let[o,i]of Object.entries(s))switch(i.type){case"staticContextParams":n[o]=i.value;break;case"contextParams":n[o]=t[i.name];break;case"clientContextParams":case"builtInParams":n[o]=await Cj(i.name,o,r,i.type!=="builtInParams")();break;case"operationContextParams":n[o]=i.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Sj(n),n},GA=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&gj.setFeature(n,"ENDPOINT_OVERRIDE","N");let o=await VA(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=o,n.authSchemes=o.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let c=Mu.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...s})},WA={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:yj.serializerMiddlewareOption.name},Aj=(t,e)=>({applyToStack:r=>{r.addRelativeTo(GA({config:t,instructions:e}),WA)}}),vj=t=>{let e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,o=r!=null?async()=>xg(await Mu.normalizeProvider(r)()):void 0,a=Object.assign(t,{endpoint:o,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:Mu.normalizeProvider(n??!1),useFipsEndpoint:Mu.normalizeProvider(s??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=zA.getEndpointFromConfig(t.serviceId)),c),a},Tj=t=>{let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),t};Hr.endpointMiddleware=GA;Hr.endpointMiddlewareOptions=WA;Hr.getEndpointFromInstructions=VA;Hr.getEndpointPlugin=Aj;Hr.resolveEndpointConfig=vj;Hr.resolveEndpointRequiredConfig=Tj;Hr.resolveParams=KA;Hr.toEndpointV1=xg});var Ag=x(Cn=>{"use strict";var Rj=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Ij=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Pj=["TimeoutError","RequestTimeout","RequestTimeoutException"],Oj=[500,502,503,504],kj=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Nj=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],QA=t=>t?.$retryable!==void 0,Dj=t=>Rj.includes(t.name),YA=t=>t.$metadata?.clockSkewCorrected,JA=t=>{let e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Mj=t=>t.$metadata?.httpStatusCode===429||Ij.includes(t.name)||t.$retryable?.throttling==!0,Cg=(t,e=0)=>QA(t)||YA(t)||Pj.includes(t.name)||kj.includes(t?.code||"")||Nj.includes(t?.code||"")||Oj.includes(t.$metadata?.httpStatusCode||0)||JA(t)||t.cause!==void 0&&e<=10&&Cg(t.cause,e+1),Fj=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!Cg(t)}return!1};Cn.isBrowserNetworkError=JA;Cn.isClockSkewCorrectedError=YA;Cn.isClockSkewError=Dj;Cn.isRetryableByTrait=QA;Cn.isServerError=Fj;Cn.isThrottlingError=Mj;Cn.isTransientError=Cg});var _s=x(ke=>{"use strict";var Lj=Ag();ke.RETRY_MODES=void 0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(ke.RETRY_MODES||(ke.RETRY_MODES={}));var vg=3,Bj=ke.RETRY_MODES.STANDARD,Fu=class t{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>t.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Lj.isThrottlingError(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}},Ui=100,Pg=20*1e3,ZA=500,Tg=500,ev=5,tv=10,rv=1,Uj="amz-sdk-invocation-id",$j="amz-sdk-request",qj=()=>{let t=Ui;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Pg,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},XA=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(Pg,t),getRetryCost:()=>r}),$i=class{maxAttempts;mode=ke.RETRY_MODES.STANDARD;capacity=Tg;retryBackoffStrategy=qj();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return XA({retryDelay:Ui,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?ZA:Ui);let o=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(s);return this.capacity-=a,XA({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(Tg,this.capacity+(e.getRetryCost()??rv))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${vg}`),vg}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?tv:ev}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}},Rg=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=ke.RETRY_MODES.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Fu,this.standardRetryStrategy=new $i(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},Ig=class extends $i{computeNextBackoffDelay;constructor(e,r=Ui){super(typeof e=="function"?e:async()=>e),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(e,r){let n=await super.refreshRetryTokenForRetry(e,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};ke.AdaptiveRetryStrategy=Rg;ke.ConfiguredRetryStrategy=Ig;ke.DEFAULT_MAX_ATTEMPTS=vg;ke.DEFAULT_RETRY_DELAY_BASE=Ui;ke.DEFAULT_RETRY_MODE=Bj;ke.DefaultRateLimiter=Fu;ke.INITIAL_RETRY_TOKENS=Tg;ke.INVOCATION_ID_HEADER=Uj;ke.MAXIMUM_RETRY_DELAY=Pg;ke.NO_RETRY_INCREMENT=rv;ke.REQUEST_HEADER=$j;ke.RETRY_COST=ev;ke.StandardRetryStrategy=$i;ke.THROTTLING_RETRY_DELAY_BASE=ZA;ke.TIMEOUT_RETRY_COST=tv});var nv=x(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.isStreamingPayload=void 0;var jj=require("stream"),Hj=t=>t?.body instanceof jj.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;Lu.isStreamingPayload=Hj});var Xt=x(Be=>{"use strict";var Ie=_s(),Ao=ye(),An=Ag(),ov=Oh(),sv=ft(),zj=te(),Vj=nv(),Kj=(t,e)=>{let r=t,n=Ie.NO_RETRY_INCREMENT,s=Ie.RETRY_COST,o=Ie.TIMEOUT_RETRY_COST,i=t,a=l=>l.name==="TimeoutError"?o:s,c=l=>a(l)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:l=>{if(!c(l))throw new Error("No retry token available");let m=a(l);return i-=m,m},releaseRetryTokens:l=>{i+=l??n,i=Math.min(i,r)}})},iv=(t,e)=>Math.floor(Math.min(Ie.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),av=t=>t?An.isRetryableByTrait(t)||An.isClockSkewError(t)||An.isThrottlingError(t)||An.isTransientError(t):!1,cv=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Bu=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=Ie.RETRY_MODES.STANDARD;constructor(e,r){this.maxAttemptsProvider=e,this.retryDecider=r?.retryDecider??av,this.delayDecider=r?.delayDecider??iv,this.retryQuota=r?.retryQuota??Kj(Ie.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=Ie.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let s,o=0,i=0,a=await this.getMaxAttempts(),{request:c}=r;for(Ao.HttpRequest.isInstance(c)&&(c.headers[Ie.INVOCATION_ID_HEADER]=ov.v4());;)try{Ao.HttpRequest.isInstance(c)&&(c.headers[Ie.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:u,output:d}=await e(r);return n?.afterRequest&&n.afterRequest(u),this.retryQuota.releaseRetryTokens(s),d.$metadata.attempts=o+1,d.$metadata.totalRetryDelay=i,{response:u,output:d}}catch(u){let d=cv(u);if(o++,this.shouldRetry(d,o,a)){s=this.retryQuota.retrieveRetryTokens(d);let l=this.delayDecider(An.isThrottlingError(d)?Ie.THROTTLING_RETRY_DELAY_BASE:Ie.DEFAULT_RETRY_DELAY_BASE,o),m=Gj(d.$response),h=Math.max(m||0,l);i+=h,await new Promise(g=>setTimeout(g,h));continue}throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=o,d.$metadata.totalRetryDelay=i,d}}},Gj=t=>{if(!Ao.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},Og=class extends Bu{rateLimiter;constructor(e,r){let{rateLimiter:n,...s}=r??{};super(e,s),this.rateLimiter=n??new Ie.DefaultRateLimiter,this.mode=Ie.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},kg="AWS_MAX_ATTEMPTS",Ng="max_attempts",Wj={environmentVariableSelector:t=>{let e=t[kg];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${kg} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[Ng];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Ng} mast be a number, got "${e}"`);return r},default:Ie.DEFAULT_MAX_ATTEMPTS},Qj=t=>{let{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=sv.normalizeProvider(n??Ie.DEFAULT_MAX_ATTEMPTS);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await sv.normalizeProvider(r)()===Ie.RETRY_MODES.ADAPTIVE?new Ie.AdaptiveRetryStrategy(s):new Ie.StandardRetryStrategy(s))})},uv="AWS_RETRY_MODE",lv="retry_mode",Yj={environmentVariableSelector:t=>t[uv],configFileSelector:t=>t[lv],default:Ie.DEFAULT_RETRY_MODE},dv=()=>t=>async e=>{let{request:r}=e;return Ao.HttpRequest.isInstance(r)&&(delete r.headers[Ie.INVOCATION_ID_HEADER],delete r.headers[Ie.REQUEST_HEADER]),t(e)},fv={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},Jj=t=>({applyToStack:e=>{e.addRelativeTo(dv(),fv)}}),pv=t=>(e,r)=>async n=>{let s=await t.retryStrategy(),o=await t.maxAttempts();if(Xj(s)){s=s;let i=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0,{request:d}=n,l=Ao.HttpRequest.isInstance(d);for(l&&(d.headers[Ie.INVOCATION_ID_HEADER]=ov.v4());;)try{l&&(d.headers[Ie.REQUEST_HEADER]=`attempt=${c+1}; max=${o}`);let{response:m,output:h}=await e(n);return s.recordSuccess(i),h.$metadata.attempts=c+1,h.$metadata.totalRetryDelay=u,{response:m,output:h}}catch(m){let h=Zj(m);if(a=cv(m),l&&Vj.isStreamingPayload(d))throw(r.logger instanceof zj.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await s.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=i.getRetryCount();let g=i.getRetryDelay();u+=g,await new Promise(C=>setTimeout(C,g))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},Xj=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",Zj=t=>{let e={error:t,errorType:e4(t)},r=mv(t.$response);return r&&(e.retryAfterHint=r),e},e4=t=>An.isThrottlingError(t)?"THROTTLING":An.isTransientError(t)?"TRANSIENT":An.isServerError(t)?"SERVER_ERROR":"CLIENT_ERROR",hv={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},t4=t=>({applyToStack:e=>{e.add(pv(t),hv)}}),mv=t=>{if(!Ao.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};Be.AdaptiveRetryStrategy=Og;Be.CONFIG_MAX_ATTEMPTS=Ng;Be.CONFIG_RETRY_MODE=lv;Be.ENV_MAX_ATTEMPTS=kg;Be.ENV_RETRY_MODE=uv;Be.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=Wj;Be.NODE_RETRY_MODE_CONFIG_OPTIONS=Yj;Be.StandardRetryStrategy=Bu;Be.defaultDelayDecider=iv;Be.defaultRetryDecider=av;Be.getOmitRetryHeadersPlugin=Jj;Be.getRetryAfterHint=mv;Be.getRetryPlugin=t4;Be.omitRetryHeadersMiddleware=dv;Be.omitRetryHeadersMiddlewareOptions=fv;Be.resolveRetryConfig=Qj;Be.retryMiddleware=pv;Be.retryMiddlewareOptions=hv});var Mg=x(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.resolveHttpAuthSchemeConfig=vn.defaultKinesisHttpAuthSchemeProvider=vn.defaultKinesisHttpAuthSchemeParametersProvider=void 0;var r4=(Ke(),re(_n)),Dg=ft(),n4=async(t,e,r)=>({operation:(0,Dg.getSmithyContext)(e).operation,region:await(0,Dg.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});vn.defaultKinesisHttpAuthSchemeParametersProvider=n4;function s4(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"kinesis",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var o4=t=>{let e=[];switch(t.operation){default:e.push(s4(t))}return e};vn.defaultKinesisHttpAuthSchemeProvider=o4;var i4=t=>{let e=(0,r4.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,Dg.normalizeProvider)(t.authSchemePreference??[])})};vn.resolveHttpAuthSchemeConfig=i4});var gv=x((fie,a4)=>{a4.exports={name:"@aws-sdk/client-kinesis",description:"AWS SDK for JavaScript Kinesis Client for Node.js, Browser and React Native",version:"3.955.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-kinesis","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo kinesis","test:e2e":"yarn g:vitest run -c vitest.config.e2e.mts --mode development","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.mts","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.954.0","@aws-sdk/credential-provider-node":"3.955.0","@aws-sdk/middleware-host-header":"3.953.0","@aws-sdk/middleware-logger":"3.953.0","@aws-sdk/middleware-recursion-detection":"3.953.0","@aws-sdk/middleware-user-agent":"3.954.0","@aws-sdk/region-config-resolver":"3.953.0","@aws-sdk/types":"3.953.0","@aws-sdk/util-endpoints":"3.953.0","@aws-sdk/util-user-agent-browser":"3.953.0","@aws-sdk/util-user-agent-node":"3.954.0","@smithy/config-resolver":"^4.4.4","@smithy/core":"^3.19.0","@smithy/eventstream-serde-browser":"^4.2.6","@smithy/eventstream-serde-config-resolver":"^4.3.6","@smithy/eventstream-serde-node":"^4.2.6","@smithy/fetch-http-handler":"^5.3.7","@smithy/hash-node":"^4.2.6","@smithy/invalid-dependency":"^4.2.6","@smithy/middleware-content-length":"^4.2.6","@smithy/middleware-endpoint":"^4.4.0","@smithy/middleware-retry":"^4.4.16","@smithy/middleware-serde":"^4.2.7","@smithy/middleware-stack":"^4.2.6","@smithy/node-config-provider":"^4.3.6","@smithy/node-http-handler":"^4.4.6","@smithy/protocol-http":"^5.3.6","@smithy/smithy-client":"^4.10.1","@smithy/types":"^4.10.0","@smithy/url-parser":"^4.2.6","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.15","@smithy/util-defaults-mode-node":"^4.2.18","@smithy/util-endpoints":"^3.2.6","@smithy/util-middleware":"^4.2.6","@smithy/util-retry":"^4.2.6","@smithy/util-utf8":"^4.2.0","@smithy/util-waiter":"^4.2.6",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-kinesis",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-kinesis"}}});var Fg=x(Tn=>{"use strict";var c4=(Ut(),re(Fr)),u4=rt(),yv="AWS_ACCESS_KEY_ID",Sv="AWS_SECRET_ACCESS_KEY",Ev="AWS_SESSION_TOKEN",bv="AWS_CREDENTIAL_EXPIRATION",_v="AWS_CREDENTIAL_SCOPE",wv="AWS_ACCOUNT_ID",l4=t=>async()=>{t?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let e=process.env[yv],r=process.env[Sv],n=process.env[Ev],s=process.env[bv],o=process.env[_v],i=process.env[wv];if(e&&r){let a={accessKeyId:e,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...o&&{credentialScope:o},...i&&{accountId:i}};return c4.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new u4.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})};Tn.ENV_ACCOUNT_ID=wv;Tn.ENV_CREDENTIAL_SCOPE=_v;Tn.ENV_EXPIRATION=bv;Tn.ENV_KEY=yv;Tn.ENV_SECRET=Sv;Tn.ENV_SESSION=Ev;Tn.fromEnv=l4});var ji=x(st=>{"use strict";var mr=rt(),d4=require("url"),f4=require("buffer"),p4=require("http"),qg=pr(),h4=Mr();function qi(t){return new Promise((e,r)=>{let n=p4.request({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new mr.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new mr.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:o=400}=s;(o<200||300<=o)&&(r(Object.assign(new mr.ProviderError("Error response received from instance metadata service"),{statusCode:o})),n.destroy());let i=[];s.on("data",a=>{i.push(a)}),s.on("end",()=>{e(f4.Buffer.concat(i)),n.destroy()})}),n.end()})}var vv=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",Tv=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),Rv=1e3,Iv=0,jg=({maxRetries:t=Iv,timeout:e=Rv})=>({maxRetries:t,timeout:e}),Bg=(t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},Uu="AWS_CONTAINER_CREDENTIALS_FULL_URI",$u="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Ug="AWS_CONTAINER_AUTHORIZATION_TOKEN",m4=(t={})=>{let{timeout:e,maxRetries:r}=jg(t);return()=>Bg(async()=>{let n=await b4({logger:t.logger}),s=JSON.parse(await g4(e,n));if(!vv(s))throw new mr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return Tv(s)},r)},g4=async(t,e)=>(process.env[Ug]&&(e.headers={...e.headers,Authorization:process.env[Ug]}),(await qi({...e,timeout:t})).toString()),y4="169.254.170.2",S4={localhost:!0,"127.0.0.1":!0},E4={"http:":!0,"https:":!0},b4=async({logger:t})=>{if(process.env[$u])return{hostname:y4,path:process.env[$u]};if(process.env[Uu]){let e=d4.parse(process.env[Uu]);if(!e.hostname||!(e.hostname in S4))throw new mr.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in E4))throw new mr.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new mr.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${$u} or ${Uu} environment variable is set`,{tryNextLink:!1,logger:t})},$g=class t extends mr.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(e,r=!0){super(e,r),this.tryNextLink=r,Object.setPrototypeOf(this,t.prototype)}};st.Endpoint=void 0;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(st.Endpoint||(st.Endpoint={}));var _4="AWS_EC2_METADATA_SERVICE_ENDPOINT",w4="ec2_metadata_service_endpoint",x4={environmentVariableSelector:t=>t[_4],configFileSelector:t=>t[w4],default:void 0},vo;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(vo||(vo={}));var C4="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",A4="ec2_metadata_service_endpoint_mode",v4={environmentVariableSelector:t=>t[C4],configFileSelector:t=>t[A4],default:vo.IPv4},Pv=async()=>h4.parseUrl(await T4()||await R4()),T4=async()=>qg.loadConfig(x4)(),R4=async()=>{let t=await qg.loadConfig(v4)();switch(t){case vo.IPv4:return st.Endpoint.IPv4;case vo.IPv6:return st.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(vo)}`)}},I4=300,P4=300,O4="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",xv=(t,e)=>{let r=I4+Math.floor(Math.random()*P4),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+O4);let s=t.originalExpiration??t.expiration;return{...t,...s?{originalExpiration:s}:{},expiration:n}},k4=(t,e={})=>{let r=e?.logger||console,n;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=xv(s,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),s=xv(n,r);else throw o}return n=s,s}},Ov="/latest/meta-data/iam/security-credentials/",N4="/latest/api/token",Lg="AWS_EC2_METADATA_V1_DISABLED",Cv="ec2_metadata_v1_disabled",Av="x-aws-ec2-metadata-token",D4=(t={})=>k4(M4(t),{logger:t.logger}),M4=(t={})=>{let e=!1,{logger:r,profile:n}=t,{timeout:s,maxRetries:o}=jg(t),i=async(a,c)=>{if(e||c.headers?.[Av]==null){let l=!1,m=!1,h=await qg.loadConfig({environmentVariableSelector:g=>{let C=g[Lg];if(m=!!C&&C!=="false",C===void 0)throw new mr.CredentialsProviderError(`${Lg} not set in env, checking config file next.`,{logger:t.logger});return m},configFileSelector:g=>{let C=g[Cv];return l=!!C&&C!=="false",l},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||h){let g=[];throw t.ec2MetadataV1Disabled&&g.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),l&&g.push(`config file profile (${Cv})`),m&&g.push(`process environment variable (${Lg})`),new $g(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${g.join(", ")}].`)}}let d=(await Bg(async()=>{let l;try{l=await L4(c)}catch(m){throw m.statusCode===401&&(e=!1),m}return l},a)).trim();return Bg(async()=>{let l;try{l=await B4(d,c,t)}catch(m){throw m.statusCode===401&&(e=!1),m}return l},a)};return async()=>{let a=await Pv();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(o,{...a,timeout:s});{let c;try{c=(await F4({...a,timeout:s})).toString()}catch(u){if(u?.statusCode===400)throw Object.assign(u,{message:"EC2 Metadata token request returned error"});return(u.message==="TimeoutError"||[403,404,405].includes(u.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(o,{...a,timeout:s})}return i(o,{...a,headers:{[Av]:c},timeout:s})}}},F4=async t=>qi({...t,path:N4,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),L4=async t=>(await qi({...t,path:Ov})).toString(),B4=async(t,e,r)=>{let n=JSON.parse((await qi({...e,path:Ov+t})).toString());if(!vv(n))throw new mr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return Tv(n)};st.DEFAULT_MAX_RETRIES=Iv;st.DEFAULT_TIMEOUT=Rv;st.ENV_CMDS_AUTH_TOKEN=Ug;st.ENV_CMDS_FULL_URI=Uu;st.ENV_CMDS_RELATIVE_URI=$u;st.fromContainerMetadata=m4;st.fromInstanceMetadata=D4;st.getInstanceMetadataEndpoint=Pv;st.httpRequest=qi;st.providerConfigFromInit=jg});var kv=x(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.checkUrl=void 0;var U4=rt(),$4="169.254.170.2",q4="169.254.170.23",j4="[fd00:ec2::23]",H4=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===$4||t.hostname===q4||t.hostname===j4)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=s=>{let o=parseInt(s,10);return 0<=o&&o<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new U4.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};qu.checkUrl=H4});var Nv=x(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.createGetRequest=G4;ju.getCredentials=W4;var Hg=rt(),z4=ye(),V4=te(),K4=bc();function G4(t){return new z4.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}async function W4(t,e){let n=await(0,K4.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new Hg.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,V4.parseRfc3339DateTime)(s.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new Hg.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:s.Code,Message:s.Message})}throw new Hg.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}});var Dv=x(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.retryWrapper=void 0;var Q4=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(o=>setTimeout(o,r))}return await t()};Hu.retryWrapper=Q4});var Lv=x(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.fromHttp=void 0;var Y4=(as(),re(is)),J4=(Ut(),re(Fr)),X4=Or(),Mv=rt(),Z4=Y4.__importDefault(require("fs/promises")),eH=kv(),Fv=Nv(),tH=Dv(),rH="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",nH="http://169.254.170.2",sH="AWS_CONTAINER_CREDENTIALS_FULL_URI",oH="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",iH="AWS_CONTAINER_AUTHORIZATION_TOKEN",aH=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[rH],n=t.awsContainerCredentialsFullUri??process.env[sH],s=t.awsContainerAuthorizationToken??process.env[iH],o=t.awsContainerAuthorizationTokenFile??process.env[oH],i=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?.warn?console.warn:t.logger.warn.bind(t.logger);if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),s&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)e=n;else if(r)e=`${nH}${r}`;else throw new Mv.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,eH.checkUrl)(a,t.logger);let c=X4.NodeHttpHandler.create({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,tH.retryWrapper)(async()=>{let u=(0,Fv.createGetRequest)(a);s?u.headers.Authorization=s:o&&(u.headers.Authorization=(await Z4.default.readFile(o)).toString());try{let d=await c.handle(u);return(0,Fv.getCredentials)(d.response).then(l=>(0,J4.setCredentialFeature)(l,"CREDENTIALS_HTTP","z"))}catch(d){throw new Mv.CredentialsProviderError(String(d),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};zu.fromHttp=aH});var zg=x(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.fromHttp=void 0;var cH=Lv();Object.defineProperty(Vu,"fromHttp",{enumerable:!0,get:function(){return cH.fromHttp}})});function uH(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function lH(t){return{schemeId:"smithy.api#noAuth"}}var Hi,Bv,Uv,$v,Vg=b(()=>{Ke();Hi=w(ft()),Bv=async(t,e,r)=>({operation:(0,Hi.getSmithyContext)(e).operation,region:await(0,Hi.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Uv=t=>{let e=[];return t.operation==="CreateToken"?e.push(lH(t)):e.push(uH(t)),e},$v=t=>{let e=Lr(t);return Object.assign(e,{authSchemePreference:(0,Hi.normalizeProvider)(t.authSchemePreference??[])})}});var qv,jv,Kg=b(()=>{qv=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),jv={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var To,Ku=b(()=>{To={name:"@aws-sdk/nested-clients",version:"3.955.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.954.0","@aws-sdk/middleware-host-header":"3.953.0","@aws-sdk/middleware-logger":"3.953.0","@aws-sdk/middleware-recursion-detection":"3.953.0","@aws-sdk/middleware-user-agent":"3.954.0","@aws-sdk/region-config-resolver":"3.953.0","@aws-sdk/types":"3.953.0","@aws-sdk/util-endpoints":"3.953.0","@aws-sdk/util-user-agent-browser":"3.953.0","@aws-sdk/util-user-agent-node":"3.954.0","@smithy/config-resolver":"^4.4.4","@smithy/core":"^3.19.0","@smithy/fetch-http-handler":"^5.3.7","@smithy/hash-node":"^4.2.6","@smithy/invalid-dependency":"^4.2.6","@smithy/middleware-content-length":"^4.2.6","@smithy/middleware-endpoint":"^4.4.0","@smithy/middleware-retry":"^4.4.16","@smithy/middleware-serde":"^4.2.7","@smithy/middleware-stack":"^4.2.6","@smithy/node-config-provider":"^4.3.6","@smithy/node-http-handler":"^4.4.6","@smithy/protocol-http":"^5.3.6","@smithy/smithy-client":"^4.10.1","@smithy/types":"^4.10.0","@smithy/url-parser":"^4.2.6","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.15","@smithy/util-defaults-mode-node":"^4.2.18","@smithy/util-endpoints":"^3.2.6","@smithy/util-middleware":"^4.2.6","@smithy/util-retry":"^4.2.6","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var Ro=x(ws=>{"use strict";var Hv=require("os"),Gg=require("process"),fH=Es(),zv={isCrtAvailable:!1},pH=()=>zv.isCrtAvailable?["md/crt-avail"]:null,Vv=({serviceId:t,clientVersion:e})=>async r=>{let n=[["aws-sdk-js",e],["ua","2.1"],[`os/${Hv.platform()}`,Hv.release()],["lang/js"],["md/nodejs",`${Gg.versions.node}`]],s=pH();s&&n.push(s),t&&n.push([`api/${t}`,e]),Gg.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${Gg.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...n,[`app/${o}`]]:[...n]},hH=Vv,Kv="AWS_SDK_UA_APP_ID",Gv="sdk_ua_app_id",mH="sdk-ua-app-id",gH={environmentVariableSelector:t=>t[Kv],configFileSelector:t=>t[Gv]??t[mH],default:fH.DEFAULT_UA_APP_ID};ws.NODE_APP_ID_CONFIG_OPTIONS=gH;ws.UA_APP_ID_ENV_NAME=Kv;ws.UA_APP_ID_INI_NAME=Gv;ws.createDefaultUserAgentProvider=Vv;ws.crtAvailability=zv;ws.defaultUserAgent=hH});var Io=x(Yv=>{"use strict";var Wg=Js(),yH=Ue(),SH=require("buffer"),Wv=require("crypto"),Qg=class{algorithmIdentifier;secret;hash;constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(yH.toUint8Array(Qv(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?Wv.createHmac(this.algorithmIdentifier,Qv(this.secret)):Wv.createHash(this.algorithmIdentifier)}};function Qv(t,e){return SH.Buffer.isBuffer(t)?t:typeof t=="string"?Wg.fromString(t,e):ArrayBuffer.isView(t)?Wg.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength):Wg.fromArrayBuffer(t)}Yv.Hash=Qg});var Po=x(Jv=>{"use strict";var Yg=require("node:fs"),EH=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(t instanceof Yg.ReadStream){if(t.path!=null)return Yg.lstatSync(t.path).size;if(typeof t.fd=="number")return Yg.fstatSync(t.fd).size}throw new Error(`Body Length computation failed for ${t}`)};Jv.calculateBodyLength=EH});var Oo=x(tT=>{"use strict";var bH=vt(),Xv=pr(),_H=rt(),wH="AWS_EXECUTION_ENV",Zv="AWS_REGION",eT="AWS_DEFAULT_REGION",xH="AWS_EC2_METADATA_DISABLED",CH=["in-region","cross-region","mobile","standard","legacy"],AH="/latest/meta-data/placement/region",vH="AWS_DEFAULTS_MODE",TH="defaults_mode",RH={environmentVariableSelector:t=>t[vH],configFileSelector:t=>t[TH],default:"legacy"},IH=({region:t=Xv.loadConfig(bH.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=Xv.loadConfig(RH)}={})=>_H.memoize(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return PH(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${CH.join(", ")}, got ${r}`)}}),PH=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await OH();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},OH=async()=>{if(process.env[wH]&&(process.env[Zv]||process.env[eT]))return process.env[Zv]??process.env[eT];if(!process.env[xH])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>w(ji())),r=await t();return(await e({...r,path:AH})).toString()}catch{}};tT.resolveDefaultsModeConfig=IH});var dT,Ht,rT,zi,ko,No,zr,Jg,Xg,nT,sT,oT,fT,pT,jt,iT,hT,aT,cT,uT,lT,kH,mT,gT=b(()=>{dT="required",Ht="argv",rT="isSet",zi="booleanEquals",ko="error",No="endpoint",zr="tree",Jg="PartitionResult",Xg="getAttr",nT={[dT]:!1,type:"string"},sT={[dT]:!0,default:!1,type:"boolean"},oT={ref:"Endpoint"},fT={fn:zi,[Ht]:[{ref:"UseFIPS"},!0]},pT={fn:zi,[Ht]:[{ref:"UseDualStack"},!0]},jt={},iT={fn:Xg,[Ht]:[{ref:Jg},"supportsFIPS"]},hT={ref:Jg},aT={fn:zi,[Ht]:[!0,{fn:Xg,[Ht]:[hT,"supportsDualStack"]}]},cT=[fT],uT=[pT],lT=[{ref:"Region"}],kH={version:"1.0",parameters:{Region:nT,UseDualStack:sT,UseFIPS:sT,Endpoint:nT},rules:[{conditions:[{fn:rT,[Ht]:[oT]}],rules:[{conditions:cT,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ko},{conditions:uT,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ko},{endpoint:{url:oT,properties:jt,headers:jt},type:No}],type:zr},{conditions:[{fn:rT,[Ht]:lT}],rules:[{conditions:[{fn:"aws.partition",[Ht]:lT,assign:Jg}],rules:[{conditions:[fT,pT],rules:[{conditions:[{fn:zi,[Ht]:[!0,iT]},aT],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jt,headers:jt},type:No}],type:zr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ko}],type:zr},{conditions:cT,rules:[{conditions:[{fn:zi,[Ht]:[iT,!0]}],rules:[{conditions:[{fn:"stringEquals",[Ht]:[{fn:Xg,[Ht]:[hT,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:jt,headers:jt},type:No},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:jt,headers:jt},type:No}],type:zr},{error:"FIPS is enabled but this partition does not support FIPS",type:ko}],type:zr},{conditions:uT,rules:[{conditions:[aT],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jt,headers:jt},type:No}],type:zr},{error:"DualStack is enabled but this partition does not support DualStack",type:ko}],type:zr},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:jt,headers:jt},type:No}],type:zr}],type:zr},{error:"Invalid Configuration: Missing Region",type:ko}]},mT=kH});var yT,Do,NH,ST,ET=b(()=>{yT=w(hs()),Do=w(sn());gT();NH=new Do.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),ST=(t,e={})=>NH.get(t,()=>(0,Do.resolveEndpoint)(mT,{endpointParams:t,logger:e.logger}));Do.customEndpointFunctions.aws=yT.awsEndpointFunctions});var bT,_T,Gu,Wu,wT,xT=b(()=>{Ke();Ss();gt();bT=w(te()),_T=w(Mr()),Gu=w($e()),Wu=w(Ue());Vg();ET();wT=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??Gu.fromBase64,base64Encoder:t?.base64Encoder??Gu.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??ST,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Uv,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new tt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Yt}],logger:t?.logger??new bT.NoOpLogger,protocol:t?.protocol??Sn,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.ssooidc",version:"2019-06-10",serviceTarget:"AWSSSOOIDCService"},serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??_T.parseUrl,utf8Decoder:t?.utf8Decoder??Wu.fromUtf8,utf8Encoder:t?.utf8Encoder??Wu.toUtf8})});var Qu,In,CT,Yu,Rn,Ju,Xu,AT,vT,TT,RT,IT=b(()=>{Ku();Ke();Qu=w(Ro()),In=w(vt()),CT=w(Io()),Yu=w(Xt()),Rn=w(pr()),Ju=w(Or()),Xu=w(te()),AT=w(Po()),vT=w(Oo()),TT=w(_s());xT();RT=t=>{(0,Xu.emitWarningIfUnsupportedVersion)(process.version);let e=(0,vT.resolveDefaultsModeConfig)(t),r=()=>e().then(Xu.loadConfigsForDefaultMode),n=wT(t);on(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Rn.loadConfig)(cn,s),bodyLengthChecker:t?.bodyLengthChecker??AT.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Qu.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:To.version}),maxAttempts:t?.maxAttempts??(0,Rn.loadConfig)(Yu.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Rn.loadConfig)(In.NODE_REGION_CONFIG_OPTIONS,{...In.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Ju.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Rn.loadConfig)({...Yu.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||TT.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??CT.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Ju.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Rn.loadConfig)(In.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Rn.loadConfig)(In.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Rn.loadConfig)(Qu.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var OT=x(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.warning=void 0;Mo.stsRegionDefaultResolver=MH;var PT=vt(),DH=pr();function MH(t={}){return(0,DH.loadConfig)({...PT.NODE_REGION_CONFIG_OPTIONS,async default(){return Mo.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...PT.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}Mo.warning={silence:!1}});var xs=x(gr=>{"use strict";var kT=OT(),Vi=vt(),FH=t=>({setRegion(e){t.region=e},region(){return t.region}}),LH=t=>({region:t.region()});Object.defineProperty(gr,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return Vi.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(gr,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return Vi.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(gr,"REGION_ENV_NAME",{enumerable:!0,get:function(){return Vi.REGION_ENV_NAME}});Object.defineProperty(gr,"REGION_INI_NAME",{enumerable:!0,get:function(){return Vi.REGION_INI_NAME}});Object.defineProperty(gr,"resolveRegionConfig",{enumerable:!0,get:function(){return Vi.resolveRegionConfig}});gr.getAwsRegionExtensionConfiguration=FH;gr.resolveAwsRegionExtensionConfiguration=LH;Object.keys(kT).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(gr,t)&&Object.defineProperty(gr,t,{enumerable:!0,get:function(){return kT[t]}})})});var NT,DT,MT=b(()=>{NT=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},DT=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var Zu,el,tl,FT,LT=b(()=>{Zu=w(xs()),el=w(ye()),tl=w(te());MT();FT=(t,e)=>{let r=Object.assign((0,Zu.getAwsRegionExtensionConfiguration)(t),(0,tl.getDefaultExtensionConfiguration)(t),(0,el.getHttpHandlerExtensionConfiguration)(t),NT(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,Zu.resolveAwsRegionExtensionConfiguration)(r),(0,tl.resolveDefaultRuntimeConfig)(r),(0,el.resolveHttpHandlerRuntimeConfig)(r),DT(r))}});var rl,BT,UT,nl,$T,qT,jT,sl,Zg,Ki,ey=b(()=>{rl=w(Gs()),BT=w(Ws()),UT=w(Qs()),nl=w(Es()),$T=w(vt());gt();le();qT=w(xo()),jT=w(hr()),sl=w(Xt()),Zg=w(te());Vg();Kg();IT();LT();Ki=class extends Zg.Client{config;constructor(...[e]){let r=RT(e||{});super(r),this.initConfig=r;let n=qv(r),s=(0,nl.resolveUserAgentConfig)(n),o=(0,sl.resolveRetryConfig)(s),i=(0,$T.resolveRegionConfig)(o),a=(0,rl.resolveHostHeaderConfig)(i),c=(0,jT.resolveEndpointConfig)(a),u=$v(c),d=FT(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(ss(this.config)),this.middlewareStack.use((0,nl.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,sl.getRetryPlugin)(this.config)),this.middlewareStack.use((0,qT.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,rl.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,BT.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,UT.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(rs(this.config,{httpAuthSchemeParametersProvider:Bv,identityProviderConfigProvider:async l=>new Dr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(ns(this.config))}destroy(){super.destroy()}}});var HT,je,ol=b(()=>{HT=w(te()),je=class t extends HT.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var Gi,Wi,Qi,Yi,Ji,Xi,Zi,ea,ta,ra,na,ty=b(()=>{ol();Gi=class t extends je{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},Wi=class t extends je{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Qi=class t extends je{name="ExpiredTokenException";$fault="client";error;error_description;constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Yi=class t extends je{name="InternalServerException";$fault="server";error;error_description;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Ji=class t extends je{name="InvalidClientException";$fault="client";error;error_description;constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Xi=class t extends je{name="InvalidGrantException";$fault="client";error;error_description;constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Zi=class t extends je{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},ea=class t extends je{name="InvalidScopeException";$fault="client";error;error_description;constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},ta=class t extends je{name="SlowDownException";$fault="client";error;error_description;constructor(e){super({name:"SlowDownException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},ra=class t extends je{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},na=class t extends je{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}}});var BH,UH,$H,qH,jH,HH,zH,VH,KH,GH,WH,QH,YH,JH,XH,ZH,e6,t6,r6,n6,yr,s6,o6,i6,a6,c6,Ne,u6,Zt,l6,d6,er,f6,zT,VT,p6,h6,m6,KT,g6,de,y6,S6,E6,b6,GT,WT,QT,YT,JT,XT,ZT,eR,tR,rR,nR,sR,oR,iR,aR,ry,ny=b(()=>{le();ty();ol();BH="AccessDeniedException",UH="AuthorizationPendingException",$H="AccessToken",qH="ClientSecret",jH="CreateToken",HH="CreateTokenRequest",zH="CreateTokenResponse",VH="CodeVerifier",KH="ExpiredTokenException",GH="InvalidClientException",WH="InvalidGrantException",QH="InvalidRequestException",YH="InternalServerException",JH="InvalidScopeException",XH="IdToken",ZH="RefreshToken",e6="SlowDownException",t6="UnauthorizedClientException",r6="UnsupportedGrantTypeException",n6="accessToken",yr="client",s6="clientId",o6="clientSecret",i6="codeVerifier",a6="code",c6="deviceCode",Ne="error",u6="expiresIn",Zt="error_description",l6="grantType",d6="http",er="httpError",f6="idToken",zT="reason",VT="refreshToken",p6="redirectUri",h6="scope",m6="server",KT="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",g6="tokenType",de="com.amazonaws.ssooidc",y6=[0,de,$H,8,0],S6=[0,de,qH,8,0],E6=[0,de,VH,8,0],b6=[0,de,XH,8,0],GT=[0,de,ZH,8,0],WT=[-3,de,BH,{[Ne]:yr,[er]:400},[Ne,zT,Zt],[0,0,0]];H.for(de).registerError(WT,Gi);QT=[-3,de,UH,{[Ne]:yr,[er]:400},[Ne,Zt],[0,0]];H.for(de).registerError(QT,Wi);YT=[3,de,HH,0,[s6,o6,l6,c6,a6,VT,h6,p6,i6],[0,[()=>S6,0],0,0,0,[()=>GT,0],64,0,[()=>E6,0]]],JT=[3,de,zH,0,[n6,g6,u6,VT,f6],[[()=>y6,0],0,1,[()=>GT,0],[()=>b6,0]]],XT=[-3,de,KH,{[Ne]:yr,[er]:400},[Ne,Zt],[0,0]];H.for(de).registerError(XT,Qi);ZT=[-3,de,YH,{[Ne]:m6,[er]:500},[Ne,Zt],[0,0]];H.for(de).registerError(ZT,Yi);eR=[-3,de,GH,{[Ne]:yr,[er]:401},[Ne,Zt],[0,0]];H.for(de).registerError(eR,Ji);tR=[-3,de,WH,{[Ne]:yr,[er]:400},[Ne,Zt],[0,0]];H.for(de).registerError(tR,Xi);rR=[-3,de,QH,{[Ne]:yr,[er]:400},[Ne,zT,Zt],[0,0,0]];H.for(de).registerError(rR,Zi);nR=[-3,de,JH,{[Ne]:yr,[er]:400},[Ne,Zt],[0,0]];H.for(de).registerError(nR,ea);sR=[-3,de,e6,{[Ne]:yr,[er]:400},[Ne,Zt],[0,0]];H.for(de).registerError(sR,ta);oR=[-3,de,t6,{[Ne]:yr,[er]:400},[Ne,Zt],[0,0]];H.for(de).registerError(oR,ra);iR=[-3,de,r6,{[Ne]:yr,[er]:400},[Ne,Zt],[0,0]];H.for(de).registerError(iR,na);aR=[-3,KT,"SSOOIDCServiceException",0,[],[]];H.for(KT).registerError(aR,je);ry=[9,de,jH,{[d6]:["POST","/token",200]},()=>YT,()=>JT]});var cR,sy,sa,oy=b(()=>{cR=w(hr()),sy=w(te());Kg();ny();sa=class extends sy.Command.classBuilder().ep(jv).m(function(e,r,n,s){return[(0,cR.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(ry).build(){}});var uR,_6,il,lR=b(()=>{uR=w(te());oy();ey();_6={CreateTokenCommand:sa},il=class extends Ki{};(0,uR.createAggregatedClient)(_6,il)});var dR=b(()=>{oy()});var w6,x6,fR=b(()=>{w6={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},x6={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"}});var pR=b(()=>{});var iy={};dt(iy,{$Command:()=>sy.Command,AccessDeniedException:()=>Gi,AccessDeniedException$:()=>WT,AccessDeniedExceptionReason:()=>w6,AuthorizationPendingException:()=>Wi,AuthorizationPendingException$:()=>QT,CreateToken$:()=>ry,CreateTokenCommand:()=>sa,CreateTokenRequest$:()=>YT,CreateTokenResponse$:()=>JT,ExpiredTokenException:()=>Qi,ExpiredTokenException$:()=>XT,InternalServerException:()=>Yi,InternalServerException$:()=>ZT,InvalidClientException:()=>Ji,InvalidClientException$:()=>eR,InvalidGrantException:()=>Xi,InvalidGrantException$:()=>tR,InvalidRequestException:()=>Zi,InvalidRequestException$:()=>rR,InvalidRequestExceptionReason:()=>x6,InvalidScopeException:()=>ea,InvalidScopeException$:()=>nR,SSOOIDC:()=>il,SSOOIDCClient:()=>Ki,SSOOIDCServiceException:()=>je,SSOOIDCServiceException$:()=>aR,SlowDownException:()=>ta,SlowDownException$:()=>sR,UnauthorizedClientException:()=>ra,UnauthorizedClientException$:()=>oR,UnsupportedGrantTypeException:()=>na,UnsupportedGrantTypeException$:()=>iR,__Client:()=>Zg.Client});var ay=b(()=>{ey();lR();dR();ny();fR();ty();pR();ol()});var yR=x(ia=>{"use strict";var C6=(Ut(),re(Fr)),A6=(Rm(),re(Xx)),kt=rt(),oa=fr(),v6=require("fs"),T6=({logger:t,signingName:e}={})=>async()=>{if(t?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!e)throw new kt.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:t});let r=A6.getBearerTokenEnvKey(e);if(!(r in process.env))throw new kt.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:t});let n={token:process.env[r]};return C6.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},R6=300*1e3,cy="To refresh this SSO session run 'aws sso login' with the corresponding profile.",I6=async(t,e={},r)=>{let{SSOOIDCClient:n}=await Promise.resolve().then(()=>(ay(),iy)),s=i=>e.clientConfig?.[i]??e.parentClientConfig?.[i]??r?.[i];return new n(Object.assign({},e.clientConfig??{},{region:t??e.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},P6=async(t,e,r={},n)=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(ay(),iy));return(await I6(e,r,n)).send(new s({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},hR=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new kt.TokenProviderError(`Token is expired. ${cy}`,!1)},Cs=(t,e,r=!1)=>{if(typeof e>"u")throw new kt.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${cy}`,!1)},{writeFile:O6}=v6.promises,k6=(t,e)=>{let r=oa.getSSOTokenFilepath(t),n=JSON.stringify(e,null,2);return O6(r,n)},mR=new Date(0),gR=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/token-providers - fromSso");let r=await oa.parseKnownFiles(t),n=oa.getProfileName({profile:t.profile??e?.profile}),s=r[n];if(s){if(!s.sso_session)throw new kt.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new kt.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let o=s.sso_session,a=(await oa.loadSsoSessionData(t))[o];if(!a)throw new kt.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let h of["sso_start_url","sso_region"])if(!a[h])throw new kt.TokenProviderError(`Sso session '${o}' is missing required property '${h}'.`,!1);a.sso_start_url;let c=a.sso_region,u;try{u=await oa.getSSOTokenFromFile(o)}catch{throw new kt.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${cy}`,!1)}Cs("accessToken",u.accessToken),Cs("expiresAt",u.expiresAt);let{accessToken:d,expiresAt:l}=u,m={token:d,expiration:new Date(l)};if(m.expiration.getTime()-Date.now()>R6)return m;if(Date.now()-mR.getTime()<30*1e3)return hR(m),m;Cs("clientId",u.clientId,!0),Cs("clientSecret",u.clientSecret,!0),Cs("refreshToken",u.refreshToken,!0);try{mR.setTime(Date.now());let h=await P6(u,c,t,e);Cs("accessToken",h.accessToken),Cs("expiresIn",h.expiresIn);let g=new Date(Date.now()+h.expiresIn*1e3);try{await k6(o,{...u,accessToken:h.accessToken,expiresAt:g.toISOString(),refreshToken:h.refreshToken})}catch{}return{token:h.accessToken,expiration:g}}catch{return hR(m),m}},N6=({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new kt.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},D6=(t={})=>kt.memoize(kt.chain(gR(t),async()=>{throw new kt.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);ia.fromEnvSigningName=T6;ia.fromSso=gR;ia.fromStatic=N6;ia.nodeProvider=D6});var ly=x(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.resolveHttpAuthSchemeConfig=Pn.defaultSSOHttpAuthSchemeProvider=Pn.defaultSSOHttpAuthSchemeParametersProvider=void 0;var M6=(Ke(),re(_n)),uy=ft(),F6=async(t,e,r)=>({operation:(0,uy.getSmithyContext)(e).operation,region:await(0,uy.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Pn.defaultSSOHttpAuthSchemeParametersProvider=F6;function L6(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function al(t){return{schemeId:"smithy.api#noAuth"}}var B6=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(al(t));break}case"ListAccountRoles":{e.push(al(t));break}case"ListAccounts":{e.push(al(t));break}case"Logout":{e.push(al(t));break}default:e.push(L6(t))}return e};Pn.defaultSSOHttpAuthSchemeProvider=B6;var U6=t=>{let e=(0,M6.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,uy.normalizeProvider)(t.authSchemePreference??[])})};Pn.resolveHttpAuthSchemeConfig=U6});var SR=x((Aae,$6)=>{$6.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.955.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.954.0","@aws-sdk/middleware-host-header":"3.953.0","@aws-sdk/middleware-logger":"3.953.0","@aws-sdk/middleware-recursion-detection":"3.953.0","@aws-sdk/middleware-user-agent":"3.954.0","@aws-sdk/region-config-resolver":"3.953.0","@aws-sdk/types":"3.953.0","@aws-sdk/util-endpoints":"3.953.0","@aws-sdk/util-user-agent-browser":"3.953.0","@aws-sdk/util-user-agent-node":"3.954.0","@smithy/config-resolver":"^4.4.4","@smithy/core":"^3.19.0","@smithy/fetch-http-handler":"^5.3.7","@smithy/hash-node":"^4.2.6","@smithy/invalid-dependency":"^4.2.6","@smithy/middleware-content-length":"^4.2.6","@smithy/middleware-endpoint":"^4.4.0","@smithy/middleware-retry":"^4.4.16","@smithy/middleware-serde":"^4.2.7","@smithy/middleware-stack":"^4.2.6","@smithy/node-config-provider":"^4.3.6","@smithy/node-http-handler":"^4.4.6","@smithy/protocol-http":"^5.3.6","@smithy/smithy-client":"^4.10.1","@smithy/types":"^4.10.0","@smithy/url-parser":"^4.2.6","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.15","@smithy/util-defaults-mode-node":"^4.2.18","@smithy/util-endpoints":"^3.2.6","@smithy/util-middleware":"^4.2.6","@smithy/util-retry":"^4.2.6","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var NR=x(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.ruleSet=void 0;var IR="required",Vt="fn",Kt="argv",Bo="ref",ER=!0,bR="isSet",aa="booleanEquals",Fo="error",Lo="endpoint",Vr="tree",dy="PartitionResult",fy="getAttr",_R={[IR]:!1,type:"string"},wR={[IR]:!0,default:!1,type:"boolean"},xR={[Bo]:"Endpoint"},PR={[Vt]:aa,[Kt]:[{[Bo]:"UseFIPS"},!0]},OR={[Vt]:aa,[Kt]:[{[Bo]:"UseDualStack"},!0]},zt={},CR={[Vt]:fy,[Kt]:[{[Bo]:dy},"supportsFIPS"]},kR={[Bo]:dy},AR={[Vt]:aa,[Kt]:[!0,{[Vt]:fy,[Kt]:[kR,"supportsDualStack"]}]},vR=[PR],TR=[OR],RR=[{[Bo]:"Region"}],q6={version:"1.0",parameters:{Region:_R,UseDualStack:wR,UseFIPS:wR,Endpoint:_R},rules:[{conditions:[{[Vt]:bR,[Kt]:[xR]}],rules:[{conditions:vR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Fo},{conditions:TR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Fo},{endpoint:{url:xR,properties:zt,headers:zt},type:Lo}],type:Vr},{conditions:[{[Vt]:bR,[Kt]:RR}],rules:[{conditions:[{[Vt]:"aws.partition",[Kt]:RR,assign:dy}],rules:[{conditions:[PR,OR],rules:[{conditions:[{[Vt]:aa,[Kt]:[ER,CR]},AR],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:zt,headers:zt},type:Lo}],type:Vr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Fo}],type:Vr},{conditions:vR,rules:[{conditions:[{[Vt]:aa,[Kt]:[CR,ER]}],rules:[{conditions:[{[Vt]:"stringEquals",[Kt]:[{[Vt]:fy,[Kt]:[kR,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:zt,headers:zt},type:Lo},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:zt,headers:zt},type:Lo}],type:Vr},{error:"FIPS is enabled but this partition does not support FIPS",type:Fo}],type:Vr},{conditions:TR,rules:[{conditions:[AR],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:zt,headers:zt},type:Lo}],type:Vr},{error:"DualStack is enabled but this partition does not support DualStack",type:Fo}],type:Vr},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:zt,headers:zt},type:Lo}],type:Vr}],type:Vr},{error:"Invalid Configuration: Missing Region",type:Fo}]};cl.ruleSet=q6});var DR=x(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.defaultEndpointResolver=void 0;var j6=hs(),py=sn(),H6=NR(),z6=new py.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),V6=(t,e={})=>z6.get(t,()=>(0,py.resolveEndpoint)(H6.ruleSet,{endpointParams:t,logger:e.logger}));ul.defaultEndpointResolver=V6;py.customEndpointFunctions.aws=j6.awsEndpointFunctions});var LR=x(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.getRuntimeConfig=void 0;var K6=(Ke(),re(_n)),G6=(Ss(),re(mg)),W6=(gt(),re(io)),Q6=te(),Y6=Mr(),MR=$e(),FR=Ue(),J6=ly(),X6=DR(),Z6=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??MR.fromBase64,base64Encoder:t?.base64Encoder??MR.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??X6.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??J6.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new K6.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new W6.NoAuthSigner}],logger:t?.logger??new Q6.NoOpLogger,protocol:t?.protocol??G6.AwsRestJsonProtocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sso",version:"2019-06-10",serviceTarget:"SWBPortalService"},serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??Y6.parseUrl,utf8Decoder:t?.utf8Decoder??FR.fromUtf8,utf8Encoder:t?.utf8Encoder??FR.toUtf8});ll.getRuntimeConfig=Z6});var HR=x(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.getRuntimeConfig=void 0;var ez=(as(),re(is)),tz=ez.__importDefault(SR()),BR=(Ke(),re(_n)),UR=Ro(),dl=vt(),rz=Io(),$R=Xt(),As=pr(),qR=Or(),jR=te(),nz=Po(),sz=Oo(),oz=_s(),iz=LR(),az=t=>{(0,jR.emitWarningIfUnsupportedVersion)(process.version);let e=(0,sz.resolveDefaultsModeConfig)(t),r=()=>e().then(jR.loadConfigsForDefaultMode),n=(0,iz.getRuntimeConfig)(t);(0,BR.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,As.loadConfig)(BR.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??nz.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,UR.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:tz.default.version}),maxAttempts:t?.maxAttempts??(0,As.loadConfig)($R.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,As.loadConfig)(dl.NODE_REGION_CONFIG_OPTIONS,{...dl.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:qR.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,As.loadConfig)({...$R.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||oz.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??rz.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??qR.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,As.loadConfig)(dl.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,As.loadConfig)(dl.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,As.loadConfig)(UR.NODE_APP_ID_CONFIG_OPTIONS,s)}};fl.getRuntimeConfig=az});var _I=x(se=>{"use strict";var zR=Gs(),cz=Ws(),uz=Qs(),VR=Es(),lz=vt(),ca=(gt(),re(io)),$o=(le(),re(Ic)),dz=xo(),da=hr(),KR=Xt(),tr=te(),GR=ly(),fz=HR(),WR=xs(),QR=ye(),pz=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),bl={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},hz=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},mz=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),gz=(t,e)=>{let r=Object.assign(WR.getAwsRegionExtensionConfiguration(t),tr.getDefaultExtensionConfiguration(t),QR.getHttpHandlerExtensionConfiguration(t),hz(t));return e.forEach(n=>n.configure(r)),Object.assign(t,WR.resolveAwsRegionExtensionConfiguration(r),tr.resolveDefaultRuntimeConfig(r),QR.resolveHttpHandlerRuntimeConfig(r),mz(r))},Uo=class extends tr.Client{config;constructor(...[e]){let r=fz.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=pz(r),s=VR.resolveUserAgentConfig(n),o=KR.resolveRetryConfig(s),i=lz.resolveRegionConfig(o),a=zR.resolveHostHeaderConfig(i),c=da.resolveEndpointConfig(a),u=GR.resolveHttpAuthSchemeConfig(c),d=gz(u,e?.extensions||[]);this.config=d,this.middlewareStack.use($o.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(VR.getUserAgentPlugin(this.config)),this.middlewareStack.use(KR.getRetryPlugin(this.config)),this.middlewareStack.use(dz.getContentLengthPlugin(this.config)),this.middlewareStack.use(zR.getHostHeaderPlugin(this.config)),this.middlewareStack.use(cz.getLoggerPlugin(this.config)),this.middlewareStack.use(uz.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(ca.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:GR.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new ca.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(ca.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},On=class t extends tr.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},pl=class t extends On{name="InvalidRequestException";$fault="client";constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},hl=class t extends On{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ml=class t extends On{name="TooManyRequestsException";$fault="client";constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},gl=class t extends On{name="UnauthorizedException";$fault="client";constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},yz="AccountInfo",Sz="AccountListType",Ez="AccessTokenType",bz="GetRoleCredentials",_z="GetRoleCredentialsRequest",wz="GetRoleCredentialsResponse",xz="InvalidRequestException",Cz="Logout",Az="ListAccounts",vz="ListAccountsRequest",Tz="ListAccountRolesRequest",Rz="ListAccountRolesResponse",Iz="ListAccountsResponse",Pz="ListAccountRoles",Oz="LogoutRequest",kz="RoleCredentials",Nz="RoleInfo",Dz="RoleListType",Mz="ResourceNotFoundException",Fz="SecretAccessKeyType",Lz="SessionTokenType",Bz="TooManyRequestsException",Uz="UnauthorizedException",_l="accountId",$z="accessKeyId",qz="accountList",jz="accountName",wl="accessToken",YR="account_id",xl="client",Cl="error",Hz="emailAddress",zz="expiration",Al="http",vl="httpError",Tl="httpHeader",vs="httpQuery",Rl="message",JR="maxResults",XR="max_result",Il="nextToken",ZR="next_token",Vz="roleCredentials",Kz="roleList",eI="roleName",Gz="role_name",tI="smithy.ts.sdk.synthetic.com.amazonaws.sso",Wz="secretAccessKey",Qz="sessionToken",Pl="x-amz-sso_bearer_token",xe="com.amazonaws.sso",Ol=[0,xe,Ez,8,0],Yz=[0,xe,Fz,8,0],Jz=[0,xe,Lz,8,0],rI=[3,xe,yz,0,[_l,jz,Hz],[0,0,0]],nI=[3,xe,_z,0,[eI,_l,wl],[[0,{[vs]:Gz}],[0,{[vs]:YR}],[()=>Ol,{[Tl]:Pl}]]],sI=[3,xe,wz,0,[Vz],[[()=>fI,0]]],oI=[-3,xe,xz,{[Cl]:xl,[vl]:400},[Rl],[0]];$o.TypeRegistry.for(xe).registerError(oI,pl);var iI=[3,xe,Tz,0,[Il,JR,wl,_l],[[0,{[vs]:ZR}],[1,{[vs]:XR}],[()=>Ol,{[Tl]:Pl}],[0,{[vs]:YR}]]],aI=[3,xe,Rz,0,[Il,Kz],[0,()=>e8]],cI=[3,xe,vz,0,[Il,JR,wl],[[0,{[vs]:ZR}],[1,{[vs]:XR}],[()=>Ol,{[Tl]:Pl}]]],uI=[3,xe,Iz,0,[Il,qz],[0,()=>Zz]],lI=[3,xe,Oz,0,[wl],[[()=>Ol,{[Tl]:Pl}]]],dI=[-3,xe,Mz,{[Cl]:xl,[vl]:404},[Rl],[0]];$o.TypeRegistry.for(xe).registerError(dI,hl);var fI=[3,xe,kz,0,[$z,Wz,Qz,zz],[0,[()=>Yz,0],[()=>Jz,0],1]],pI=[3,xe,Nz,0,[eI,_l],[0,0]],hI=[-3,xe,Bz,{[Cl]:xl,[vl]:429},[Rl],[0]];$o.TypeRegistry.for(xe).registerError(hI,ml);var mI=[-3,xe,Uz,{[Cl]:xl,[vl]:401},[Rl],[0]];$o.TypeRegistry.for(xe).registerError(mI,gl);var Xz="unit",gI=[-3,tI,"SSOServiceException",0,[],[]];$o.TypeRegistry.for(tI).registerError(gI,On);var Zz=[1,xe,Sz,0,()=>rI],e8=[1,xe,Dz,0,()=>pI],yI=[9,xe,bz,{[Al]:["GET","/federation/credentials",200]},()=>nI,()=>sI],SI=[9,xe,Pz,{[Al]:["GET","/assignment/roles",200]},()=>iI,()=>aI],EI=[9,xe,Az,{[Al]:["GET","/assignment/accounts",200]},()=>cI,()=>uI],bI=[9,xe,Cz,{[Al]:["POST","/logout",200]},()=>lI,()=>Xz],yl=class extends tr.Command.classBuilder().ep(bl).m(function(e,r,n,s){return[da.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(yI).build(){},ua=class extends tr.Command.classBuilder().ep(bl).m(function(e,r,n,s){return[da.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(SI).build(){},la=class extends tr.Command.classBuilder().ep(bl).m(function(e,r,n,s){return[da.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(EI).build(){},Sl=class extends tr.Command.classBuilder().ep(bl).m(function(e,r,n,s){return[da.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(bI).build(){},t8={GetRoleCredentialsCommand:yl,ListAccountRolesCommand:ua,ListAccountsCommand:la,LogoutCommand:Sl},El=class extends Uo{};tr.createAggregatedClient(t8,El);var r8=ca.createPaginator(Uo,ua,"nextToken","nextToken","maxResults"),n8=ca.createPaginator(Uo,la,"nextToken","nextToken","maxResults");Object.defineProperty(se,"$Command",{enumerable:!0,get:function(){return tr.Command}});Object.defineProperty(se,"__Client",{enumerable:!0,get:function(){return tr.Client}});se.AccountInfo$=rI;se.GetRoleCredentials$=yI;se.GetRoleCredentialsCommand=yl;se.GetRoleCredentialsRequest$=nI;se.GetRoleCredentialsResponse$=sI;se.InvalidRequestException=pl;se.InvalidRequestException$=oI;se.ListAccountRoles$=SI;se.ListAccountRolesCommand=ua;se.ListAccountRolesRequest$=iI;se.ListAccountRolesResponse$=aI;se.ListAccounts$=EI;se.ListAccountsCommand=la;se.ListAccountsRequest$=cI;se.ListAccountsResponse$=uI;se.Logout$=bI;se.LogoutCommand=Sl;se.LogoutRequest$=lI;se.ResourceNotFoundException=hl;se.ResourceNotFoundException$=dI;se.RoleCredentials$=fI;se.RoleInfo$=pI;se.SSO=El;se.SSOClient=Uo;se.SSOServiceException=On;se.SSOServiceException$=gI;se.TooManyRequestsException=ml;se.TooManyRequestsException$=hI;se.UnauthorizedException=gl;se.UnauthorizedException$=mI;se.paginateListAccountRoles=r8;se.paginateListAccounts=n8});var xI=x(hy=>{"use strict";var wI=_I();Object.defineProperty(hy,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return wI.GetRoleCredentialsCommand}});Object.defineProperty(hy,"SSOClient",{enumerable:!0,get:function(){return wI.SSOClient}})});var my=x(Nl=>{"use strict";var rr=rt(),kl=fr(),CI=(Ut(),re(Fr)),s8=yR(),vI=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),fa=!1,AI=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,clientConfig:i,parentClientConfig:a,callerClientConfig:c,profile:u,filepath:d,configFilepath:l,ignoreCache:m,logger:h})=>{let g,C="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let xt=await s8.fromSso({profile:u,filepath:d,configFilepath:l,ignoreCache:m})();g={accessToken:xt.token,expiresAt:new Date(xt.expiration).toISOString()}}catch(xt){throw new rr.CredentialsProviderError(xt.message,{tryNextLink:fa,logger:h})}else try{g=await kl.getSSOTokenFromFile(t)}catch{throw new rr.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${C}`,{tryNextLink:fa,logger:h})}if(new Date(g.expiresAt).getTime()-Date.now()<=0)throw new rr.CredentialsProviderError(`The SSO session associated with this profile has expired. ${C}`,{tryNextLink:fa,logger:h});let{accessToken:T}=g,{SSOClient:R,GetRoleCredentialsCommand:O}=await Promise.resolve().then(function(){return xI()}),D=o||new R(Object.assign({},i??{},{logger:i?.logger??c?.logger??a?.logger,region:i?.region??n,userAgentAppId:i?.userAgentAppId??c?.userAgentAppId??a?.userAgentAppId})),M;try{M=await D.send(new O({accountId:r,roleName:s,accessToken:T}))}catch(xt){throw new rr.CredentialsProviderError(xt,{tryNextLink:fa,logger:h})}let{roleCredentials:{accessKeyId:j,secretAccessKey:Q,sessionToken:ve,expiration:G,credentialScope:ne,accountId:_e}={}}=M;if(!j||!Q||!ve||!G)throw new rr.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:fa,logger:h});let Ve={accessKeyId:j,secretAccessKey:Q,sessionToken:ve,expiration:new Date(G),...ne&&{credentialScope:ne},..._e&&{accountId:_e}};return e?CI.setCredentialFeature(Ve,"CREDENTIALS_SSO","s"):CI.setCredentialFeature(Ve,"CREDENTIALS_SSO_LEGACY","u"),Ve},TI=(t,e)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:o}=t;if(!r||!n||!s||!o)throw new rr.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},o8=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=t,{ssoClient:a}=t,c=kl.getProfileName({profile:t.profile??e?.profile});if(!r&&!n&&!s&&!o&&!i){let d=(await kl.parseKnownFiles(t))[c];if(!d)throw new rr.CredentialsProviderError(`Profile ${c} was not found.`,{logger:t.logger});if(!vI(d))throw new rr.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:t.logger});if(d?.sso_session){let R=(await kl.loadSsoSessionData(t))[d.sso_session],O=` configurations in profile ${c} and sso-session ${d.sso_session}`;if(s&&s!==R.sso_region)throw new rr.CredentialsProviderError("Conflicting SSO region"+O,{tryNextLink:!1,logger:t.logger});if(r&&r!==R.sso_start_url)throw new rr.CredentialsProviderError("Conflicting SSO start_url"+O,{tryNextLink:!1,logger:t.logger});d.sso_region=R.sso_region,d.sso_start_url=R.sso_start_url}let{sso_start_url:l,sso_account_id:m,sso_region:h,sso_role_name:g,sso_session:C}=TI(d,t.logger);return AI({ssoStartUrl:l,ssoSession:C,ssoAccountId:m,ssoRegion:h,ssoRoleName:g,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,callerClientConfig:t.callerClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}else{if(!r||!n||!s||!o)throw new rr.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return AI({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,callerClientConfig:t.callerClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}};Nl.fromSSO=o8;Nl.isSsoProfile=vI;Nl.validateSsoProfile=TI});function i8(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function a8(t){return{schemeId:"smithy.api#noAuth"}}var pa,RI,II,PI,gy=b(()=>{Ke();pa=w(ft()),RI=async(t,e,r)=>({operation:(0,pa.getSmithyContext)(e).operation,region:await(0,pa.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});II=t=>{let e=[];return t.operation==="CreateOAuth2Token"?e.push(a8(t)):e.push(i8(t)),e},PI=t=>{let e=Lr(t);return Object.assign(e,{authSchemePreference:(0,pa.normalizeProvider)(t.authSchemePreference??[])})}});var OI,kI,yy=b(()=>{OI=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"signin"}),kI={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var $I,it,NI,Ts,qo,kn,nr,Fl,Sy,DI,MI,FI,Ey,by,ot,_y,Dl,Ml,LI,BI,UI,c8,qI,jI=b(()=>{$I="required",it="argv",NI="isSet",Ts="booleanEquals",qo="error",kn="endpoint",nr="tree",Fl="PartitionResult",Sy="stringEquals",DI={[$I]:!0,default:!1,type:"boolean"},MI={[$I]:!1,type:"string"},FI={ref:"Endpoint"},Ey={fn:Ts,[it]:[{ref:"UseFIPS"},!0]},by={fn:Ts,[it]:[{ref:"UseDualStack"},!0]},ot={},_y={fn:"getAttr",[it]:[{ref:Fl},"name"]},Dl={fn:Ts,[it]:[{ref:"UseFIPS"},!1]},Ml={fn:Ts,[it]:[{ref:"UseDualStack"},!1]},LI={fn:"getAttr",[it]:[{ref:Fl},"supportsFIPS"]},BI={fn:Ts,[it]:[!0,{fn:"getAttr",[it]:[{ref:Fl},"supportsDualStack"]}]},UI=[{ref:"Region"}],c8={version:"1.0",parameters:{UseDualStack:DI,UseFIPS:DI,Endpoint:MI,Region:MI},rules:[{conditions:[{fn:NI,[it]:[FI]}],rules:[{conditions:[Ey],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:qo},{rules:[{conditions:[by],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:qo},{endpoint:{url:FI,properties:ot,headers:ot},type:kn}],type:nr}],type:nr},{rules:[{conditions:[{fn:NI,[it]:UI}],rules:[{conditions:[{fn:"aws.partition",[it]:UI,assign:Fl}],rules:[{conditions:[{fn:Sy,[it]:[_y,"aws"]},Dl,Ml],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:ot,headers:ot},type:kn},{conditions:[{fn:Sy,[it]:[_y,"aws-cn"]},Dl,Ml],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:ot,headers:ot},type:kn},{conditions:[{fn:Sy,[it]:[_y,"aws-us-gov"]},Dl,Ml],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:ot,headers:ot},type:kn},{conditions:[Ey,by],rules:[{conditions:[{fn:Ts,[it]:[!0,LI]},BI],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ot,headers:ot},type:kn}],type:nr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:qo}],type:nr},{conditions:[Ey,Ml],rules:[{conditions:[{fn:Ts,[it]:[LI,!0]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ot,headers:ot},type:kn}],type:nr},{error:"FIPS is enabled but this partition does not support FIPS",type:qo}],type:nr},{conditions:[Dl,by],rules:[{conditions:[BI],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ot,headers:ot},type:kn}],type:nr},{error:"DualStack is enabled but this partition does not support DualStack",type:qo}],type:nr},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:ot,headers:ot},type:kn}],type:nr}],type:nr},{error:"Invalid Configuration: Missing Region",type:qo}],type:nr}]},qI=c8});var HI,jo,u8,zI,VI=b(()=>{HI=w(hs()),jo=w(sn());jI();u8=new jo.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),zI=(t,e={})=>u8.get(t,()=>(0,jo.resolveEndpoint)(qI,{endpointParams:t,logger:e.logger}));jo.customEndpointFunctions.aws=HI.awsEndpointFunctions});var KI,GI,Ll,Bl,WI,QI=b(()=>{Ke();Ss();gt();KI=w(te()),GI=w(Mr()),Ll=w($e()),Bl=w(Ue());gy();VI();WI=t=>({apiVersion:"2023-01-01",base64Decoder:t?.base64Decoder??Ll.fromBase64,base64Encoder:t?.base64Encoder??Ll.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??zI,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??II,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new tt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Yt}],logger:t?.logger??new KI.NoOpLogger,protocol:t?.protocol??Sn,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.signin",version:"2023-01-01",serviceTarget:"Signin"},serviceId:t?.serviceId??"Signin",urlParser:t?.urlParser??GI.parseUrl,utf8Decoder:t?.utf8Decoder??Bl.fromUtf8,utf8Encoder:t?.utf8Encoder??Bl.toUtf8})});var Ul,Dn,YI,$l,Nn,ql,jl,JI,XI,ZI,e1,t1=b(()=>{Ku();Ke();Ul=w(Ro()),Dn=w(vt()),YI=w(Io()),$l=w(Xt()),Nn=w(pr()),ql=w(Or()),jl=w(te()),JI=w(Po()),XI=w(Oo()),ZI=w(_s());QI();e1=t=>{(0,jl.emitWarningIfUnsupportedVersion)(process.version);let e=(0,XI.resolveDefaultsModeConfig)(t),r=()=>e().then(jl.loadConfigsForDefaultMode),n=WI(t);on(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Nn.loadConfig)(cn,s),bodyLengthChecker:t?.bodyLengthChecker??JI.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Ul.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:To.version}),maxAttempts:t?.maxAttempts??(0,Nn.loadConfig)($l.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Nn.loadConfig)(Dn.NODE_REGION_CONFIG_OPTIONS,{...Dn.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:ql.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Nn.loadConfig)({...$l.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||ZI.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??YI.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??ql.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Nn.loadConfig)(Dn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Nn.loadConfig)(Dn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Nn.loadConfig)(Ul.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var r1,n1,s1=b(()=>{r1=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},n1=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var Hl,zl,Vl,o1,i1=b(()=>{Hl=w(xs()),zl=w(ye()),Vl=w(te());s1();o1=(t,e)=>{let r=Object.assign((0,Hl.getAwsRegionExtensionConfiguration)(t),(0,Vl.getDefaultExtensionConfiguration)(t),(0,zl.getHttpHandlerExtensionConfiguration)(t),r1(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,Hl.resolveAwsRegionExtensionConfiguration)(r),(0,Vl.resolveDefaultRuntimeConfig)(r),(0,zl.resolveHttpHandlerRuntimeConfig)(r),n1(r))}});var Kl,a1,c1,Gl,u1,l1,d1,Wl,wy,ha,xy=b(()=>{Kl=w(Gs()),a1=w(Ws()),c1=w(Qs()),Gl=w(Es()),u1=w(vt());gt();le();l1=w(xo()),d1=w(hr()),Wl=w(Xt()),wy=w(te());gy();yy();t1();i1();ha=class extends wy.Client{config;constructor(...[e]){let r=e1(e||{});super(r),this.initConfig=r;let n=OI(r),s=(0,Gl.resolveUserAgentConfig)(n),o=(0,Wl.resolveRetryConfig)(s),i=(0,u1.resolveRegionConfig)(o),a=(0,Kl.resolveHostHeaderConfig)(i),c=(0,d1.resolveEndpointConfig)(a),u=PI(c),d=o1(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(ss(this.config)),this.middlewareStack.use((0,Gl.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Wl.getRetryPlugin)(this.config)),this.middlewareStack.use((0,l1.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Kl.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,a1.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,c1.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(rs(this.config,{httpAuthSchemeParametersProvider:RI,identityProviderConfigProvider:async l=>new Dr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(ns(this.config))}destroy(){super.destroy()}}});var f1,sr,Ql=b(()=>{f1=w(te()),sr=class t extends f1.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var ma,ga,ya,Sa,Cy=b(()=>{Ql();ma=class t extends sr{name="AccessDeniedException";$fault="client";error;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},ga=class t extends sr{name="InternalServerException";$fault="server";error;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},ya=class t extends sr{name="TooManyRequestsError";$fault="client";error;constructor(e){super({name:"TooManyRequestsError",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},Sa=class t extends sr{name="ValidationException";$fault="client";error;constructor(e){super({name:"ValidationException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}}});var l8,d8,f8,p8,h8,m8,g8,y8,S8,E8,b8,p1,h1,Ay,m1,g1,_8,Mn,y1,S1,w8,vy,E1,Nt,Jl,Yl,b1,x8,_1,w1,C1,C8,A8,x1,St,A1,v1,T1,R1,I1,P1,O1,k1,N1,D1,M1,Ty,Ry=b(()=>{le();Cy();Ql();l8="AccessDeniedException",d8="AccessToken",f8="CreateOAuth2Token",p8="CreateOAuth2TokenRequest",h8="CreateOAuth2TokenRequestBody",m8="CreateOAuth2TokenResponseBody",g8="CreateOAuth2TokenResponse",y8="InternalServerException",S8="RefreshToken",E8="TooManyRequestsError",b8="ValidationException",p1="accessKeyId",h1="accessToken",Ay="client",m1="clientId",g1="codeVerifier",_8="code",Mn="error",y1="expiresIn",S1="grantType",w8="http",vy="httpError",E1="idToken",Nt="jsonName",Jl="message",Yl="refreshToken",b1="redirectUri",x8="server",_1="secretAccessKey",w1="sessionToken",C1="smithy.ts.sdk.synthetic.com.amazonaws.signin",C8="tokenInput",A8="tokenOutput",x1="tokenType",St="com.amazonaws.signin",A1=[0,St,S8,8,0],v1=[-3,St,l8,{[Mn]:Ay},[Mn,Jl],[0,0]];H.for(St).registerError(v1,ma);T1=[3,St,d8,8,[p1,_1,w1],[[0,{[Nt]:p1}],[0,{[Nt]:_1}],[0,{[Nt]:w1}]]],R1=[3,St,p8,0,[C8],[[()=>I1,16]]],I1=[3,St,h8,0,[m1,S1,_8,b1,g1,Yl],[[0,{[Nt]:m1}],[0,{[Nt]:S1}],0,[0,{[Nt]:b1}],[0,{[Nt]:g1}],[()=>A1,{[Nt]:Yl}]]],P1=[3,St,g8,0,[A8],[[()=>O1,16]]],O1=[3,St,m8,0,[h1,x1,y1,Yl,E1],[[()=>T1,{[Nt]:h1}],[0,{[Nt]:x1}],[1,{[Nt]:y1}],[()=>A1,{[Nt]:Yl}],[0,{[Nt]:E1}]]],k1=[-3,St,y8,{[Mn]:x8,[vy]:500},[Mn,Jl],[0,0]];H.for(St).registerError(k1,ga);N1=[-3,St,E8,{[Mn]:Ay,[vy]:429},[Mn,Jl],[0,0]];H.for(St).registerError(N1,ya);D1=[-3,St,b8,{[Mn]:Ay,[vy]:400},[Mn,Jl],[0,0]];H.for(St).registerError(D1,Sa);M1=[-3,C1,"SigninServiceException",0,[],[]];H.for(C1).registerError(M1,sr);Ty=[9,St,f8,{[w8]:["POST","/v1/token",200]},()=>R1,()=>P1]});var F1,Iy,Ea,Py=b(()=>{F1=w(hr()),Iy=w(te());yy();Ry();Ea=class extends Iy.Command.classBuilder().ep(kI).m(function(e,r,n,s){return[(0,F1.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(Ty).build(){}});var L1,v8,Xl,B1=b(()=>{L1=w(te());Py();xy();v8={CreateOAuth2TokenCommand:Ea},Xl=class extends ha{};(0,L1.createAggregatedClient)(v8,Xl)});var U1=b(()=>{Py()});var T8,$1=b(()=>{T8={AUTHCODE_EXPIRED:"AUTHCODE_EXPIRED",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",INVALID_REQUEST:"INVALID_REQUEST",SERVER_ERROR:"server_error",TOKEN_EXPIRED:"TOKEN_EXPIRED",USER_CREDENTIALS_CHANGED:"USER_CREDENTIALS_CHANGED"}});var q1=b(()=>{});var j1={};dt(j1,{$Command:()=>Iy.Command,AccessDeniedException:()=>ma,AccessDeniedException$:()=>v1,AccessToken$:()=>T1,CreateOAuth2Token$:()=>Ty,CreateOAuth2TokenCommand:()=>Ea,CreateOAuth2TokenRequest$:()=>R1,CreateOAuth2TokenRequestBody$:()=>I1,CreateOAuth2TokenResponse$:()=>P1,CreateOAuth2TokenResponseBody$:()=>O1,InternalServerException:()=>ga,InternalServerException$:()=>k1,OAuth2ErrorCode:()=>T8,Signin:()=>Xl,SigninClient:()=>ha,SigninServiceException:()=>sr,SigninServiceException$:()=>M1,TooManyRequestsError:()=>ya,TooManyRequestsError$:()=>N1,ValidationException:()=>Sa,ValidationException$:()=>D1,__Client:()=>wy.Client});var H1=b(()=>{xy();B1();U1();Ry();$1();Cy();q1();Ql()});var V1=x(z1=>{"use strict";var R8=(Ut(),re(Fr)),Fn=rt(),Ny=fr(),I8=ye(),Zl=require("node:crypto"),Oy=require("node:fs"),P8=require("node:os"),ky=require("node:path"),Dy=class t{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=300*1e3;constructor(e,r,n){this.profileData=e,this.init=r,this.callerClientConfig=n}async loadCredentials(){let e=await this.loadToken();if(!e)throw new Fn.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=e.accessToken,n=Date.now();return new Date(r.expiresAt).getTime()-n<=t.REFRESH_THRESHOLD?this.refresh(e):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(e){let{SigninClient:r,CreateOAuth2TokenCommand:n}=await Promise.resolve().then(()=>(H1(),j1)),{logger:s,userAgentAppId:o}=this.callerClientConfig??{},a=(l=>l?.metadata?.handlerProtocol==="h2")(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,c=this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,u=new r({credentials:{accessKeyId:"",secretAccessKey:""},region:c,requestHandler:a,logger:s,userAgentAppId:o,...this.init?.clientConfig});this.createDPoPInterceptor(u.middlewareStack);let d={tokenInput:{clientId:e.clientId,refreshToken:e.refreshToken,grantType:"refresh_token"}};try{let l=await u.send(new n(d)),{accessKeyId:m,secretAccessKey:h,sessionToken:g}=l.tokenOutput?.accessToken??{},{refreshToken:C,expiresIn:T}=l.tokenOutput??{};if(!m||!h||!g||!C)throw new Fn.CredentialsProviderError("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let R=(T??900)*1e3,O=new Date(Date.now()+R),D={...e,accessToken:{...e.accessToken,accessKeyId:m,secretAccessKey:h,sessionToken:g,expiresAt:O.toISOString()},refreshToken:C};await this.saveToken(D);let M=D.accessToken;return{accessKeyId:M.accessKeyId,secretAccessKey:M.secretAccessKey,sessionToken:M.sessionToken,accountId:M.accountId,expiration:O}}catch(l){if(l.name==="AccessDeniedException"){let m=l.error,h;switch(m){case"TOKEN_EXPIRED":h="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":h="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":h="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:h=`Failed to refresh token: ${String(l)}. Please re-authenticate using \`aws login\``}throw new Fn.CredentialsProviderError(h,{logger:this.logger,tryNextLink:!1})}throw new Fn.CredentialsProviderError(`Failed to refresh token: ${String(l)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let e=this.getTokenFilePath();try{let r;try{r=await Ny.readFile(e,{ignoreCache:this.init?.ignoreCache})}catch{r=await Oy.promises.readFile(e,"utf8")}let n=JSON.parse(r),s=["accessToken","clientId","refreshToken","dpopKey"].filter(o=>!n[o]);if(n.accessToken?.accountId||s.push("accountId"),s.length>0)throw new Fn.CredentialsProviderError(`Token validation failed, missing fields: ${s.join(", ")}`,{logger:this.logger,tryNextLink:!1});return n}catch(r){throw new Fn.CredentialsProviderError(`Failed to load token from ${e}: ${String(r)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(e){let r=this.getTokenFilePath(),n=ky.dirname(r);try{await Oy.promises.mkdir(n,{recursive:!0})}catch{}await Oy.promises.writeFile(r,JSON.stringify(e,null,2),"utf8")}getTokenFilePath(){let e=process.env.AWS_LOGIN_CACHE_DIRECTORY??ky.join(P8.homedir(),".aws","login","cache"),r=Buffer.from(this.loginSession,"utf8"),n=Zl.createHash("sha256").update(r).digest("hex");return ky.join(e,`${n}.json`)}derToRawSignature(e){let r=2;if(e[r]!==2)throw new Error("Invalid DER signature");r++;let n=e[r++],s=e.subarray(r,r+n);if(r+=n,e[r]!==2)throw new Error("Invalid DER signature");r++;let o=e[r++],i=e.subarray(r,r+o);s=s[0]===0?s.subarray(1):s,i=i[0]===0?i.subarray(1):i;let a=Buffer.concat([Buffer.alloc(32-s.length),s]),c=Buffer.concat([Buffer.alloc(32-i.length),i]);return Buffer.concat([a,c])}createDPoPInterceptor(e){e.add(r=>async n=>{if(I8.HttpRequest.isInstance(n.request)){let s=n.request,o=`${s.protocol}//${s.hostname}${s.port?`:${s.port}`:""}${s.path}`,i=await this.generateDpop(s.method,o);s.headers={...s.headers,DPoP:i}}return r(n)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(e="POST",r){let n=await this.loadToken();try{let s=Zl.createPrivateKey({key:n.dpopKey,format:"pem",type:"sec1"}),i=Zl.createPublicKey(s).export({format:"der",type:"spki"}),a=-1;for(let O=0;O<i.length;O++)if(i[O]===4){a=O;break}let c=i.slice(a+1,a+33),u=i.slice(a+33,a+65),d={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:c.toString("base64url"),y:u.toString("base64url")}},l={jti:crypto.randomUUID(),htm:e,htu:r,iat:Math.floor(Date.now()/1e3)},m=Buffer.from(JSON.stringify(d)).toString("base64url"),h=Buffer.from(JSON.stringify(l)).toString("base64url"),g=`${m}.${h}`,C=Zl.sign("sha256",Buffer.from(g),s),R=this.derToRawSignature(C).toString("base64url");return`${g}.${R}`}catch(s){throw new Fn.CredentialsProviderError(`Failed to generate Dpop proof: ${s instanceof Error?s.message:String(s)}`,{logger:this.logger,tryNextLink:!1})}}},O8=t=>async({callerClientConfig:e}={})=>{t?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let r=await Ny.parseKnownFiles(t||{}),n=Ny.getProfileName({profile:t?.profile??e?.profile}),s=r[n];if(!s?.login_session)throw new Fn.CredentialsProviderError(`Profile ${n} does not contain login_session.`,{tryNextLink:!0,logger:t?.logger});let i=await new Dy(s,t,e).loadCredentials();return R8.setCredentialFeature(i,"CREDENTIALS_LOGIN","AD")};z1.fromLoginCredentials=O8});function k8(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function N8(t){return{schemeId:"smithy.api#noAuth"}}var ba,K1,G1,D8,W1,My=b(()=>{Ke();ba=w(ft());_a();K1=async(t,e,r)=>({operation:(0,ba.getSmithyContext)(e).operation,region:await(0,ba.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});G1=t=>{let e=[];return t.operation==="AssumeRoleWithWebIdentity"?e.push(N8(t)):e.push(k8(t)),e},D8=t=>Object.assign(t,{stsClientCtor:Sr}),W1=t=>{let e=D8(t),r=Lr(e);return Object.assign(r,{authSchemePreference:(0,ba.normalizeProvider)(t.authSchemePreference??[])})}});var Q1,ed,td=b(()=>{Q1=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),ed={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var iP,W,ce,Ln,We,aP,cP,Re,Y1,Er,Ho,Ly,J1,Fy,uP,X1,Qe,Z1,lP,dP,at,Dt,eP,fP,pP,tP,hP,rP,nP,sP,oP,M8,mP,gP=b(()=>{iP="required",W="type",ce="argv",Ln="booleanEquals",We="stringEquals",aP="sigv4",cP="us-east-1",Re="endpoint",Y1="https://sts.{Region}.{PartitionResult#dnsSuffix}",Er="tree",Ho="error",Ly="getAttr",J1={[iP]:!1,[W]:"string"},Fy={[iP]:!0,default:!1,[W]:"boolean"},uP={ref:"Endpoint"},X1={fn:"isSet",[ce]:[{ref:"Region"}]},Qe={ref:"Region"},Z1={fn:"aws.partition",[ce]:[Qe],assign:"PartitionResult"},lP={ref:"UseFIPS"},dP={ref:"UseDualStack"},at={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:aP,signingName:"sts",signingRegion:cP}]},headers:{}},Dt={},eP={conditions:[{fn:We,[ce]:[Qe,"aws-global"]}],[Re]:at,[W]:Re},fP={fn:Ln,[ce]:[lP,!0]},pP={fn:Ln,[ce]:[dP,!0]},tP={fn:Ly,[ce]:[{ref:"PartitionResult"},"supportsFIPS"]},hP={ref:"PartitionResult"},rP={fn:Ln,[ce]:[!0,{fn:Ly,[ce]:[hP,"supportsDualStack"]}]},nP=[{fn:"isSet",[ce]:[uP]}],sP=[fP],oP=[pP],M8={version:"1.0",parameters:{Region:J1,UseDualStack:Fy,UseFIPS:Fy,Endpoint:J1,UseGlobalEndpoint:Fy},rules:[{conditions:[{fn:Ln,[ce]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[ce]:nP},X1,Z1,{fn:Ln,[ce]:[lP,!1]},{fn:Ln,[ce]:[dP,!1]}],rules:[{conditions:[{fn:We,[ce]:[Qe,"ap-northeast-1"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"ap-south-1"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"ap-southeast-1"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"ap-southeast-2"]}],endpoint:at,[W]:Re},eP,{conditions:[{fn:We,[ce]:[Qe,"ca-central-1"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"eu-central-1"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"eu-north-1"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"eu-west-1"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"eu-west-2"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"eu-west-3"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"sa-east-1"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,cP]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"us-east-2"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"us-west-1"]}],endpoint:at,[W]:Re},{conditions:[{fn:We,[ce]:[Qe,"us-west-2"]}],endpoint:at,[W]:Re},{endpoint:{url:Y1,properties:{authSchemes:[{name:aP,signingName:"sts",signingRegion:"{Region}"}]},headers:Dt},[W]:Re}],[W]:Er},{conditions:nP,rules:[{conditions:sP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[W]:Ho},{conditions:oP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[W]:Ho},{endpoint:{url:uP,properties:Dt,headers:Dt},[W]:Re}],[W]:Er},{conditions:[X1],rules:[{conditions:[Z1],rules:[{conditions:[fP,pP],rules:[{conditions:[{fn:Ln,[ce]:[!0,tP]},rP],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Dt,headers:Dt},[W]:Re}],[W]:Er},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[W]:Ho}],[W]:Er},{conditions:sP,rules:[{conditions:[{fn:Ln,[ce]:[tP,!0]}],rules:[{conditions:[{fn:We,[ce]:[{fn:Ly,[ce]:[hP,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Dt,headers:Dt},[W]:Re},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Dt,headers:Dt},[W]:Re}],[W]:Er},{error:"FIPS is enabled but this partition does not support FIPS",[W]:Ho}],[W]:Er},{conditions:oP,rules:[{conditions:[rP],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Dt,headers:Dt},[W]:Re}],[W]:Er},{error:"DualStack is enabled but this partition does not support DualStack",[W]:Ho}],[W]:Er},eP,{endpoint:{url:Y1,properties:Dt,headers:Dt},[W]:Re}],[W]:Er}],[W]:Er},{error:"Invalid Configuration: Missing Region",[W]:Ho}]},mP=M8});var yP,zo,F8,SP,EP=b(()=>{yP=w(hs()),zo=w(sn());gP();F8=new zo.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),SP=(t,e={})=>F8.get(t,()=>(0,zo.resolveEndpoint)(mP,{endpointParams:t,logger:e.logger}));zo.customEndpointFunctions.aws=yP.awsEndpointFunctions});var bP,_P,rd,nd,wP,xP=b(()=>{Ke();Ss();gt();bP=w(te()),_P=w(Mr()),rd=w($e()),nd=w(Ue());My();EP();wP=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??rd.fromBase64,base64Encoder:t?.base64Encoder??rd.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??SP,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??G1,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new tt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Yt}],logger:t?.logger??new bP.NoOpLogger,protocol:t?.protocol??bn,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??_P.parseUrl,utf8Decoder:t?.utf8Decoder??nd.fromUtf8,utf8Encoder:t?.utf8Encoder??nd.toUtf8})});var sd,Un,CP,od,Bn,id,ad,AP,vP,TP,RP,IP=b(()=>{Ku();Ke();sd=w(Ro()),Un=w(vt());gt();CP=w(Io()),od=w(Xt()),Bn=w(pr()),id=w(Or()),ad=w(te()),AP=w(Po()),vP=w(Oo()),TP=w(_s());xP();RP=t=>{(0,ad.emitWarningIfUnsupportedVersion)(process.version);let e=(0,vP.resolveDefaultsModeConfig)(t),r=()=>e().then(ad.loadConfigsForDefaultMode),n=wP(t);on(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Bn.loadConfig)(cn,s),bodyLengthChecker:t?.bodyLengthChecker??AP.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,sd.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:To.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await t.credentialDefaultProvider(i?.__config||{})()),signer:new tt},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Yt}],maxAttempts:t?.maxAttempts??(0,Bn.loadConfig)(od.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Bn.loadConfig)(Un.NODE_REGION_CONFIG_OPTIONS,{...Un.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:id.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Bn.loadConfig)({...od.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||TP.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??CP.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??id.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Bn.loadConfig)(Un.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Bn.loadConfig)(Un.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Bn.loadConfig)(sd.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var PP,OP,kP=b(()=>{PP=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},OP=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var cd,ud,ld,NP,DP=b(()=>{cd=w(xs()),ud=w(ye()),ld=w(te());kP();NP=(t,e)=>{let r=Object.assign((0,cd.getAwsRegionExtensionConfiguration)(t),(0,ld.getDefaultExtensionConfiguration)(t),(0,ud.getHttpHandlerExtensionConfiguration)(t),PP(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,cd.resolveAwsRegionExtensionConfiguration)(r),(0,ld.resolveDefaultRuntimeConfig)(r),(0,ud.resolveHttpHandlerRuntimeConfig)(r),OP(r))}});var dd,MP,FP,fd,LP,BP,UP,pd,By,Sr,_a=b(()=>{dd=w(Gs()),MP=w(Ws()),FP=w(Qs()),fd=w(Es()),LP=w(vt());gt();le();BP=w(xo()),UP=w(hr()),pd=w(Xt()),By=w(te());My();td();IP();DP();Sr=class extends By.Client{config;constructor(...[e]){let r=RP(e||{});super(r),this.initConfig=r;let n=Q1(r),s=(0,fd.resolveUserAgentConfig)(n),o=(0,pd.resolveRetryConfig)(s),i=(0,LP.resolveRegionConfig)(o),a=(0,dd.resolveHostHeaderConfig)(i),c=(0,UP.resolveEndpointConfig)(a),u=W1(c),d=NP(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(ss(this.config)),this.middlewareStack.use((0,fd.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,pd.getRetryPlugin)(this.config)),this.middlewareStack.use((0,BP.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,dd.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,MP.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,FP.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(rs(this.config,{httpAuthSchemeParametersProvider:K1,identityProviderConfigProvider:async l=>new Dr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(ns(this.config))}destroy(){super.destroy()}}});var $P,Tt,hd=b(()=>{$P=w(te()),Tt=class t extends $P.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var wa,xa,Ca,Aa,va,Ta,Ra,Uy=b(()=>{hd();wa=class t extends Tt{name="ExpiredTokenException";$fault="client";constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},xa=class t extends Tt{name="MalformedPolicyDocumentException";$fault="client";constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Ca=class t extends Tt{name="PackedPolicyTooLargeException";$fault="client";constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Aa=class t extends Tt{name="RegionDisabledException";$fault="client";constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},va=class t extends Tt{name="IDPRejectedClaimException";$fault="client";constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Ta=class t extends Tt{name="InvalidIdentityTokenException";$fault="client";constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Ra=class t extends Tt{name="IDPCommunicationErrorException";$fault="client";constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}}});var L8,B8,U8,$8,q8,j8,$y,H8,z8,V8,K8,qy,G8,qP,W8,Q8,Y8,J8,X8,Z8,eV,tV,jP,HP,rV,nV,sV,oV,iV,aV,zP,cV,uV,VP,lV,KP,dV,fV,jy,pV,hV,mV,gV,yV,SV,EV,bV,_V,wV,Rs,Is,xV,Ps,Os,ks,CV,GP,AV,fe,vV,TV,Hy,WP,QP,YP,JP,zy,XP,ZP,eO,tO,rO,nO,sO,oO,iO,aO,cO,uO,RV,IV,Vy,Ky,md=b(()=>{le();Uy();hd();L8="Arn",B8="AccessKeyId",U8="AssumeRole",$8="AssumedRoleId",q8="AssumeRoleRequest",j8="AssumeRoleResponse",$y="AssumedRoleUser",H8="AssumeRoleWithWebIdentity",z8="AssumeRoleWithWebIdentityRequest",V8="AssumeRoleWithWebIdentityResponse",K8="Audience",qy="Credentials",G8="ContextAssertion",qP="DurationSeconds",W8="Expiration",Q8="ExternalId",Y8="ExpiredTokenException",J8="IDPCommunicationErrorException",X8="IDPRejectedClaimException",Z8="InvalidIdentityTokenException",eV="Key",tV="MalformedPolicyDocumentException",jP="Policy",HP="PolicyArns",rV="ProviderArn",nV="ProvidedContexts",sV="ProvidedContextsListType",oV="ProvidedContext",iV="PolicyDescriptorType",aV="ProviderId",zP="PackedPolicySize",cV="PackedPolicyTooLargeException",uV="Provider",VP="RoleArn",lV="RegionDisabledException",KP="RoleSessionName",dV="SecretAccessKey",fV="SubjectFromWebIdentityToken",jy="SourceIdentity",pV="SerialNumber",hV="SessionToken",mV="Tags",gV="TokenCode",yV="TransitiveTagKeys",SV="Tag",EV="Value",bV="WebIdentityToken",_V="arn",wV="accessKeySecretType",Rs="awsQueryError",Is="client",xV="clientTokenType",Ps="error",Os="httpError",ks="message",CV="policyDescriptorListType",GP="smithy.ts.sdk.synthetic.com.amazonaws.sts",AV="tagListType",fe="com.amazonaws.sts",vV=[0,fe,wV,8,0],TV=[0,fe,xV,8,0],Hy=[3,fe,$y,0,[$8,L8],[0,0]],WP=[3,fe,q8,0,[VP,KP,HP,jP,qP,mV,yV,Q8,pV,gV,jy,nV],[0,0,()=>uO,0,1,()=>IV,64,0,0,0,0,()=>RV]],QP=[3,fe,j8,0,[qy,$y,zP,jy],[[()=>zy,0],()=>Hy,1,0]],YP=[3,fe,z8,0,[VP,KP,bV,aV,HP,jP,qP],[0,0,[()=>TV,0],0,()=>uO,0,1]],JP=[3,fe,V8,0,[qy,fV,$y,zP,uV,K8,jy],[[()=>zy,0],0,()=>Hy,1,0,0,0]],zy=[3,fe,qy,0,[B8,dV,hV,W8],[0,[()=>vV,0],0,4]],XP=[-3,fe,Y8,{[Ps]:Is,[Os]:400,[Rs]:["ExpiredTokenException",400]},[ks],[0]];H.for(fe).registerError(XP,wa);ZP=[-3,fe,J8,{[Ps]:Is,[Os]:400,[Rs]:["IDPCommunicationError",400]},[ks],[0]];H.for(fe).registerError(ZP,Ra);eO=[-3,fe,X8,{[Ps]:Is,[Os]:403,[Rs]:["IDPRejectedClaim",403]},[ks],[0]];H.for(fe).registerError(eO,va);tO=[-3,fe,Z8,{[Ps]:Is,[Os]:400,[Rs]:["InvalidIdentityToken",400]},[ks],[0]];H.for(fe).registerError(tO,Ta);rO=[-3,fe,tV,{[Ps]:Is,[Os]:400,[Rs]:["MalformedPolicyDocument",400]},[ks],[0]];H.for(fe).registerError(rO,xa);nO=[-3,fe,cV,{[Ps]:Is,[Os]:400,[Rs]:["PackedPolicyTooLarge",400]},[ks],[0]];H.for(fe).registerError(nO,Ca);sO=[3,fe,iV,0,[_V],[0]],oO=[3,fe,oV,0,[rV,G8],[0,0]],iO=[-3,fe,lV,{[Ps]:Is,[Os]:403,[Rs]:["RegionDisabledException",403]},[ks],[0]];H.for(fe).registerError(iO,Aa);aO=[3,fe,SV,0,[eV,EV],[0,0]],cO=[-3,GP,"STSServiceException",0,[],[]];H.for(GP).registerError(cO,Tt);uO=[1,fe,CV,0,()=>sO],RV=[1,fe,sV,0,()=>oO],IV=[1,fe,AV,0,()=>aO],Vy=[9,fe,U8,0,()=>WP,()=>QP],Ky=[9,fe,H8,0,()=>YP,()=>JP]});var lO,dO,Ns,gd=b(()=>{lO=w(hr()),dO=w(te());td();md();Ns=class extends dO.Command.classBuilder().ep(ed).m(function(e,r,n,s){return[(0,lO.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(Vy).build(){}});var fO,pO,Ds,yd=b(()=>{fO=w(hr()),pO=w(te());td();md();Ds=class extends pO.Command.classBuilder().ep(ed).m(function(e,r,n,s){return[(0,fO.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(Ky).build(){}});var hO,PV,Sd,mO=b(()=>{hO=w(te());gd();yd();_a();PV={AssumeRoleCommand:Ns,AssumeRoleWithWebIdentityCommand:Ds},Sd=class extends Sr{};(0,hO.createAggregatedClient)(PV,Sd)});var gO=b(()=>{gd();yd()});var yO=b(()=>{});var SO,EO,bO,_O,wO,xO,CO=b(()=>{Ut();SO=w(xs());gd();yd();EO=t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},bO=async(t,e,r,n={})=>{let s=typeof t=="function"?await t():t,o=typeof e=="function"?await e():e,i="",a=s??o??(i=await(0,SO.stsRegionDefaultResolver)(n)());return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),a},_O=(t,e)=>{let r,n;return async(s,o)=>{if(n=s,!r){let{logger:d=t?.parentClientConfig?.logger,profile:l=t?.parentClientConfig?.profile,region:m,requestHandler:h=t?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:C=t?.parentClientConfig?.userAgentAppId}=t,T=await bO(m,t?.parentClientConfig?.region,g,{logger:d,profile:l}),R=!xO(h);r=new e({...t,userAgentAppId:C,profile:l,credentialDefaultProvider:()=>async()=>n,region:T,requestHandler:R?h:void 0,logger:d})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new Ns(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let c=EO(a),u={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return an(u,"CREDENTIALS_STS_ASSUME_ROLE","i"),u}},wO=(t,e)=>{let r;return async n=>{if(!r){let{logger:c=t?.parentClientConfig?.logger,profile:u=t?.parentClientConfig?.profile,region:d,requestHandler:l=t?.parentClientConfig?.requestHandler,credentialProviderLogger:m,userAgentAppId:h=t?.parentClientConfig?.userAgentAppId}=t,g=await bO(d,t?.parentClientConfig?.region,m,{logger:c,profile:u}),C=!xO(l);r=new e({...t,userAgentAppId:h,profile:u,region:g,requestHandler:C?l:void 0,logger:c})}let{Credentials:s,AssumedRoleUser:o}=await r.send(new Ds(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=EO(o),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...i&&{accountId:i}};return i&&an(a,"RESOLVED_ACCOUNT_ID","T"),an(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},xO=t=>t?.metadata?.handlerProtocol==="h2"});var AO,vO,TO,OV,RO=b(()=>{CO();_a();AO=(t,e)=>e?class extends t{constructor(n){super(n);for(let s of e)this.middlewareStack.use(s)}}:t,vO=(t={},e)=>_O(t,AO(Sr,e)),TO=(t={},e)=>wO(t,AO(Sr,e)),OV=t=>e=>t({roleAssumer:vO(e),roleAssumerWithWebIdentity:TO(e),...e})});var Gy={};dt(Gy,{AssumeRole$:()=>Vy,AssumeRoleCommand:()=>Ns,AssumeRoleRequest$:()=>WP,AssumeRoleResponse$:()=>QP,AssumeRoleWithWebIdentity$:()=>Ky,AssumeRoleWithWebIdentityCommand:()=>Ds,AssumeRoleWithWebIdentityRequest$:()=>YP,AssumeRoleWithWebIdentityResponse$:()=>JP,AssumedRoleUser$:()=>Hy,Credentials$:()=>zy,ExpiredTokenException:()=>wa,ExpiredTokenException$:()=>XP,IDPCommunicationErrorException:()=>Ra,IDPCommunicationErrorException$:()=>ZP,IDPRejectedClaimException:()=>va,IDPRejectedClaimException$:()=>eO,InvalidIdentityTokenException:()=>Ta,InvalidIdentityTokenException$:()=>tO,MalformedPolicyDocumentException:()=>xa,MalformedPolicyDocumentException$:()=>rO,PackedPolicyTooLargeException:()=>Ca,PackedPolicyTooLargeException$:()=>nO,PolicyDescriptorType$:()=>sO,ProvidedContext$:()=>oO,RegionDisabledException:()=>Aa,RegionDisabledException$:()=>iO,STS:()=>Sd,STSClient:()=>Sr,STSServiceException:()=>Tt,STSServiceException$:()=>cO,Tag$:()=>aO,__Client:()=>By.Client,decorateDefaultCredentialProvider:()=>OV,getDefaultRoleAssumer:()=>vO,getDefaultRoleAssumerWithWebIdentity:()=>TO});var Wy=b(()=>{_a();mO();gO();md();Uy();yO();RO();hd()});var Jy=x(IO=>{"use strict";var Yy=fr(),Qy=rt(),kV=require("child_process"),NV=require("util"),DV=(Ut(),re(Fr)),MV=(t,e,r)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let o=new Date;if(new Date(e.Expiration)<o)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let n=e.AccountId;!n&&r?.[t]?.aws_account_id&&(n=r[t].aws_account_id);let s={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...n&&{accountId:n}};return DV.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},FV=async(t,e,r)=>{let n=e[t];if(e[t]){let s=n.credential_process;if(s!==void 0){let o=NV.promisify(Yy.externalDataInterceptor?.getTokenRecord?.().exec??kV.exec);try{let{stdout:i}=await o(s),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return MV(t,a,e)}catch(i){throw new Qy.CredentialsProviderError(i.message,{logger:r})}}else throw new Qy.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new Qy.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},LV=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await Yy.parseKnownFiles(t);return FV(Yy.getProfileName({profile:t.profile??e?.profile}),r,t.logger)};IO.fromProcess=LV});var Xy=x(br=>{"use strict";var BV=br&&br.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),UV=br&&br.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),$V=br&&br.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),s=0;s<n.length;s++)n[s]!=="default"&&BV(r,e,n[s]);return UV(r,e),r}})();Object.defineProperty(br,"__esModule",{value:!0});br.fromWebToken=void 0;var qV=t=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:o,policyArns:i,policy:a,durationSeconds:c}=t,{roleAssumerWithWebIdentity:u}=t;if(!u){let{getDefaultRoleAssumerWithWebIdentity:d}=await Promise.resolve().then(()=>$V((Wy(),re(Gy))));u=d({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:{...e?.callerClientConfig,...t.parentClientConfig}},t.clientPlugins)}return u({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:c})};br.fromWebToken=qV});var OO=x(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.fromTokenFile=void 0;var jV=(Ut(),re(Fr)),HV=rt(),zV=fr(),VV=require("fs"),KV=Xy(),PO="AWS_WEB_IDENTITY_TOKEN_FILE",GV="AWS_ROLE_ARN",WV="AWS_ROLE_SESSION_NAME",QV=(t={})=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=t?.webIdentityTokenFile??process.env[PO],n=t?.roleArn??process.env[GV],s=t?.roleSessionName??process.env[WV];if(!r||!n)throw new HV.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let o=await(0,KV.fromWebToken)({...t,webIdentityToken:zV.externalDataInterceptor?.getTokenRecord?.()[r]??(0,VV.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(e);return r===process.env[PO]&&(0,jV.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};Ed.fromTokenFile=QV});var Zy=x(Ia=>{"use strict";var kO=OO(),NO=Xy();Object.keys(kO).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ia,t)&&Object.defineProperty(Ia,t,{enumerable:!0,get:function(){return kO[t]}})});Object.keys(NO).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ia,t)&&Object.defineProperty(Ia,t,{enumerable:!0,get:function(){return NO[t]}})})});var UO=x(BO=>{"use strict";var tS=fr(),Pa=rt(),Kr=(Ut(),re(Fr)),YV=V1(),JV=(t,e,r)=>{let n={EcsContainer:async s=>{let{fromHttp:o}=await Promise.resolve().then(()=>w(zg())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>w(ji()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Pa.chain(o(s??{}),i(s))().then(eS)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>w(ji()));return async()=>o(s)().then(eS)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>w(Fg()));return async()=>o(s)().then(eS)}};if(t in n)return n[t];throw new Pa.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},eS=t=>Kr.setCredentialFeature(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),XV=(t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(ZV(t,{profile:e,logger:r})||e5(t,{profile:e,logger:r})),ZV=(t,{profile:e,logger:r})=>{let n=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return n&&r?.debug?.(`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`),n},e5=(t,{profile:e,logger:r})=>{let n=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return n&&r?.debug?.(`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`),n},t5=async(t,e,r,n,s={},o)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=e[t],{source_profile:a,region:c}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(Wy(),Gy));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...n,...r?.parentClientConfig,region:c??r?.parentClientConfig?.region??n?.region}},r.clientPlugins)}if(a&&a in s)throw new Pa.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${tS.getProfileName(r)}. Profiles visited: `+Object.keys(s).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${a?`source_profile=[${a}]`:`profile=[${t}]`}`);let u=a?o(a,e,r,n,{...s,[a]:!0},DO(e[a]??{})):(await JV(i.credential_source,t,r.logger)(r))();if(DO(i))return u.then(d=>Kr.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:l}=i;if(l){if(!r.mfaCodeProvider)throw new Pa.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=l,d.TokenCode=await r.mfaCodeProvider(l)}let m=await u;return r.roleAssumer(m,d).then(h=>Kr.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},DO=t=>!t.role_arn&&!!t.credential_source,r5=t=>!!(t&&t.login_session),n5=async(t,e,r)=>{let n=await YV.fromLoginCredentials({...e,profile:t})({callerClientConfig:r});return Kr.setCredentialFeature(n,"CREDENTIALS_PROFILE_LOGIN","AC")},s5=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",o5=async(t,e)=>Promise.resolve().then(()=>w(Jy())).then(({fromProcess:r})=>r({...t,profile:e})().then(n=>Kr.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),i5=async(t,e,r={},n)=>{let{fromSSO:s}=await Promise.resolve().then(()=>w(my()));return s({profile:t,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})({callerClientConfig:n}).then(o=>e.sso_session?Kr.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO","r"):Kr.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},a5=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),MO=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,FO=async(t,e)=>{e?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return Kr.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},c5=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,u5=async(t,e,r)=>Promise.resolve().then(()=>w(Zy())).then(({fromTokenFile:n})=>n({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})({callerClientConfig:r}).then(s=>Kr.setCredentialFeature(s,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),LO=async(t,e,r,n,s={},o=!1)=>{let i=e[t];if(Object.keys(s).length>0&&MO(i))return FO(i,r);if(o||XV(i,{profile:t,logger:r.logger}))return t5(t,e,r,n,s,LO);if(MO(i))return FO(i,r);if(c5(i))return u5(i,r,n);if(s5(i))return o5(r,t);if(a5(i))return await i5(t,i,r,n);if(r5(i))return n5(t,r,n);throw new Pa.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},l5=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let r=await tS.parseKnownFiles(t);return LO(tS.getProfileName({profile:t.profile??e?.profile}),r,t,e)};BO.fromIni=l5});var HO=x(bd=>{"use strict";var rS=Fg(),Oa=rt(),d5=fr(),$O="AWS_EC2_METADATA_DISABLED",f5=async t=>{let{ENV_CMDS_FULL_URI:e,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>w(ji()));if(process.env[r]||process.env[e]){t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>w(zg()));return Oa.chain(o(t),n(t))}return process.env[$O]&&process.env[$O]!=="false"?async()=>{throw new Oa.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:(t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(t))};function p5(t,e){let r=h5(t),n,s,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),n)await n;else if(!o||e?.(o))if(o)s||(s=r(a).then(c=>{o=c,s=void 0}));else return n=r(a).then(c=>{o=c,n=void 0}),i(a);return o};return i}var h5=t=>async e=>{let r;for(let n of t)try{return await n(e)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},qO=!1,m5=(t={})=>p5([async()=>{if(t.profile??process.env[d5.ENV_PROFILE])throw process.env[rS.ENV_KEY]&&process.env[rS.ENV_SECRET]&&(qO||((t.logger?.warn&&t.logger?.constructor?.name!=="NoOpLogger"?t.logger.warn.bind(t.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),qO=!0)),new Oa.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),rS.fromEnv(t)()},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=t;if(!r&&!n&&!s&&!o&&!i)throw new Oa.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>w(my()));return a(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>w(UO()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>w(Jy()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>w(Zy()));return r(t)(e)},async()=>(t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await f5(t))()),async()=>{throw new Oa.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}],jO),g5=t=>t?.expiration!==void 0,jO=t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5;bd.credentialsTreatedAsExpired=jO;bd.credentialsWillNeedRefresh=g5;bd.defaultProvider=m5});var KO=x((Kue,VO)=>{var _d=Object.defineProperty,y5=Object.getOwnPropertyDescriptor,S5=Object.getOwnPropertyNames,E5=Object.prototype.hasOwnProperty,b5=(t,e)=>_d(t,"name",{value:e,configurable:!0}),_5=(t,e)=>{for(var r in e)_d(t,r,{get:e[r],enumerable:!0})},w5=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of S5(e))!E5.call(t,s)&&s!==r&&_d(t,s,{get:()=>e[s],enumerable:!(n=y5(e,s))||n.enumerable});return t},x5=t=>w5(_d({},"__esModule",{value:!0}),t),zO={};_5(zO,{isArrayBuffer:()=>C5});VO.exports=x5(zO);var C5=b5(t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]","isArrayBuffer")});var YO=x((Gue,QO)=>{var wd=Object.defineProperty,A5=Object.getOwnPropertyDescriptor,v5=Object.getOwnPropertyNames,T5=Object.prototype.hasOwnProperty,GO=(t,e)=>wd(t,"name",{value:e,configurable:!0}),R5=(t,e)=>{for(var r in e)wd(t,r,{get:e[r],enumerable:!0})},I5=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of v5(e))!T5.call(t,s)&&s!==r&&wd(t,s,{get:()=>e[s],enumerable:!(n=A5(e,s))||n.enumerable});return t},P5=t=>I5(wd({},"__esModule",{value:!0}),t),WO={};R5(WO,{fromArrayBuffer:()=>k5,fromString:()=>N5});QO.exports=P5(WO);var O5=KO(),nS=require("buffer"),k5=GO((t,e=0,r=t.byteLength-e)=>{if(!(0,O5.isArrayBuffer)(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return nS.Buffer.from(t,e,r)},"fromArrayBuffer"),N5=GO((t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?nS.Buffer.from(t,e):nS.Buffer.from(t)},"fromString")});var tk=x((Wue,ek)=>{var xd=Object.defineProperty,D5=Object.getOwnPropertyDescriptor,M5=Object.getOwnPropertyNames,F5=Object.prototype.hasOwnProperty,sS=(t,e)=>xd(t,"name",{value:e,configurable:!0}),L5=(t,e)=>{for(var r in e)xd(t,r,{get:e[r],enumerable:!0})},B5=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of M5(e))!F5.call(t,s)&&s!==r&&xd(t,s,{get:()=>e[s],enumerable:!(n=D5(e,s))||n.enumerable});return t},U5=t=>B5(xd({},"__esModule",{value:!0}),t),JO={};L5(JO,{fromUtf8:()=>ZO,toUint8Array:()=>$5,toUtf8:()=>q5});ek.exports=U5(JO);var XO=YO(),ZO=sS(t=>{let e=(0,XO.fromString)(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),$5=sS(t=>typeof t=="string"?ZO(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),"toUint8Array"),q5=sS(t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,XO.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("utf8")},"toUtf8")});var rk=x(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.convertToBuffer=void 0;var j5=tk(),H5=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:j5.fromUtf8;function z5(t){return t instanceof Uint8Array?t:typeof t=="string"?H5(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}Cd.convertToBuffer=z5});var nk=x(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.isEmptyData=void 0;function V5(t){return typeof t=="string"?t.length===0:t.byteLength===0}Ad.isEmptyData=V5});var sk=x(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.numToUint8=void 0;function K5(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}vd.numToUint8=K5});var ok=x(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});Td.uint32ArrayFrom=void 0;function G5(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),r=0;r<t.length;)e[r]=t[r],r+=1;return e}return Uint32Array.from(t)}Td.uint32ArrayFrom=G5});var oS=x(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.uint32ArrayFrom=_r.numToUint8=_r.isEmptyData=_r.convertToBuffer=void 0;var W5=rk();Object.defineProperty(_r,"convertToBuffer",{enumerable:!0,get:function(){return W5.convertToBuffer}});var Q5=nk();Object.defineProperty(_r,"isEmptyData",{enumerable:!0,get:function(){return Q5.isEmptyData}});var Y5=sk();Object.defineProperty(_r,"numToUint8",{enumerable:!0,get:function(){return Y5.numToUint8}});var J5=ok();Object.defineProperty(_r,"uint32ArrayFrom",{enumerable:!0,get:function(){return J5.uint32ArrayFrom}})});var ck=x(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.AwsCrc32=void 0;var ik=(as(),re(is)),iS=oS(),ak=aS(),X5=(function(){function t(){this.crc32=new ak.Crc32}return t.prototype.update=function(e){(0,iS.isEmptyData)(e)||this.crc32.update((0,iS.convertToBuffer)(e))},t.prototype.digest=function(){return ik.__awaiter(this,void 0,void 0,function(){return ik.__generator(this,function(e){return[2,(0,iS.numToUint8)(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new ak.Crc32},t})();Rd.AwsCrc32=X5});var aS=x($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.AwsCrc32=$n.Crc32=$n.crc32=void 0;var Z5=(as(),re(is)),eK=oS();function tK(t){return new uk().update(t).digest()}$n.crc32=tK;var uk=(function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,n;try{for(var s=Z5.__values(e),o=s.next();!o.done;o=s.next()){var i=o.value;this.checksum=this.checksum>>>8^nK[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t})();$n.Crc32=uk;var rK=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],nK=(0,eK.uint32ArrayFrom)(rK),sK=ck();Object.defineProperty($n,"AwsCrc32",{enumerable:!0,get:function(){return sK.AwsCrc32}})});var hk=x(jn=>{"use strict";var fk=aS(),Ms=yc(),Vo=class t{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&lk(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&lk(e),parseInt(Ms.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function lk(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var Id=class{toUtf8;fromUtf8;constructor(e,r){this.toUtf8=e,this.fromUtf8=r}format(e){let r=[];for(let o of Object.keys(e)){let i=this.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[o]))}let n=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),s=0;for(let o of r)n.set(o,s),s+=o.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(e.value,3),i;case"string":let a=this.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set(Vo.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!pK.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let l=new Uint8Array(17);return l[0]=9,l.set(Ms.fromHex(e.value.replace(/\-/g,"")),1),l}}parse(e){let r={},n=0;for(;n<e.byteLength;){let s=e.getUint8(n++),o=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s));switch(n+=s,e.getUint8(n++)){case 0:r[o]={type:dk,value:!0};break;case 1:r[o]={type:dk,value:!1};break;case 2:r[o]={type:oK,value:e.getInt8(n++)};break;case 3:r[o]={type:iK,value:e.getInt16(n,!1)},n+=2;break;case 4:r[o]={type:aK,value:e.getInt32(n,!1)},n+=4;break;case 5:r[o]={type:cK,value:new Vo(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:let i=e.getUint16(n,!1);n+=2,r[o]={type:uK,value:new Uint8Array(e.buffer,e.byteOffset+n,i)},n+=i;break;case 7:let a=e.getUint16(n,!1);n+=2,r[o]={type:lK,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,a))},n+=a;break;case 8:r[o]={type:dK,value:new Date(new Vo(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,r[o]={type:fK,value:`${Ms.toHex(c.subarray(0,4))}-${Ms.toHex(c.subarray(4,6))}-${Ms.toHex(c.subarray(6,8))}-${Ms.toHex(c.subarray(8,10))}-${Ms.toHex(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},dk="boolean",oK="byte",iK="short",aK="integer",cK="long",uK="binary",lK="string",dK="timestamp",fK="uuid",pK=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,pk=4,qn=pk*2,Fs=4,hK=qn+Fs*2;function mK({byteLength:t,byteOffset:e,buffer:r}){if(t<hK)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,e,t),s=n.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");let o=n.getUint32(pk,!1),i=n.getUint32(qn,!1),a=n.getUint32(t-Fs,!1),c=new fk.Crc32().update(new Uint8Array(r,e,qn));if(i!==c.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,e+qn,t-(qn+Fs))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,e+qn+Fs,o),body:new Uint8Array(r,e+qn+Fs+o,s-o-(qn+Fs+Fs))}}var cS=class{headerMarshaller;messageBuffer;isEndOfStream;constructor(e,r){this.headerMarshaller=new Id(e,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){let e=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return r}}}getAvailableMessages(){let e=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return r}}}encode({headers:e,body:r}){let n=this.headerMarshaller.format(e),s=n.byteLength+r.byteLength+16,o=new Uint8Array(s),i=new DataView(o.buffer,o.byteOffset,o.byteLength),a=new fk.Crc32;return i.setUint32(0,s,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(o.subarray(0,8)).digest(),!1),o.set(n,12),o.set(r,n.byteLength+12),i.setUint32(s-4,a.update(o.subarray(8,s-4)).digest(),!1),o}decode(e){let{headers:r,body:n}=mK(e);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(e){return this.headerMarshaller.format(e)}},uS=class{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.inputStream)yield this.options.decoder.decode(e)}},lS=class{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}},dS=class{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.messageStream){let r=await this.options.deserializer(e);r!==void 0&&(yield r)}}},fS=class{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let e of this.options.inputStream)yield this.options.serializer(e)}};jn.EventStreamCodec=cS;jn.HeaderMarshaller=Id;jn.Int64=Vo;jn.MessageDecoderStream=uS;jn.MessageEncoderStream=lS;jn.SmithyMessageDecoderStream=dS;jn.SmithyMessageEncoderStream=fS});var mk=x(pS=>{"use strict";var ka=hk();function gK(t){let e=0,r=0,n=null,s=null,o=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=t[Symbol.asyncIterator]();for(;;){let{value:c,done:u}=await a.next();if(u){if(e)if(e===r)yield n;else throw new Error("Truncated event message received.");else return;return}let d=c.length,l=0;for(;l<d;){if(!n){let h=d-l;s||(s=new Uint8Array(4));let g=Math.min(4-r,h);if(s.set(c.slice(l,l+g),r),r+=g,l+=g,r<4)break;o(new DataView(s.buffer).getUint32(0,!1)),s=null}let m=Math.min(e-r,d-l);n.set(c.slice(l,l+m),r),r+=m,l+=m,e&&e===r&&(yield n,n=null,e=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function yK(t,e){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){let s=r.headers[":exception-type"].value,o={[s]:r},i=await t(o);if(i.$unknown){let a=new Error(e(r.body));throw a.name=s,a}throw i[s]}else if(n==="event"){let s={[r.headers[":event-type"].value]:r},o=await t(s);return o.$unknown?void 0:o}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var Pd=class{eventStreamCodec;utfEncoder;constructor({utf8Encoder:e,utf8Decoder:r}){this.eventStreamCodec=new ka.EventStreamCodec(e,r),this.utfEncoder=e}deserialize(e,r){let n=gK(e);return new ka.SmithyMessageDecoderStream({messageStream:new ka.MessageDecoderStream({inputStream:n,decoder:this.eventStreamCodec}),deserializer:yK(r,this.utfEncoder)})}serialize(e,r){return new ka.MessageEncoderStream({messageStream:new ka.SmithyMessageEncoderStream({inputStream:e,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}},SK=t=>new Pd(t);pS.EventStreamMarshaller=Pd;pS.eventStreamSerdeProvider=SK});var gk=x(hS=>{"use strict";var EK=mk(),bK=require("stream");async function*_K(t){let e=!1,r=!1,n=new Array;for(t.on("error",s=>{if(e||(e=!0),s)throw s}),t.on("data",s=>{n.push(s)}),t.on("end",()=>{e=!0});!r;){let s=await new Promise(o=>setTimeout(()=>o(n.shift()),0));s&&(yield s),r=e&&n.length===0}}var Od=class{universalMarshaller;constructor({utf8Encoder:e,utf8Decoder:r}){this.universalMarshaller=new EK.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:e})}deserialize(e,r){let n=typeof e[Symbol.asyncIterator]=="function"?e:_K(e);return this.universalMarshaller.deserialize(n,r)}serialize(e,r){return bK.Readable.from(this.universalMarshaller.serialize(e,r))}},wK=t=>new Od(t);hS.EventStreamMarshaller=Od;hS.eventStreamSerdeProvider=wK});var Rk=x(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});Md.ruleSet=void 0;var Ck="required",L="type",pe="rules",ue="conditions",$="fn",q="argv",be="ref",Na="assign",wr="url",xr="properties",Cr="headers",xK=!0,Us="isSet",Ls="stringEquals",mS="aws.parseArn",Bs="arn",Et="booleanEquals",Rt="endpoint",ge="tree",Ee="error",Ko={[Ck]:!1,[L]:"string"},yk={[Ck]:!0,default:!1,[L]:"boolean"},gS={[$]:"not",[q]:[{[$]:Us,[q]:[{[be]:"Endpoint"}]}]},Ak={[be]:"Endpoint"},kd={[$]:Us,[q]:[{[be]:"Region"}]},Nd={[$]:"aws.partition",[q]:[{[be]:"Region"}],[Na]:"PartitionResult"},yS={[$]:"not",[q]:[{[$]:Ls,[q]:[{[$]:"getAttr",[q]:[{[be]:"PartitionResult"},"name"]},"aws-iso"]}]},_S={[$]:"getAttr",[q]:[{[be]:"PartitionResult"},"name"]},SS={[$]:"not",[q]:[{[$]:Ls,[q]:[_S,"aws-iso-b"]}]},Dd={[$]:"getAttr",[q]:[{[be]:"PartitionResult"},"supportsFIPS"]},Gt={},vk={[Ee]:"FIPS is enabled but this partition does not support FIPS",[L]:Ee},Tk={[Ee]:"DualStack is enabled but this partition does not support DualStack",[L]:Ee},ES={[Ee]:"Invalid ARN: Failed to parse ARN.",[L]:Ee},Sk={[$]:Et,[q]:[!0,{[$]:"getAttr",[q]:[{[be]:"PartitionResult"},"supportsDualStack"]}]},Ek=[{[be]:"StreamARN"}],CK=[{[$]:Us,[q]:[Ak]}],bS=[{[ue]:[{[$]:"isValidHostLabel",[q]:[{[$]:"getAttr",[q]:[{[be]:Bs},"accountId"]},!1]}],[pe]:[{[ue]:[{[$]:"isValidHostLabel",[q]:[{[$]:"getAttr",[q]:[{[be]:Bs},"region"]},!1]}],[pe]:[{[ue]:[{[$]:Ls,[q]:[{[$]:"getAttr",[q]:[{[be]:Bs},"service"]},"kinesis"]}],[pe]:[{[ue]:[{[$]:"getAttr",[q]:[{[be]:Bs},"resourceId[0]"],[Na]:"arnType"},{[$]:"not",[q]:[{[$]:Ls,[q]:[{[be]:"arnType"},""]}]}],[pe]:[{[ue]:[{[$]:Ls,[q]:[{[be]:"arnType"},"stream"]}],[pe]:[{[ue]:[{[$]:Ls,[q]:[_S,"{arn#partition}"]}],[pe]:[{[ue]:[{[$]:Us,[q]:[{[be]:"OperationType"}]}],[pe]:[{[ue]:[{[$]:Et,[q]:[{[be]:"UseFIPS"},!0]},{[$]:Et,[q]:[{[be]:"UseDualStack"},!0]}],[pe]:[{[ue]:[{[$]:Et,[q]:[Dd,!0]}],[pe]:[{[ue]:[{[$]:Et,[q]:[{[$]:"getAttr",[q]:[{[be]:"PartitionResult"},"supportsDualStack"]},!0]}],[pe]:[{[Rt]:{[wr]:"https://{arn#accountId}.{OperationType}-kinesis-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[xr]:{},[Cr]:{}},[L]:Rt}],[L]:ge},{[Ee]:"DualStack is enabled, but this partition does not support DualStack.",[L]:Ee}],[L]:ge},{[Ee]:"FIPS is enabled, but this partition does not support FIPS.",[L]:Ee}],[L]:ge},{[ue]:[{[$]:Et,[q]:[{[be]:"UseFIPS"},!0]}],[pe]:[{[ue]:[{[$]:Et,[q]:[Dd,!0]}],[pe]:[{[Rt]:{[wr]:"https://{arn#accountId}.{OperationType}-kinesis-fips.{Region}.{PartitionResult#dnsSuffix}",[xr]:{},[Cr]:{}},[L]:Rt}],[L]:ge},vk],[L]:ge},{[ue]:[{[$]:Et,[q]:[{[be]:"UseDualStack"},!0]}],[pe]:[{[ue]:[{[$]:Et,[q]:[{[$]:"getAttr",[q]:[{[be]:"PartitionResult"},"supportsDualStack"]},!0]}],[pe]:[{[Rt]:{[wr]:"https://{arn#accountId}.{OperationType}-kinesis.{Region}.{PartitionResult#dualStackDnsSuffix}",[xr]:{},[Cr]:{}},[L]:Rt}],[L]:ge},Tk],[L]:ge},{[Rt]:{[wr]:"https://{arn#accountId}.{OperationType}-kinesis.{Region}.{PartitionResult#dnsSuffix}",[xr]:{},[Cr]:{}},[L]:Rt}],[L]:ge},{[Ee]:"Operation Type is not set. Please contact service team for resolution.",[L]:Ee}],[L]:ge},{[Ee]:"Partition: {arn#partition} from ARN doesn't match with partition name: {PartitionResult#name}.",[L]:Ee}],[L]:ge},{[Ee]:"Invalid ARN: Kinesis ARNs don't support `{arnType}` arn types.",[L]:Ee}],[L]:ge},{[Ee]:"Invalid ARN: No ARN type specified",[L]:Ee}],[L]:ge},{[Ee]:"Invalid ARN: The ARN was not for the Kinesis service, found: {arn#service}.",[L]:Ee}],[L]:ge},{[Ee]:"Invalid ARN: Invalid region.",[L]:Ee}],[L]:ge},{[Ee]:"Invalid ARN: Invalid account id.",[L]:Ee}],AK=[{[$]:Et,[q]:[{[be]:"UseFIPS"},!0]},{[$]:Et,[q]:[{[be]:"UseDualStack"},!0]}],vK=[{[$]:Et,[q]:[Dd,!0]}],bk=[{[$]:Et,[q]:[{[be]:"UseFIPS"},!0]}],_k=[{[$]:Et,[q]:[{[be]:"UseDualStack"},!0]}],wk=[{[be]:"ConsumerARN"}],xk=[{[be]:"ResourceARN"}],TK={version:"1.0",parameters:{Region:Ko,UseDualStack:yk,UseFIPS:yk,Endpoint:Ko,StreamARN:Ko,OperationType:Ko,ConsumerARN:Ko,ResourceARN:Ko},[pe]:[{[ue]:[{[$]:Us,[q]:Ek},gS,kd,Nd,yS,SS],[pe]:[{[ue]:[{[$]:mS,[q]:Ek,[Na]:Bs}],[pe]:bS,[L]:ge},ES],[L]:ge},{[ue]:[{[$]:Us,[q]:wk},gS,kd,Nd,yS,SS],[pe]:[{[ue]:[{[$]:mS,[q]:wk,[Na]:Bs}],[pe]:bS,[L]:ge},ES],[L]:ge},{[ue]:[{[$]:Us,[q]:xk},gS,kd,Nd,yS,SS],[pe]:[{[ue]:[{[$]:mS,[q]:xk,[Na]:Bs}],[pe]:bS,[L]:ge},ES],[L]:ge},{[ue]:CK,[pe]:[{[ue]:bk,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[L]:Ee},{[ue]:_k,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[L]:Ee},{endpoint:{[wr]:Ak,[xr]:Gt,[Cr]:Gt},[L]:Rt}],[L]:ge},{[ue]:[kd],[pe]:[{[ue]:[Nd],[pe]:[{[ue]:AK,[pe]:[{[ue]:[{[$]:Et,[q]:[xK,Dd]},Sk],[pe]:[{endpoint:{[wr]:"https://kinesis-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[xr]:Gt,[Cr]:Gt},[L]:Rt}],[L]:ge},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[L]:Ee}],[L]:ge},{[ue]:bk,[pe]:[{[ue]:vK,[pe]:[{[ue]:[{[$]:Ls,[q]:[_S,"aws-us-gov"]}],endpoint:{[wr]:"https://kinesis.{Region}.amazonaws.com",[xr]:Gt,[Cr]:Gt},[L]:Rt},{endpoint:{[wr]:"https://kinesis-fips.{Region}.{PartitionResult#dnsSuffix}",[xr]:Gt,[Cr]:Gt},[L]:Rt}],[L]:ge},vk],[L]:ge},{[ue]:_k,[pe]:[{[ue]:[Sk],[pe]:[{endpoint:{[wr]:"https://kinesis.{Region}.{PartitionResult#dualStackDnsSuffix}",[xr]:Gt,[Cr]:Gt},[L]:Rt}],[L]:ge},Tk],[L]:ge},{endpoint:{[wr]:"https://kinesis.{Region}.{PartitionResult#dnsSuffix}",[xr]:Gt,[Cr]:Gt},[L]:Rt}],[L]:ge}],[L]:ge},{error:"Invalid Configuration: Missing Region",[L]:Ee}]};Md.ruleSet=TK});var Ik=x(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.defaultEndpointResolver=void 0;var RK=hs(),wS=sn(),IK=Rk(),PK=new wS.EndpointCache({size:50,params:["ConsumerARN","Endpoint","OperationType","Region","ResourceARN","StreamARN","UseDualStack","UseFIPS"]}),OK=(t,e={})=>PK.get(t,()=>(0,wS.resolveEndpoint)(IK.ruleSet,{endpointParams:t,logger:e.logger}));Fd.defaultEndpointResolver=OK;wS.customEndpointFunctions.aws=RK.awsEndpointFunctions});var kk=x(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});Ld.getRuntimeConfig=void 0;var kK=(Ke(),re(_n)),NK=(Ss(),re(mg)),DK=te(),MK=Mr(),Pk=$e(),Ok=Ue(),FK=Mg(),LK=Ik(),BK=t=>({apiVersion:"2013-12-02",base64Decoder:t?.base64Decoder??Pk.fromBase64,base64Encoder:t?.base64Encoder??Pk.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??LK.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??FK.defaultKinesisHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new kK.AwsSdkSigV4Signer}],logger:t?.logger??new DK.NoOpLogger,protocol:t?.protocol??NK.AwsJson1_1Protocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.kinesis",xmlNamespace:"http://kinesis.amazonaws.com/doc/2013-12-02",version:"2013-12-02",serviceTarget:"Kinesis_20131202"},serviceId:t?.serviceId??"Kinesis",urlParser:t?.urlParser??MK.parseUrl,utf8Decoder:t?.utf8Decoder??Ok.fromUtf8,utf8Encoder:t?.utf8Encoder??Ok.toUtf8});Ld.getRuntimeConfig=BK});var Bk=x(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.getRuntimeConfig=void 0;var UK=(as(),re(is)),$K=UK.__importDefault(gv()),Nk=(Ke(),re(_n)),qK=HO(),Dk=Ro(),Bd=vt(),jK=gk(),HK=Io(),Mk=Xt(),$s=pr(),Fk=Or(),Lk=te(),zK=Po(),VK=Oo(),KK=_s(),GK=kk(),WK=t=>{(0,Lk.emitWarningIfUnsupportedVersion)(process.version);let e=(0,VK.resolveDefaultsModeConfig)(t),r=()=>e().then(Lk.loadConfigsForDefaultMode),n=(0,GK.getRuntimeConfig)(t);(0,Nk.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,$s.loadConfig)(Nk.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??zK.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??qK.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Dk.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:$K.default.version}),eventStreamSerdeProvider:t?.eventStreamSerdeProvider??jK.eventStreamSerdeProvider,maxAttempts:t?.maxAttempts??(0,$s.loadConfig)(Mk.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,$s.loadConfig)(Bd.NODE_REGION_CONFIG_OPTIONS,{...Bd.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Fk.NodeHttp2Handler.create(t?.requestHandler??(async()=>({...await r(),disableConcurrentStreams:!0}))),retryMode:t?.retryMode??(0,$s.loadConfig)({...Mk.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||KK.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??HK.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Fk.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,$s.loadConfig)(Bd.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,$s.loadConfig)(Bd.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,$s.loadConfig)(Dk.NODE_APP_ID_CONFIG_OPTIONS,s)}};Ud.getRuntimeConfig=WK});var jk=x(bt=>{"use strict";var $d=()=>{let t=new WeakSet;return(e,r)=>{if(typeof r=="object"&&r!==null){if(t.has(r))return"[Circular]";t.add(r)}return r}},QK=t=>new Promise(e=>setTimeout(e,t*1e3)),qk={minDelay:2,maxDelay:120};bt.WaiterState=void 0;(function(t){t.ABORTED="ABORTED",t.FAILURE="FAILURE",t.SUCCESS="SUCCESS",t.RETRY="RETRY",t.TIMEOUT="TIMEOUT"})(bt.WaiterState||(bt.WaiterState={}));var YK=t=>{if(t.state===bt.WaiterState.ABORTED){let e=new Error(`${JSON.stringify({...t,reason:"Request was aborted"},$d())}`);throw e.name="AbortError",e}else if(t.state===bt.WaiterState.TIMEOUT){let e=new Error(`${JSON.stringify({...t,reason:"Waiter has timed out"},$d())}`);throw e.name="TimeoutError",e}else if(t.state!==bt.WaiterState.SUCCESS)throw new Error(`${JSON.stringify(t,$d())}`);return t},JK=(t,e,r,n)=>{if(n>r)return e;let s=t*2**(n-1);return XK(t,s)},XK=(t,e)=>t+Math.random()*(e-t),ZK=async({minDelay:t,maxDelay:e,maxWaitTime:r,abortController:n,client:s,abortSignal:o},i,a)=>{let c={},{state:u,reason:d}=await a(s,i);if(d){let g=Uk(d);c[g]|=0,c[g]+=1}if(u!==bt.WaiterState.RETRY)return{state:u,reason:d,observedResponses:c};let l=1,m=Date.now()+r*1e3,h=Math.log(e/t)/Math.log(2)+1;for(;;){if(n?.signal?.aborted||o?.aborted){let R="AbortController signal aborted.";return c[R]|=0,c[R]+=1,{state:bt.WaiterState.ABORTED,observedResponses:c}}let g=JK(t,e,h,l);if(Date.now()+g*1e3>m)return{state:bt.WaiterState.TIMEOUT,observedResponses:c};await QK(g);let{state:C,reason:T}=await a(s,i);if(T){let R=Uk(T);c[R]|=0,c[R]+=1}if(C!==bt.WaiterState.RETRY)return{state:C,reason:T,observedResponses:c};l+=1}},Uk=t=>t?.$responseBodyText?`Deserialization error for body: ${t.$responseBodyText}`:t?.$metadata?.httpStatusCode?t.$response||t.message?`${t.$response.statusCode??t.$metadata.httpStatusCode??"Unknown"}: ${t.message}`:`${t.$metadata.httpStatusCode}: OK`:String(t?.message??JSON.stringify(t,$d())??"Unknown"),eG=t=>{if(t.maxWaitTime<=0)throw new Error("WaiterConfiguration.maxWaitTime must be greater than 0");if(t.minDelay<=0)throw new Error("WaiterConfiguration.minDelay must be greater than 0");if(t.maxDelay<=0)throw new Error("WaiterConfiguration.maxDelay must be greater than 0");if(t.maxWaitTime<=t.minDelay)throw new Error(`WaiterConfiguration.maxWaitTime [${t.maxWaitTime}] must be greater than WaiterConfiguration.minDelay [${t.minDelay}] for this waiter`);if(t.maxDelay<t.minDelay)throw new Error(`WaiterConfiguration.maxDelay [${t.maxDelay}] must be greater than WaiterConfiguration.minDelay [${t.minDelay}] for this waiter`)},$k=t=>{let e,r=new Promise(n=>{e=()=>n({state:bt.WaiterState.ABORTED}),typeof t.addEventListener=="function"?t.addEventListener("abort",e):t.onabort=e});return{clearListener(){typeof t.removeEventListener=="function"&&t.removeEventListener("abort",e)},aborted:r}},tG=async(t,e,r)=>{let n={...qk,...t};eG(n);let s=[ZK(n,e,r)],o=[];if(t.abortSignal){let{aborted:i,clearListener:a}=$k(t.abortSignal);o.push(a),s.push(i)}if(t.abortController?.signal){let{aborted:i,clearListener:a}=$k(t.abortController.signal);o.push(a),s.push(i)}return Promise.race(s).then(i=>{for(let a of o)a();return i})};bt.checkExceptions=YK;bt.createWaiter=tG;bt.waiterServiceDefaults=qk});var ZM=x(S=>{"use strict";var Hk=Gs(),rG=Ws(),nG=Qs(),zk=Es(),sG=vt(),Da=(gt(),re(io)),He=(le(),re(Ic)),oG=xA(),iG=xo(),J=hr(),Vk=Xt(),V=te(),Kk=Mg(),aG=Bk(),Gk=xs(),Wk=ye(),Ar=jk(),cG=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"kinesis"}),Z={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},uG=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},lG=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),dG=(t,e)=>{let r=Object.assign(Gk.getAwsRegionExtensionConfiguration(t),V.getDefaultExtensionConfiguration(t),Wk.getHttpHandlerExtensionConfiguration(t),uG(t));return e.forEach(n=>n.configure(r)),Object.assign(t,Gk.resolveAwsRegionExtensionConfiguration(r),V.resolveDefaultRuntimeConfig(r),Wk.resolveHttpHandlerRuntimeConfig(r),lG(r))},Go=class extends V.Client{config;constructor(...[e]){let r=aG.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=cG(r),s=zk.resolveUserAgentConfig(n),o=Vk.resolveRetryConfig(s),i=sG.resolveRegionConfig(o),a=Hk.resolveHostHeaderConfig(i),c=J.resolveEndpointConfig(a),u=oG.resolveEventStreamSerdeConfig(c),d=Kk.resolveHttpAuthSchemeConfig(u),l=dG(d,e?.extensions||[]);this.config=l,this.middlewareStack.use(He.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(zk.getUserAgentPlugin(this.config)),this.middlewareStack.use(Vk.getRetryPlugin(this.config)),this.middlewareStack.use(iG.getContentLengthPlugin(this.config)),this.middlewareStack.use(Hk.getHostHeaderPlugin(this.config)),this.middlewareStack.use(rG.getLoggerPlugin(this.config)),this.middlewareStack.use(nG.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Da.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:Kk.defaultKinesisHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new Da.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(Da.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Le=class t extends V.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},qd=class t extends Le{name="AccessDeniedException";$fault="client";constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},jd=class t extends Le{name="InvalidArgumentException";$fault="client";constructor(e){super({name:"InvalidArgumentException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Hd=class t extends Le{name="LimitExceededException";$fault="client";constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},zd=class t extends Le{name="ResourceInUseException";$fault="client";constructor(e){super({name:"ResourceInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Vd=class t extends Le{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Kd=class t extends Le{name="ValidationException";$fault="client";constructor(e){super({name:"ValidationException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Gd=class t extends Le{name="ExpiredIteratorException";$fault="client";constructor(e){super({name:"ExpiredIteratorException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Wd=class t extends Le{name="ExpiredNextTokenException";$fault="client";constructor(e){super({name:"ExpiredNextTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Qd=class t extends Le{name="InternalFailureException";$fault="server";constructor(e){super({name:"InternalFailureException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype)}},Yd=class t extends Le{name="KMSAccessDeniedException";$fault="client";constructor(e){super({name:"KMSAccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Jd=class t extends Le{name="KMSDisabledException";$fault="client";constructor(e){super({name:"KMSDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Xd=class t extends Le{name="KMSInvalidStateException";$fault="client";constructor(e){super({name:"KMSInvalidStateException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Zd=class t extends Le{name="KMSNotFoundException";$fault="client";constructor(e){super({name:"KMSNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ef=class t extends Le{name="KMSOptInRequired";$fault="client";constructor(e){super({name:"KMSOptInRequired",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},tf=class t extends Le{name="KMSThrottlingException";$fault="client";constructor(e){super({name:"KMSThrottlingException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},rf=class t extends Le{name="ProvisionedThroughputExceededException";$fault="client";constructor(e){super({name:"ProvisionedThroughputExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},fG="ApproximateArrivalTimestamp",pG="AccessDeniedException",hG="AdjacentParentShardId",mG="AdjacentShardToMerge",gG="AddTagsToStream",yG="AddTagsToStreamInput",Qk="Consumer",La="ConsumerARN",SG="ConsumerCount",Yk="ConsumerCreationTimestamp",Jk="ConsumerDescription",EG="ConsumerList",bG="CurrentMiBps",Ba="ConsumerName",_G="ChildShard",wG="CurrentShardCount",xG="CreateStreamInput",CG="ChildShardList",AG="CurrentShardLevelMetrics",vG="ContinuationSequenceNumber",Xk="ChildShards",Zk="ConsumerStatus",TG="CreateStream",RG="Consumers",xS="Data",IG="DescribeAccountSettings",PG="DescribeAccountSettingsInput",OG="DescribeAccountSettingsOutput",kG="DisableEnhancedMonitoring",NG="DisableEnhancedMonitoringInput",DG="DescribeLimits",MG="DescribeLimitsInput",FG="DescribeLimitsOutput",LG="DeleteResourcePolicy",BG="DeleteResourcePolicyInput",UG="DeleteStream",$G="DeregisterStreamConsumer",qG="DeregisterStreamConsumerInput",jG="DescribeStreamConsumerInput",HG="DescribeStreamConsumerOutput",zG="DescribeStreamConsumer",VG="DeleteStreamInput",KG="DescribeStreamInput",GG="DesiredShardLevelMetrics",WG="DescribeStreamOutput",QG="DecreaseStreamRetentionPeriod",YG="DecreaseStreamRetentionPeriodInput",JG="DescribeStreamSummary",XG="DescribeStreamSummaryInput",ZG="DescribeStreamSummaryOutput",e9="DescribeStream",t9="EndedAt",r9="EarliestAllowedEndAt",n9="ErrorCode",s9="EnforceConsumerDeletion",o9="EnableEnhancedMonitoring",i9="EnableEnhancedMonitoringInput",a9="EndingHashKey",eN="ExplicitHashKey",c9="ExpiredIteratorException",u9="EnhancedMetrics",l9="EnhancedMonitoringList",d9="EnhancedMonitoringOutput",tN="EnhancedMonitoring",f9="ErrorMessage",p9="ExpiredNextTokenException",h9="EventStream",m9="EndingSequenceNumber",rN="ExclusiveStartShardId",g9="ExclusiveStartStreamName",y9="ExclusiveStartTagKey",qs="EncryptionType",S9="FailedRecordCount",E9="GetRecords",b9="GetRecordsInput",_9="GetRecordsOutput",w9="GetResourcePolicy",x9="GetResourcePolicyInput",C9="GetResourcePolicyOutput",A9="GetShardIterator",v9="GetShardIteratorInput",T9="GetShardIteratorOutput",CS="HashKeyRange",R9="HasMoreStreams",I9="HasMoreShards",P9="HasMoreTags",O9="InvalidArgumentException",nN="InternalFailureException",k9="IncreaseStreamRetentionPeriod",N9="IncreaseStreamRetentionPeriodInput",D9="Key",qf="KeyId",sN="KMSAccessDeniedException",oN="KMSDisabledException",iN="KMSInvalidStateException",aN="KMSNotFoundException",cN="KMSOptInRequired",uN="KMSThrottlingException",jf="Limit",M9="LimitExceededException",F9="ListShards",L9="ListStreamConsumers",B9="ListStreamConsumersInput",U9="ListStreamConsumersOutput",$9="ListShardsInput",q9="ListStreamsInput",j9="ListShardsOutput",H9="ListStreamsOutput",z9="ListStreams",V9="ListTagsForResource",K9="ListTagsForResourceInput",G9="ListTagsForResourceOutput",W9="ListTagsForStream",Q9="ListTagsForStreamInput",Y9="ListTagsForStreamOutput",lN="MillisBehindLatest",dN="MaxResults",AS="MaxRecordSizeInKiB",J9="MergeShards",X9="MergeShardsInput",vS="MinimumThroughputBillingCommitment",Z9="MinimumThroughputBillingCommitmentInput",eW="MinimumThroughputBillingCommitmentOutput",tW="NewStartingHashKey",rW="NextShardIterator",Qo="NextToken",nW="OnDemandStreamCount",sW="OnDemandStreamCountLimit",fN="OpenShardCount",pN="Policy",TS="PartitionKey",oW="PutRecord",iW="PutRecordInput",aW="PutRecordsInput",cW="PutRecordOutput",uW="PutRecordsOutput",lW="PutResourcePolicy",dW="PutResourcePolicyInput",fW="PutRecordsRequestEntry",pW="PutRecordsRequestEntryList",hW="PutRecordsResultEntryList",mW="PutRecordsResultEntry",gW="PutRecords",yW="ParentShards",SW="ParentShardId",EW="ProvisionedThroughputExceededException",Hf="Records",Yo="ResourceARN",hN="ResourceInUseException",bW="RecordList",mN="ResourceNotFoundException",zf="RetentionPeriodHours",_W="RegisterStreamConsumer",wW="RegisterStreamConsumerInput",xW="RegisterStreamConsumerOutput",CW="RemoveTagsFromStream",AW="RemoveTagsFromStreamInput",vW="Record",gN="Shards",TW="StartedAt",ie="StreamARN",RW="ShardCount",Ua="StreamCreationTimestamp",yN="StreamDescription",SN="StreamDescriptionSummary",EN="ShardFilter",IW="StartingHashKey",js="ShardId",PW="ShardIteratorType",bN="ShardIterator",OW="ShardLimit",RS="ShardLevelMetrics",kW="ShardList",NW="StreamMode",Jo="StreamModeDetails",Ce="StreamName",DW="SequenceNumberForOrdering",_N="SequenceNumberRange",Vf="SequenceNumber",MW="StreamNames",wN="StartingPosition",FW="StreamSummaries",LW="StartStreamEncryption",BW="StartStreamEncryptionInput",UW="StopStreamEncryptionInput",$W="StopStreamEncryption",qW="SplitShardInput",jW="StreamSummaryList",xN="StartingSequenceNumber",HW="SplitShard",IS="StreamStatus",zW="StreamSummary",VW="ScalingType",KW="ShardToMerge",GW="ShardToSplit",CN="SubscribeToShardEvent",WW="SubscribeToShardEventStream",QW="SubscribeToShardInput",YW="SubscribeToShardOutput",JW="SubscribeToShard",XW="Shard",AN="Status",Xo="Tags",vN="TagKeys",ZW="TagList",e7="TargetMiBps",t7="TagResource",r7="TagResourceInput",TN="TargetShardCount",n7="Tag",PS="Timestamp",RN="Type",s7="UpdateAccountSettings",o7="UpdateAccountSettingsInput",i7="UpdateAccountSettingsOutput",a7="UpdateMaxRecordSize",c7="UpdateMaxRecordSizeInput",u7="UntagResource",l7="UntagResourceInput",d7="UpdateShardCount",f7="UpdateShardCountInput",p7="UpdateShardCountOutput",h7="UpdateStreamMode",m7="UpdateStreamModeInput",g7="UpdateStreamWarmThroughput",y7="UpdateStreamWarmThroughputInput",S7="UpdateStreamWarmThroughputOutput",E7="Value",b7="ValidationException",IN="WarmThroughput",OS="WarmThroughputMiBps",_7="WarmThroughputObject",_t="client",ct="error",ut="message",w7="server",PN="smithy.ts.sdk.synthetic.com.amazonaws.kinesis",x7="streaming",v="com.amazonaws.kinesis",ON=[-3,v,pG,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(ON,qd);var kN=[3,v,yG,0,[Ce,Xo,ie],[0,128,0]],NN=[3,v,_G,0,[js,yW,CS],[0,64,()=>DS]],kS=[3,v,Qk,0,[Ba,La,Zk,Yk],[0,0,0,4]],DN=[3,v,Jk,0,[Ba,La,Zk,Yk,ie],[0,0,0,4,0]],MN=[3,v,xG,0,[Ce,RW,Jo,Xo,OS,AS],[0,1,()=>Zo,128,1,1]],FN=[3,v,YG,0,[Ce,zf,ie],[0,1,0]],LN=[3,v,BG,0,[Yo],[0]],BN=[3,v,VG,0,[Ce,s9,ie],[0,2,0]],UN=[3,v,qG,0,[ie,Ba,La],[0,0,0]],$N=[3,v,PG,0,[],[]],qN=[3,v,OG,0,[vS],[()=>jS]],jN=[3,v,MG,0,[],[]],HN=[3,v,FG,0,[OW,fN,nW,sW],[1,1,1,1]],zN=[3,v,jG,0,[ie,Ba,La],[0,0,0]],VN=[3,v,HG,0,[Jk],[()=>DN]],KN=[3,v,KG,0,[Ce,jf,rN,ie],[0,1,0,0]],GN=[3,v,WG,0,[yN],[()=>qD]],WN=[3,v,XG,0,[Ce,ie],[0,0]],QN=[3,v,ZG,0,[SN],[()=>jD]],YN=[3,v,NG,0,[Ce,RS,ie],[0,64,0]],JN=[3,v,i9,0,[Ce,RS,ie],[0,64,0]],XN=[3,v,u9,0,[RS],[64]],NS=[3,v,d9,0,[Ce,AG,GG,ie],[0,64,64,0]],ZN=[-3,v,c9,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(ZN,Gd);var eD=[-3,v,p9,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(eD,Wd);var tD=[3,v,b9,0,[bN,jf,ie],[0,1,0]],rD=[3,v,_9,0,[Hf,rW,lN,Xk],[()=>cM,0,1,()=>iM]],nD=[3,v,x9,0,[Yo],[0]],sD=[3,v,C9,0,[pN],[0]],oD=[3,v,v9,0,[Ce,js,PW,xN,PS,ie],[0,0,0,0,4,0]],iD=[3,v,T9,0,[bN],[0]],DS=[3,v,CS,0,[IW,a9],[0,0]],aD=[3,v,N9,0,[Ce,zf,ie],[0,1,0]],MS=[-3,v,nN,{[ct]:w7},[ut],[0]];He.TypeRegistry.for(v).registerError(MS,Qd);var cD=[-3,v,O9,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(cD,jd);var FS=[-3,v,sN,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(FS,Yd);var LS=[-3,v,oN,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(LS,Jd);var BS=[-3,v,iN,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(BS,Xd);var US=[-3,v,aN,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(US,Zd);var $S=[-3,v,cN,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError($S,ef);var qS=[-3,v,uN,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(qS,tf);var uD=[-3,v,M9,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(uD,Hd);var lD=[3,v,$9,0,[Ce,Qo,rN,dN,Ua,EN,ie],[0,0,0,1,4,()=>FD,0]],dD=[3,v,j9,0,[gN,Qo],[()=>uM,0]],fD=[3,v,B9,0,[ie,Qo,dN,Ua],[0,0,1,4]],pD=[3,v,U9,0,[RG,Qo],[()=>C7,0]],hD=[3,v,q9,0,[jf,g9,Qo],[1,0,0]],mD=[3,v,H9,0,[MW,R9,Qo,FW],[64,2,0,()=>T7]],gD=[3,v,K9,0,[Yo],[0]],yD=[3,v,G9,0,[Xo],[()=>lM]],SD=[3,v,Q9,0,[Ce,y9,jf,ie],[0,0,1,0]],ED=[3,v,Y9,0,[Xo,P9],[()=>lM,2]],bD=[3,v,X9,0,[Ce,KW,mG,ie],[0,0,0,0]],_D=[3,v,Z9,0,[AN],[0]],jS=[3,v,eW,0,[AN,TW,t9,r9],[0,4,4,4]],wD=[-3,v,EW,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(wD,rf);var xD=[3,v,iW,0,[Ce,xS,TS,eN,DW,ie],[0,21,0,0,0,0]],CD=[3,v,cW,0,[js,Vf,qs],[0,0,0]],AD=[3,v,aW,0,[Hf,Ce,ie],[()=>A7,0,0]],vD=[3,v,uW,0,[S9,Hf,qs],[1,()=>v7,0]],TD=[3,v,fW,0,[xS,eN,TS],[21,0,0]],RD=[3,v,mW,0,[Vf,js,n9,f9],[0,0,0,0]],ID=[3,v,dW,0,[Yo,pN],[0,0]],PD=[3,v,vW,0,[Vf,fG,xS,TS,qs],[0,4,21,0,0]],OD=[3,v,wW,0,[ie,Ba,Xo],[0,0,128]],kD=[3,v,xW,0,[Qk],[()=>kS]],ND=[3,v,AW,0,[Ce,vN,ie],[0,64,0]],HS=[-3,v,hN,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(HS,zd);var zS=[-3,v,mN,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(zS,Vd);var DD=[3,v,_N,0,[xN,m9],[0,0]],MD=[3,v,XW,0,[js,SW,hG,CS,_N],[0,0,0,()=>DS,()=>DD]],FD=[3,v,EN,0,[RN,js,PS],[0,0,4]],LD=[3,v,qW,0,[Ce,GW,tW,ie],[0,0,0,0]],BD=[3,v,wN,0,[RN,Vf,PS],[0,0,4]],UD=[3,v,BW,0,[Ce,qs,qf,ie],[0,0,0,0]],$D=[3,v,UW,0,[Ce,qs,qf,ie],[0,0,0,0]],qD=[3,v,yN,0,[Ce,ie,IS,Jo,gN,I9,zf,Ua,tN,qs,qf],[0,0,0,()=>Zo,()=>uM,2,1,4,()=>aM,0,0]],jD=[3,v,SN,0,[Ce,ie,IS,Jo,zf,Ua,tN,qs,qf,fN,SG,IN,AS],[0,0,0,()=>Zo,1,4,()=>aM,0,0,1,1,()=>VS,1]],Zo=[3,v,Jo,0,[NW],[0]],HD=[3,v,zW,0,[Ce,ie,IS,Jo,Ua],[0,0,0,()=>Zo,4]],zD=[3,v,CN,0,[Hf,vG,lN,Xk],[()=>cM,0,1,()=>iM]],VD=[3,v,QW,0,[La,js,wN],[0,0,()=>BD]],KD=[3,v,YW,0,[h9],[[()=>dM,0]]],GD=[3,v,n7,0,[D9,E7],[0,0]],WD=[3,v,r7,0,[Xo,Yo],[128,0]],QD=[3,v,l7,0,[vN,Yo],[64,0]],YD=[3,v,o7,0,[vS],[()=>_D]],JD=[3,v,i7,0,[vS],[()=>jS]],XD=[3,v,c7,0,[ie,AS],[0,1]],ZD=[3,v,f7,0,[Ce,TN,VW,ie],[0,1,0,0]],eM=[3,v,p7,0,[Ce,wG,TN,ie],[0,1,1,0]],tM=[3,v,m7,0,[ie,Jo,OS],[0,()=>Zo,1]],rM=[3,v,y7,0,[ie,Ce,OS],[0,0,1]],nM=[3,v,S7,0,[ie,Ce,IN],[0,0,()=>VS]],sM=[-3,v,b7,{[ct]:_t},[ut],[0]];He.TypeRegistry.for(v).registerError(sM,Kd);var VS=[3,v,_7,0,[e7,bG],[1,1]],Ye="unit",oM=[-3,PN,"KinesisServiceException",0,[],[]];He.TypeRegistry.for(PN).registerError(oM,Le);var iM=[1,v,CG,0,()=>NN],C7=[1,v,EG,0,()=>kS],aM=[1,v,l9,0,()=>XN],A7=[1,v,pW,0,()=>TD],v7=[1,v,hW,0,()=>RD],cM=[1,v,bW,0,()=>PD],uM=[1,v,kW,0,()=>MD],T7=[1,v,jW,0,()=>HD],lM=[1,v,ZW,0,()=>GD],dM=[3,v,WW,{[x7]:1},[CN,mN,hN,oN,iN,sN,aN,cN,uN,nN],[()=>zD,[()=>zS,0],[()=>HS,0],[()=>LS,0],[()=>BS,0],[()=>FS,0],[()=>US,0],[()=>$S,0],[()=>qS,0],[()=>MS,0]]],fM=[9,v,gG,0,()=>kN,()=>Ye],pM=[9,v,TG,0,()=>MN,()=>Ye],hM=[9,v,QG,0,()=>FN,()=>Ye],mM=[9,v,LG,0,()=>LN,()=>Ye],gM=[9,v,UG,0,()=>BN,()=>Ye],yM=[9,v,$G,0,()=>UN,()=>Ye],SM=[9,v,IG,0,()=>$N,()=>qN],EM=[9,v,DG,0,()=>jN,()=>HN],bM=[9,v,e9,0,()=>KN,()=>GN],_M=[9,v,zG,0,()=>zN,()=>VN],wM=[9,v,JG,0,()=>WN,()=>QN],xM=[9,v,kG,0,()=>YN,()=>NS],CM=[9,v,o9,0,()=>JN,()=>NS],AM=[9,v,E9,0,()=>tD,()=>rD],vM=[9,v,w9,0,()=>nD,()=>sD],TM=[9,v,A9,0,()=>oD,()=>iD],RM=[9,v,k9,0,()=>aD,()=>Ye],IM=[9,v,F9,0,()=>lD,()=>dD],PM=[9,v,L9,0,()=>fD,()=>pD],OM=[9,v,z9,0,()=>hD,()=>mD],kM=[9,v,V9,0,()=>gD,()=>yD],NM=[9,v,W9,0,()=>SD,()=>ED],DM=[9,v,J9,0,()=>bD,()=>Ye],MM=[9,v,oW,0,()=>xD,()=>CD],FM=[9,v,gW,0,()=>AD,()=>vD],LM=[9,v,lW,0,()=>ID,()=>Ye],BM=[9,v,_W,0,()=>OD,()=>kD],UM=[9,v,CW,0,()=>ND,()=>Ye],$M=[9,v,HW,0,()=>LD,()=>Ye],qM=[9,v,LW,0,()=>UD,()=>Ye],jM=[9,v,$W,0,()=>$D,()=>Ye],HM=[9,v,JW,0,()=>VD,()=>KD],zM=[9,v,t7,0,()=>WD,()=>Ye],VM=[9,v,u7,0,()=>QD,()=>Ye],KM=[9,v,s7,0,()=>YD,()=>JD],GM=[9,v,a7,0,()=>XD,()=>Ye],WM=[9,v,d7,0,()=>ZD,()=>eM],QM=[9,v,h7,0,()=>tM,()=>Ye],YM=[9,v,g7,0,()=>rM,()=>nM],nf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","AddTagsToStream",{}).n("KinesisClient","AddTagsToStreamCommand").sc(fM).build(){},sf=class extends V.Command.classBuilder().ep(Z).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","CreateStream",{}).n("KinesisClient","CreateStreamCommand").sc(pM).build(){},of=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DecreaseStreamRetentionPeriod",{}).n("KinesisClient","DecreaseStreamRetentionPeriodCommand").sc(hM).build(){},af=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DeleteResourcePolicy",{}).n("KinesisClient","DeleteResourcePolicyCommand").sc(mM).build(){},cf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DeleteStream",{}).n("KinesisClient","DeleteStreamCommand").sc(gM).build(){},uf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},ConsumerARN:{type:"contextParams",name:"ConsumerARN"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DeregisterStreamConsumer",{}).n("KinesisClient","DeregisterStreamConsumerCommand").sc(yM).build(){},lf=class extends V.Command.classBuilder().ep(Z).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DescribeAccountSettings",{}).n("KinesisClient","DescribeAccountSettingsCommand").sc(SM).build(){},df=class extends V.Command.classBuilder().ep(Z).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DescribeLimits",{}).n("KinesisClient","DescribeLimitsCommand").sc(EM).build(){},Wo=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DescribeStream",{}).n("KinesisClient","DescribeStreamCommand").sc(bM).build(){},ff=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},ConsumerARN:{type:"contextParams",name:"ConsumerARN"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DescribeStreamConsumer",{}).n("KinesisClient","DescribeStreamConsumerCommand").sc(_M).build(){},pf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DescribeStreamSummary",{}).n("KinesisClient","DescribeStreamSummaryCommand").sc(wM).build(){},hf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DisableEnhancedMonitoring",{}).n("KinesisClient","DisableEnhancedMonitoringCommand").sc(xM).build(){},mf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","EnableEnhancedMonitoring",{}).n("KinesisClient","EnableEnhancedMonitoringCommand").sc(CM).build(){},gf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"data"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","GetRecords",{}).n("KinesisClient","GetRecordsCommand").sc(AM).build(){},yf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","GetResourcePolicy",{}).n("KinesisClient","GetResourcePolicyCommand").sc(vM).build(){},Sf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"data"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","GetShardIterator",{}).n("KinesisClient","GetShardIteratorCommand").sc(TM).build(){},Ef=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","IncreaseStreamRetentionPeriod",{}).n("KinesisClient","IncreaseStreamRetentionPeriodCommand").sc(RM).build(){},bf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","ListShards",{}).n("KinesisClient","ListShardsCommand").sc(IM).build(){},Ma=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","ListStreamConsumers",{}).n("KinesisClient","ListStreamConsumersCommand").sc(PM).build(){},Fa=class extends V.Command.classBuilder().ep(Z).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","ListStreams",{}).n("KinesisClient","ListStreamsCommand").sc(OM).build(){},_f=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","ListTagsForResource",{}).n("KinesisClient","ListTagsForResourceCommand").sc(kM).build(){},wf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","ListTagsForStream",{}).n("KinesisClient","ListTagsForStreamCommand").sc(NM).build(){},xf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","MergeShards",{}).n("KinesisClient","MergeShardsCommand").sc(DM).build(){},Cf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"data"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","PutRecord",{}).n("KinesisClient","PutRecordCommand").sc(MM).build(){},Af=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"data"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","PutRecords",{}).n("KinesisClient","PutRecordsCommand").sc(FM).build(){},vf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","PutResourcePolicy",{}).n("KinesisClient","PutResourcePolicyCommand").sc(LM).build(){},Tf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","RegisterStreamConsumer",{}).n("KinesisClient","RegisterStreamConsumerCommand").sc(BM).build(){},Rf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","RemoveTagsFromStream",{}).n("KinesisClient","RemoveTagsFromStreamCommand").sc(UM).build(){},If=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","SplitShard",{}).n("KinesisClient","SplitShardCommand").sc($M).build(){},Pf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","StartStreamEncryption",{}).n("KinesisClient","StartStreamEncryptionCommand").sc(qM).build(){},Of=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","StopStreamEncryption",{}).n("KinesisClient","StopStreamEncryptionCommand").sc(jM).build(){},kf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"data"},ConsumerARN:{type:"contextParams",name:"ConsumerARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","SubscribeToShard",{eventStream:{output:!0}}).n("KinesisClient","SubscribeToShardCommand").sc(HM).build(){},Nf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","TagResource",{}).n("KinesisClient","TagResourceCommand").sc(zM).build(){},Df=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","UntagResource",{}).n("KinesisClient","UntagResourceCommand").sc(VM).build(){},Mf=class extends V.Command.classBuilder().ep(Z).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","UpdateAccountSettings",{}).n("KinesisClient","UpdateAccountSettingsCommand").sc(KM).build(){},Ff=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","UpdateMaxRecordSize",{}).n("KinesisClient","UpdateMaxRecordSizeCommand").sc(GM).build(){},Lf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","UpdateShardCount",{}).n("KinesisClient","UpdateShardCountCommand").sc(WM).build(){},Bf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","UpdateStreamMode",{}).n("KinesisClient","UpdateStreamModeCommand").sc(QM).build(){},Uf=class extends V.Command.classBuilder().ep({...Z,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(e,r,n,s){return[J.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("Kinesis_20131202","UpdateStreamWarmThroughput",{}).n("KinesisClient","UpdateStreamWarmThroughputCommand").sc(YM).build(){},R7={AddTagsToStreamCommand:nf,CreateStreamCommand:sf,DecreaseStreamRetentionPeriodCommand:of,DeleteResourcePolicyCommand:af,DeleteStreamCommand:cf,DeregisterStreamConsumerCommand:uf,DescribeAccountSettingsCommand:lf,DescribeLimitsCommand:df,DescribeStreamCommand:Wo,DescribeStreamConsumerCommand:ff,DescribeStreamSummaryCommand:pf,DisableEnhancedMonitoringCommand:hf,EnableEnhancedMonitoringCommand:mf,GetRecordsCommand:gf,GetResourcePolicyCommand:yf,GetShardIteratorCommand:Sf,IncreaseStreamRetentionPeriodCommand:Ef,ListShardsCommand:bf,ListStreamConsumersCommand:Ma,ListStreamsCommand:Fa,ListTagsForResourceCommand:_f,ListTagsForStreamCommand:wf,MergeShardsCommand:xf,PutRecordCommand:Cf,PutRecordsCommand:Af,PutResourcePolicyCommand:vf,RegisterStreamConsumerCommand:Tf,RemoveTagsFromStreamCommand:Rf,SplitShardCommand:If,StartStreamEncryptionCommand:Pf,StopStreamEncryptionCommand:Of,SubscribeToShardCommand:kf,TagResourceCommand:Nf,UntagResourceCommand:Df,UpdateAccountSettingsCommand:Mf,UpdateMaxRecordSizeCommand:Ff,UpdateShardCountCommand:Lf,UpdateStreamModeCommand:Bf,UpdateStreamWarmThroughputCommand:Uf},$f=class extends Go{};V.createAggregatedClient(R7,$f);var I7=Da.createPaginator(Go,Ma,"NextToken","NextToken","MaxResults"),P7=Da.createPaginator(Go,Fa,"NextToken","NextToken","Limit"),JM=async(t,e)=>{let r;try{let n=await t.send(new Wo(e));r=n;try{if(n.StreamDescription.StreamStatus==="ACTIVE")return{state:Ar.WaiterState.SUCCESS,reason:r}}catch{}}catch(n){r=n}return{state:Ar.WaiterState.RETRY,reason:r}},O7=async(t,e)=>{let r={minDelay:10,maxDelay:120};return Ar.createWaiter({...r,...t},e,JM)},k7=async(t,e)=>{let r={minDelay:10,maxDelay:120},n=await Ar.createWaiter({...r,...t},e,JM);return Ar.checkExceptions(n)},XM=async(t,e)=>{let r;try{r=await t.send(new Wo(e))}catch(n){if(r=n,n.name&&n.name=="ResourceNotFoundException")return{state:Ar.WaiterState.SUCCESS,reason:r}}return{state:Ar.WaiterState.RETRY,reason:r}},N7=async(t,e)=>{let r={minDelay:10,maxDelay:120};return Ar.createWaiter({...r,...t},e,XM)},D7=async(t,e)=>{let r={minDelay:10,maxDelay:120},n=await Ar.createWaiter({...r,...t},e,XM);return Ar.checkExceptions(n)},M7={ACTIVE:"ACTIVE",CREATING:"CREATING",DELETING:"DELETING"},F7={ON_DEMAND:"ON_DEMAND",PROVISIONED:"PROVISIONED"},L7={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_UNTIL_EARLIEST_ALLOWED_END:"ENABLED_UNTIL_EARLIEST_ALLOWED_END"},B7={KMS:"KMS",NONE:"NONE"},U7={ALL:"ALL",INCOMING_BYTES:"IncomingBytes",INCOMING_RECORDS:"IncomingRecords",ITERATOR_AGE_MILLISECONDS:"IteratorAgeMilliseconds",OUTGOING_BYTES:"OutgoingBytes",OUTGOING_RECORDS:"OutgoingRecords",READ_PROVISIONED_THROUGHPUT_EXCEEDED:"ReadProvisionedThroughputExceeded",WRITE_PROVISIONED_THROUGHPUT_EXCEEDED:"WriteProvisionedThroughputExceeded"},$7={ACTIVE:"ACTIVE",CREATING:"CREATING",DELETING:"DELETING",UPDATING:"UPDATING"},q7={AFTER_SEQUENCE_NUMBER:"AFTER_SEQUENCE_NUMBER",AT_SEQUENCE_NUMBER:"AT_SEQUENCE_NUMBER",AT_TIMESTAMP:"AT_TIMESTAMP",LATEST:"LATEST",TRIM_HORIZON:"TRIM_HORIZON"},j7={AFTER_SHARD_ID:"AFTER_SHARD_ID",AT_LATEST:"AT_LATEST",AT_TIMESTAMP:"AT_TIMESTAMP",AT_TRIM_HORIZON:"AT_TRIM_HORIZON",FROM_TIMESTAMP:"FROM_TIMESTAMP",FROM_TRIM_HORIZON:"FROM_TRIM_HORIZON"},H7={DISABLED:"DISABLED",ENABLED:"ENABLED"},z7={UNIFORM_SCALING:"UNIFORM_SCALING"};Object.defineProperty(S,"$Command",{enumerable:!0,get:function(){return V.Command}});Object.defineProperty(S,"__Client",{enumerable:!0,get:function(){return V.Client}});S.AccessDeniedException=qd;S.AccessDeniedException$=ON;S.AddTagsToStream$=fM;S.AddTagsToStreamCommand=nf;S.AddTagsToStreamInput$=kN;S.ChildShard$=NN;S.Consumer$=kS;S.ConsumerDescription$=DN;S.ConsumerStatus=M7;S.CreateStream$=pM;S.CreateStreamCommand=sf;S.CreateStreamInput$=MN;S.DecreaseStreamRetentionPeriod$=hM;S.DecreaseStreamRetentionPeriodCommand=of;S.DecreaseStreamRetentionPeriodInput$=FN;S.DeleteResourcePolicy$=mM;S.DeleteResourcePolicyCommand=af;S.DeleteResourcePolicyInput$=LN;S.DeleteStream$=gM;S.DeleteStreamCommand=cf;S.DeleteStreamInput$=BN;S.DeregisterStreamConsumer$=yM;S.DeregisterStreamConsumerCommand=uf;S.DeregisterStreamConsumerInput$=UN;S.DescribeAccountSettings$=SM;S.DescribeAccountSettingsCommand=lf;S.DescribeAccountSettingsInput$=$N;S.DescribeAccountSettingsOutput$=qN;S.DescribeLimits$=EM;S.DescribeLimitsCommand=df;S.DescribeLimitsInput$=jN;S.DescribeLimitsOutput$=HN;S.DescribeStream$=bM;S.DescribeStreamCommand=Wo;S.DescribeStreamConsumer$=_M;S.DescribeStreamConsumerCommand=ff;S.DescribeStreamConsumerInput$=zN;S.DescribeStreamConsumerOutput$=VN;S.DescribeStreamInput$=KN;S.DescribeStreamOutput$=GN;S.DescribeStreamSummary$=wM;S.DescribeStreamSummaryCommand=pf;S.DescribeStreamSummaryInput$=WN;S.DescribeStreamSummaryOutput$=QN;S.DisableEnhancedMonitoring$=xM;S.DisableEnhancedMonitoringCommand=hf;S.DisableEnhancedMonitoringInput$=YN;S.EnableEnhancedMonitoring$=CM;S.EnableEnhancedMonitoringCommand=mf;S.EnableEnhancedMonitoringInput$=JN;S.EncryptionType=B7;S.EnhancedMetrics$=XN;S.EnhancedMonitoringOutput$=NS;S.ExpiredIteratorException=Gd;S.ExpiredIteratorException$=ZN;S.ExpiredNextTokenException=Wd;S.ExpiredNextTokenException$=eD;S.GetRecords$=AM;S.GetRecordsCommand=gf;S.GetRecordsInput$=tD;S.GetRecordsOutput$=rD;S.GetResourcePolicy$=vM;S.GetResourcePolicyCommand=yf;S.GetResourcePolicyInput$=nD;S.GetResourcePolicyOutput$=sD;S.GetShardIterator$=TM;S.GetShardIteratorCommand=Sf;S.GetShardIteratorInput$=oD;S.GetShardIteratorOutput$=iD;S.HashKeyRange$=DS;S.IncreaseStreamRetentionPeriod$=RM;S.IncreaseStreamRetentionPeriodCommand=Ef;S.IncreaseStreamRetentionPeriodInput$=aD;S.InternalFailureException=Qd;S.InternalFailureException$=MS;S.InvalidArgumentException=jd;S.InvalidArgumentException$=cD;S.KMSAccessDeniedException=Yd;S.KMSAccessDeniedException$=FS;S.KMSDisabledException=Jd;S.KMSDisabledException$=LS;S.KMSInvalidStateException=Xd;S.KMSInvalidStateException$=BS;S.KMSNotFoundException=Zd;S.KMSNotFoundException$=US;S.KMSOptInRequired=ef;S.KMSOptInRequired$=$S;S.KMSThrottlingException=tf;S.KMSThrottlingException$=qS;S.Kinesis=$f;S.KinesisClient=Go;S.KinesisServiceException=Le;S.KinesisServiceException$=oM;S.LimitExceededException=Hd;S.LimitExceededException$=uD;S.ListShards$=IM;S.ListShardsCommand=bf;S.ListShardsInput$=lD;S.ListShardsOutput$=dD;S.ListStreamConsumers$=PM;S.ListStreamConsumersCommand=Ma;S.ListStreamConsumersInput$=fD;S.ListStreamConsumersOutput$=pD;S.ListStreams$=OM;S.ListStreamsCommand=Fa;S.ListStreamsInput$=hD;S.ListStreamsOutput$=mD;S.ListTagsForResource$=kM;S.ListTagsForResourceCommand=_f;S.ListTagsForResourceInput$=gD;S.ListTagsForResourceOutput$=yD;S.ListTagsForStream$=NM;S.ListTagsForStreamCommand=wf;S.ListTagsForStreamInput$=SD;S.ListTagsForStreamOutput$=ED;S.MergeShards$=DM;S.MergeShardsCommand=xf;S.MergeShardsInput$=bD;S.MetricsName=U7;S.MinimumThroughputBillingCommitmentInput$=_D;S.MinimumThroughputBillingCommitmentInputStatus=H7;S.MinimumThroughputBillingCommitmentOutput$=jS;S.MinimumThroughputBillingCommitmentOutputStatus=L7;S.ProvisionedThroughputExceededException=rf;S.ProvisionedThroughputExceededException$=wD;S.PutRecord$=MM;S.PutRecordCommand=Cf;S.PutRecordInput$=xD;S.PutRecordOutput$=CD;S.PutRecords$=FM;S.PutRecordsCommand=Af;S.PutRecordsInput$=AD;S.PutRecordsOutput$=vD;S.PutRecordsRequestEntry$=TD;S.PutRecordsResultEntry$=RD;S.PutResourcePolicy$=LM;S.PutResourcePolicyCommand=vf;S.PutResourcePolicyInput$=ID;S.RegisterStreamConsumer$=BM;S.RegisterStreamConsumerCommand=Tf;S.RegisterStreamConsumerInput$=OD;S.RegisterStreamConsumerOutput$=kD;S.RemoveTagsFromStream$=UM;S.RemoveTagsFromStreamCommand=Rf;S.RemoveTagsFromStreamInput$=ND;S.ResourceInUseException=zd;S.ResourceInUseException$=HS;S.ResourceNotFoundException=Vd;S.ResourceNotFoundException$=zS;S.ScalingType=z7;S.SequenceNumberRange$=DD;S.Shard$=MD;S.ShardFilter$=FD;S.ShardFilterType=j7;S.ShardIteratorType=q7;S.SplitShard$=$M;S.SplitShardCommand=If;S.SplitShardInput$=LD;S.StartStreamEncryption$=qM;S.StartStreamEncryptionCommand=Pf;S.StartStreamEncryptionInput$=UD;S.StartingPosition$=BD;S.StopStreamEncryption$=jM;S.StopStreamEncryptionCommand=Of;S.StopStreamEncryptionInput$=$D;S.StreamDescription$=qD;S.StreamDescriptionSummary$=jD;S.StreamMode=F7;S.StreamModeDetails$=Zo;S.StreamStatus=$7;S.StreamSummary$=HD;S.SubscribeToShard$=HM;S.SubscribeToShardCommand=kf;S.SubscribeToShardEvent$=zD;S.SubscribeToShardEventStream$=dM;S.SubscribeToShardInput$=VD;S.SubscribeToShardOutput$=KD;S.Tag$=GD;S.TagResource$=zM;S.TagResourceCommand=Nf;S.TagResourceInput$=WD;S.UntagResource$=VM;S.UntagResourceCommand=Df;S.UntagResourceInput$=QD;S.UpdateAccountSettings$=KM;S.UpdateAccountSettingsCommand=Mf;S.UpdateAccountSettingsInput$=YD;S.UpdateAccountSettingsOutput$=JD;S.UpdateMaxRecordSize$=GM;S.UpdateMaxRecordSizeCommand=Ff;S.UpdateMaxRecordSizeInput$=XD;S.UpdateShardCount$=WM;S.UpdateShardCountCommand=Lf;S.UpdateShardCountInput$=ZD;S.UpdateShardCountOutput$=eM;S.UpdateStreamMode$=QM;S.UpdateStreamModeCommand=Bf;S.UpdateStreamModeInput$=tM;S.UpdateStreamWarmThroughput$=YM;S.UpdateStreamWarmThroughputCommand=Uf;S.UpdateStreamWarmThroughputInput$=rM;S.UpdateStreamWarmThroughputOutput$=nM;S.ValidationException=Kd;S.ValidationException$=sM;S.WarmThroughputObject$=VS;S._Record$=PD;S.paginateListStreamConsumers=I7;S.paginateListStreams=P7;S.waitForStreamExists=O7;S.waitForStreamNotExists=N7;S.waitUntilStreamExists=k7;S.waitUntilStreamNotExists=D7});var eF=x((dle,V7)=>{V7.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hpexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdelex:{arity:-5,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var ei=x(Mt=>{"use strict";var K7=Mt&&Mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.getKeyIndexes=Mt.hasFlag=Mt.exists=Mt.list=void 0;var Kf=K7(eF());Mt.list=Object.keys(Kf.default);var KS={};Mt.list.forEach(t=>{KS[t]=Kf.default[t].flags.reduce(function(e,r){return e[r]=!0,e},{})});function G7(t){return!!Kf.default[t]}Mt.exists=G7;function W7(t,e){if(!KS[t])throw new Error("Unknown command "+t);return!!KS[t][e]}Mt.hasFlag=W7;function Q7(t,e,r){let n=Kf.default[t];if(!n)throw new Error("Unknown command "+t);if(!Array.isArray(e))throw new Error("Expect args to be an array");let s=[],o=!!(r&&r.parseExternalKey),i=(c,u)=>{let d=[],l=Number(c[u]);for(let m=0;m<l;m++)d.push(m+u+1);return d},a=(c,u,d)=>{for(let l=u;l<c.length-1;l+=1)if(String(c[l]).toLowerCase()===d.toLowerCase())return l+1;return null};switch(t){case"zunionstore":case"zinterstore":case"zdiffstore":s.push(0,...i(e,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":s.push(...i(e,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{s.push(...i(e,0));break}case"georadius":{s.push(0);let c=a(e,5,"STORE");c&&s.push(c);let u=a(e,5,"STOREDIST");u&&s.push(u);break}case"georadiusbymember":{s.push(0);let c=a(e,4,"STORE");c&&s.push(c);let u=a(e,4,"STOREDIST");u&&s.push(u);break}case"sort":case"sort_ro":s.push(0);for(let c=1;c<e.length-1;c++){let u=e[c];if(typeof u!="string")continue;let d=u.toUpperCase();d==="GET"?(c+=1,u=e[c],u!=="#"&&(o?s.push([c,tF(u)]):s.push(c))):d==="BY"?(c+=1,o?s.push([c,tF(e[c])]):s.push(c)):d==="STORE"&&(c+=1,s.push(c))}break;case"migrate":if(e[2]==="")for(let c=5;c<e.length-1;c++){let u=e[c];if(typeof u=="string"&&u.toUpperCase()==="KEYS"){for(let d=c+1;d<e.length;d++)s.push(d);break}}else s.push(2);break;case"xreadgroup":case"xread":for(let c=t==="xread"?0:3;c<e.length-1;c++)if(String(e[c]).toUpperCase()==="STREAMS"){for(let u=c+1;u<=c+(e.length-1-c)/2;u++)s.push(u);break}break;default:if(n.step>0){let c=n.keyStart-1,u=n.keyStop>0?n.keyStop:e.length+n.keyStop+1;for(let d=c;d<u;d+=n.step)s.push(d)}break}return s}Mt.getKeyIndexes=Q7;function tF(t){typeof t!="string"&&(t=String(t));let e=t.indexOf("->");return e===-1?t.length:e}});var rF=x(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.tryCatch=Hn.errorObj=void 0;Hn.errorObj={e:{}};var GS;function Y7(t,e){try{let r=GS;return GS=null,r.apply(this,arguments)}catch(r){return Hn.errorObj.e=r,Hn.errorObj}}function J7(t){return GS=t,Y7}Hn.tryCatch=J7});var zn=x(WS=>{"use strict";Object.defineProperty(WS,"__esModule",{value:!0});var ti=rF();function nF(t){setTimeout(function(){throw t},0)}function X7(t,e,r){return typeof e=="function"&&t.then(n=>{let s;r!==void 0&&Object(r).spread&&Array.isArray(n)?s=ti.tryCatch(e).apply(void 0,[null].concat(n)):s=n===void 0?ti.tryCatch(e)(null):ti.tryCatch(e)(null,n),s===ti.errorObj&&nF(s.e)},n=>{if(!n){let o=new Error(n+"");Object.assign(o,{cause:n}),n=o}let s=ti.tryCatch(e)(n);s===ti.errorObj&&nF(s.e)}),t}WS.default=X7});var iF=x((mle,oF)=>{"use strict";var sF=require("assert"),$a=require("util");function ri(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}$a.inherits(ri,Error);Object.defineProperty(ri.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function QS(t,e,r){sF(e),sF.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let n=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=n,this.offset=r,this.buffer=e}$a.inherits(QS,ri);Object.defineProperty(QS.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function YS(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let e=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=e}$a.inherits(YS,ri);Object.defineProperty(YS.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function Gf(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}$a.inherits(Gf,ri);Object.defineProperty(Gf.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function JS(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}$a.inherits(JS,Gf);Object.defineProperty(JS.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});oF.exports={RedisError:ri,ParserError:QS,ReplyError:YS,AbortError:Gf,InterruptError:JS}});var uF=x((gle,cF)=>{"use strict";var aF=require("assert"),ni=class extends Error{get name(){return this.constructor.name}},XS=class extends ni{constructor(e,r,n){aF(r),aF.strictEqual(typeof n,"number");let s=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=s,this.offset=n,this.buffer=r}get name(){return this.constructor.name}},ZS=class extends ni{constructor(e){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=r}get name(){return this.constructor.name}},Wf=class extends ni{get name(){return this.constructor.name}},eE=class extends Wf{get name(){return this.constructor.name}};cF.exports={RedisError:ni,ParserError:XS,ReplyError:ZS,AbortError:Wf,InterruptError:eE}});var Hs=x((yle,lF)=>{"use strict";var Z7=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?iF():uF();lF.exports=Z7});var qa=x((Sle,tE)=>{var dF=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],eQ=function(e){for(var r,n=0,s=0,o=[],i=e.length;n<i;n++)r=e.charCodeAt(n),r<128?o[s++]=r:r<2048?(o[s++]=r>>6|192,o[s++]=r&63|128):(r&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++n)&1023),o[s++]=r>>18|240,o[s++]=r>>12&63|128,o[s++]=r>>6&63|128,o[s++]=r&63|128):(o[s++]=r>>12|224,o[s++]=r>>6&63|128,o[s++]=r&63|128);return o},fF=tE.exports=function(e){for(var r,n=0,s=-1,o=0,i=0,a=typeof e=="string"?eQ(e):e,c=a.length;n<c;){if(r=a[n++],s===-1)r===123&&(s=n);else if(r!==125)i=dF[(r^i>>8)&255]^i<<8;else if(n-1!==s)return i&16383;o=dF[(r^o>>8)&255]^o<<8}return o&16383};tE.exports.generateMulti=function(e){for(var r=1,n=e.length,s=fF(e[0]);r<n;)if(fF(e[r++])!==s)return-1;return s}});var bF=x((Ele,EF)=>{var hF=9007199254740991,tQ="[object Arguments]",rQ="[object Function]",nQ="[object GeneratorFunction]",sQ=/^(?:0|[1-9]\d*)$/;function mF(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function oQ(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var ja=Object.prototype,Ha=ja.hasOwnProperty,gF=ja.toString,iQ=ja.propertyIsEnumerable,pF=Math.max;function aQ(t,e){var r=yQ(t)||gQ(t)?oQ(t.length,String):[],n=r.length,s=!!n;for(var o in t)(e||Ha.call(t,o))&&!(s&&(o=="length"||SF(o,n)))&&r.push(o);return r}function cQ(t,e,r,n){return t===void 0||rE(t,ja[r])&&!Ha.call(n,r)?e:t}function uQ(t,e,r){var n=t[e];(!(Ha.call(t,e)&&rE(n,r))||r===void 0&&!(e in t))&&(t[e]=r)}function lQ(t){if(!sE(t))return mQ(t);var e=hQ(t),r=[];for(var n in t)n=="constructor"&&(e||!Ha.call(t,n))||r.push(n);return r}function yF(t,e){return e=pF(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,s=pF(r.length-e,0),o=Array(s);++n<s;)o[n]=r[e+n];n=-1;for(var i=Array(e+1);++n<e;)i[n]=r[n];return i[e]=o,mF(t,this,i)}}function dQ(t,e,r,n){r||(r={});for(var s=-1,o=e.length;++s<o;){var i=e[s],a=n?n(r[i],t[i],i,r,t):void 0;uQ(r,i,a===void 0?t[i]:a)}return r}function fQ(t){return yF(function(e,r){var n=-1,s=r.length,o=s>1?r[s-1]:void 0,i=s>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(s--,o):void 0,i&&pQ(r[0],r[1],i)&&(o=s<3?void 0:o,s=1),e=Object(e);++n<s;){var a=r[n];a&&t(e,a,n,o)}return e})}function SF(t,e){return e=e??hF,!!e&&(typeof t=="number"||sQ.test(t))&&t>-1&&t%1==0&&t<e}function pQ(t,e,r){if(!sE(r))return!1;var n=typeof e;return(n=="number"?nE(r)&&SF(e,r.length):n=="string"&&e in r)?rE(r[e],t):!1}function hQ(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ja;return t===r}function mQ(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function rE(t,e){return t===e||t!==t&&e!==e}function gQ(t){return SQ(t)&&Ha.call(t,"callee")&&(!iQ.call(t,"callee")||gF.call(t)==tQ)}var yQ=Array.isArray;function nE(t){return t!=null&&bQ(t.length)&&!EQ(t)}function SQ(t){return _Q(t)&&nE(t)}function EQ(t){var e=sE(t)?gF.call(t):"";return e==rQ||e==nQ}function bQ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=hF}function sE(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function _Q(t){return!!t&&typeof t=="object"}var wQ=fQ(function(t,e,r,n){dQ(e,CQ(e),t,n)}),xQ=yF(function(t){return t.push(void 0,cQ),mF(wQ,void 0,t)});function CQ(t){return nE(t)?aQ(t,!0):lQ(t)}EF.exports=xQ});var xF=x((ble,wF)=>{var AQ=9007199254740991,vQ="[object Arguments]",TQ="[object Function]",RQ="[object GeneratorFunction]",oE=Object.prototype,IQ=oE.hasOwnProperty,_F=oE.toString,PQ=oE.propertyIsEnumerable;function OQ(t){return NQ(t)&&IQ.call(t,"callee")&&(!PQ.call(t,"callee")||_F.call(t)==vQ)}function kQ(t){return t!=null&&MQ(t.length)&&!DQ(t)}function NQ(t){return LQ(t)&&kQ(t)}function DQ(t){var e=FQ(t)?_F.call(t):"";return e==TQ||e==RQ}function MQ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=AQ}function FQ(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function LQ(t){return!!t&&typeof t=="object"}wF.exports=OQ});var Qf=x(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.isArguments=Vn.defaults=Vn.noop=void 0;var BQ=bF();Vn.defaults=BQ;var UQ=xF();Vn.isArguments=UQ;function $Q(){}Vn.noop=$Q});var AF=x((wle,CF)=>{var si=1e3,oi=si*60,ii=oi*60,zs=ii*24,qQ=zs*7,jQ=zs*365.25;CF.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return HQ(t);if(r==="number"&&isFinite(t))return e.long?VQ(t):zQ(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function HQ(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*jQ;case"weeks":case"week":case"w":return r*qQ;case"days":case"day":case"d":return r*zs;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ii;case"minutes":case"minute":case"mins":case"min":case"m":return r*oi;case"seconds":case"second":case"secs":case"sec":case"s":return r*si;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function zQ(t){var e=Math.abs(t);return e>=zs?Math.round(t/zs)+"d":e>=ii?Math.round(t/ii)+"h":e>=oi?Math.round(t/oi)+"m":e>=si?Math.round(t/si)+"s":t+"ms"}function VQ(t){var e=Math.abs(t);return e>=zs?Yf(t,e,zs,"day"):e>=ii?Yf(t,e,ii,"hour"):e>=oi?Yf(t,e,oi,"minute"):e>=si?Yf(t,e,si,"second"):t+" ms"}function Yf(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var iE=x((xle,vF)=>{function KQ(t){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=s,r.enabled=a,r.humanize=AF(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let l=0;for(let m=0;m<d.length;m++)l=(l<<5)-l+d.charCodeAt(m),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(d){let l,m=null,h,g;function C(...T){if(!C.enabled)return;let R=C,O=Number(new Date),D=O-(l||O);R.diff=D,R.prev=l,R.curr=O,l=O,T[0]=r.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let M=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(Q,ve)=>{if(Q==="%%")return"%";M++;let G=r.formatters[ve];if(typeof G=="function"){let ne=T[M];Q=G.call(R,ne),T.splice(M,1),M--}return Q}),r.formatArgs.call(R,T),(R.log||r.log).apply(R,T)}return C.namespace=d,C.useColors=r.useColors(),C.color=r.selectColor(d),C.extend=n,C.destroy=r.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(d)),g),set:T=>{m=T}}),typeof r.init=="function"&&r.init(C),C}function n(d,l){let m=r(this.namespace+(typeof l>"u"?":":l)+d);return m.log=this.log,m}function s(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let l=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let m of l)m[0]==="-"?r.skips.push(m.slice(1)):r.names.push(m)}function o(d,l){let m=0,h=0,g=-1,C=0;for(;m<d.length;)if(h<l.length&&(l[h]===d[m]||l[h]==="*"))l[h]==="*"?(g=h,C=m,h++):(m++,h++);else if(g!==-1)h=g+1,C++,m=C;else return!1;for(;h<l.length&&l[h]==="*";)h++;return h===l.length}function i(){let d=[...r.names,...r.skips.map(l=>"-"+l)].join(",");return r.enable(""),d}function a(d){for(let l of r.skips)if(o(d,l))return!1;for(let l of r.names)if(o(d,l))return!0;return!1}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}vF.exports=KQ});var TF=x((It,Jf)=>{It.formatArgs=WQ;It.save=QQ;It.load=YQ;It.useColors=GQ;It.storage=JQ();It.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();It.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function GQ(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function WQ(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Jf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}It.log=console.debug||console.log||(()=>{});function QQ(t){try{t?It.storage.setItem("debug",t):It.storage.removeItem("debug")}catch{}}function YQ(){let t;try{t=It.storage.getItem("debug")||It.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function JQ(){try{return localStorage}catch{}}Jf.exports=iE()(It);var{formatters:XQ}=Jf.exports;XQ.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var IF=x((ze,Zf)=>{var ZQ=require("tty"),Xf=require("util");ze.init=iY;ze.log=nY;ze.formatArgs=tY;ze.save=sY;ze.load=oY;ze.useColors=eY;ze.destroy=Xf.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ze.colors=[6,2,3,4,5,1];try{let t=require("supports-color");t&&(t.stderr||t).level>=2&&(ze.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ze.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function eY(){return"colors"in ze.inspectOpts?!!ze.inspectOpts.colors:ZQ.isatty(process.stderr.fd)}function tY(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${s};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(s+"m+"+Zf.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=rY()+e+" "+t[0]}function rY(){return ze.inspectOpts.hideDate?"":new Date().toISOString()+" "}function nY(...t){return process.stderr.write(Xf.formatWithOptions(ze.inspectOpts,...t)+`
`)}function sY(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function oY(){return process.env.DEBUG}function iY(t){t.inspectOpts={};let e=Object.keys(ze.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=ze.inspectOpts[e[r]]}Zf.exports=iE()(ze);var{formatters:RF}=Zf.exports;RF.o=function(t){return this.inspectOpts.colors=this.useColors,Xf.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};RF.O=function(t){return this.inspectOpts.colors=this.useColors,Xf.inspect(t,this.inspectOpts)}});var PF=x((Cle,aE)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?aE.exports=TF():aE.exports=IF()});var NF=x(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.genRedactedString=Gr.getStringValue=Gr.MAX_ARGUMENT_LENGTH=void 0;var aY=PF(),cE=200;Gr.MAX_ARGUMENT_LENGTH=cE;var cY="ioredis";function OF(t){if(t!==null)switch(typeof t){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(t))return t.toString("hex");if(Array.isArray(t))return t.join(",");try{return JSON.stringify(t)}catch{return}case"string":return t}}Gr.getStringValue=OF;function kF(t,e){let{length:r}=t;return r<=e?t:t.slice(0,e)+' ... <REDACTED full-length="'+r+'">'}Gr.genRedactedString=kF;function uY(t){let e=(0,aY.default)(`${cY}:${t}`);function r(...n){if(e.enabled){for(let s=1;s<n.length;s++){let o=OF(n[s]);typeof o=="string"&&o.length>cE&&(n[s]=kF(o,cE))}return e.apply(null,n)}}return Object.defineProperties(r,{namespace:{get(){return e.namespace}},enabled:{get(){return e.enabled}},destroy:{get(){return e.destroy}},log:{get(){return e.log},set(n){e.log=n}}}),r}Gr.default=uY});var MF=x(uE=>{"use strict";Object.defineProperty(uE,"__esModule",{value:!0});var DF=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,lY={RedisCloudFixed:{ca:DF},RedisCloudFlexible:{ca:DF}};uE.default=lY});var Je=x(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.noop=X.defaults=X.Debug=X.getPackageMeta=X.zipMap=X.CONNECTION_CLOSED_ERROR_MSG=X.shuffle=X.sample=X.resolveTLSProfile=X.parseURL=X.optimizeErrorStack=X.toArg=X.convertMapToArray=X.convertObjectToArray=X.timeout=X.packObject=X.isInt=X.wrapMultiResult=X.convertBufferToString=void 0;var dY=require("fs"),fY=require("path"),FF=require("url"),lE=Qf();Object.defineProperty(X,"defaults",{enumerable:!0,get:function(){return lE.defaults}});Object.defineProperty(X,"noop",{enumerable:!0,get:function(){return lE.noop}});var pY=NF();X.Debug=pY.default;var hY=MF();function LF(t,e){if(t instanceof Buffer)return t.toString(e);if(Array.isArray(t)){let r=t.length,n=Array(r);for(let s=0;s<r;++s)n[s]=t[s]instanceof Buffer&&e==="utf8"?t[s].toString():LF(t[s],e);return n}return t}X.convertBufferToString=LF;function mY(t){if(!t)return null;let e=[],r=t.length;for(let n=0;n<r;++n){let s=t[n];s instanceof Error?e.push([s]):e.push([null,s])}return e}X.wrapMultiResult=mY;function BF(t){let e=parseFloat(t);return!isNaN(t)&&(e|0)===e}X.isInt=BF;function gY(t){let e={},r=t.length;for(let n=1;n<r;n+=2)e[t[n-1]]=t[n];return e}X.packObject=gY;function yY(t,e){let r=null,n=function(){r&&(clearTimeout(r),r=null,t.apply(this,arguments))};return r=setTimeout(n,e,new Error("timeout")),n}X.timeout=yY;function SY(t){let e=[],r=Object.keys(t);for(let n=0,s=r.length;n<s;n++)e.push(r[n],t[r[n]]);return e}X.convertObjectToArray=SY;function EY(t){let e=[],r=0;return t.forEach(function(n,s){e[r]=s,e[r+1]=n,r+=2}),e}X.convertMapToArray=EY;function bY(t){return t===null||typeof t>"u"?"":String(t)}X.toArg=bY;function _Y(t,e,r){let n=e.split(`
`),s="",o;for(o=1;o<n.length&&n[o].indexOf(r)!==-1;++o);for(let i=o;i<n.length;++i)s+=`
`+n[i];if(t.stack){let i=t.stack.indexOf(`
`);t.stack=t.stack.slice(0,i)+s}return t}X.optimizeErrorStack=_Y;function wY(t){if(BF(t))return{port:t};let e=(0,FF.parse)(t,!0,!0);!e.slashes&&t[0]!=="/"&&(t="//"+t,e=(0,FF.parse)(t,!0,!0));let r=e.query||{},n={};if(e.auth){let s=e.auth.indexOf(":");n.username=s===-1?e.auth:e.auth.slice(0,s),n.password=s===-1?"":e.auth.slice(s+1)}if(e.pathname&&(e.protocol==="redis:"||e.protocol==="rediss:"?e.pathname.length>1&&(n.db=e.pathname.slice(1)):n.path=e.pathname),e.host&&(n.host=e.hostname),e.port&&(n.port=e.port),typeof r.family=="string"){let s=Number.parseInt(r.family,10);Number.isNaN(s)||(n.family=s)}return(0,lE.defaults)(n,r),n}X.parseURL=wY;function xY(t){let e=t?.tls;typeof e=="string"&&(e={profile:e});let r=hY.default[e?.profile];return r&&(e=Object.assign({},r,e),delete e.profile,t=Object.assign({},t,{tls:e})),t}X.resolveTLSProfile=xY;function CY(t,e=0){let r=t.length;return e>=r?null:t[e+Math.floor(Math.random()*(r-e))]}X.sample=CY;function AY(t){let e=t.length;for(;e>0;){let r=Math.floor(Math.random()*e);e--,[t[e],t[r]]=[t[r],t[e]]}return t}X.shuffle=AY;X.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function vY(t,e){let r=new Map;return t.forEach((n,s)=>{r.set(n,e[s])}),r}X.zipMap=vY;var ai=null;async function TY(){if(ai)return ai;try{let t=(0,fY.resolve)(__dirname,"..","..","package.json"),e=await dY.promises.readFile(t,"utf8");return ai={version:JSON.parse(e).version},ai}catch{return ai={version:"error-fetching-version"},ai}}X.getPackageMeta=TY});var Wr=x(fE=>{"use strict";Object.defineProperty(fE,"__esModule",{value:!0});var UF=ei(),RY=qa(),IY=zn(),Vs=Je(),vr=class t{constructor(e,r=[],n={},s){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=r.flat(),this.callback=s,this.initPromise(),n.keyPrefix){let o=n.keyPrefix instanceof Buffer,i=o?n.keyPrefix:null;this._iterateKeys(a=>a instanceof Buffer?(i===null&&(i=Buffer.from(n.keyPrefix)),Buffer.concat([i,a])):o?Buffer.concat([n.keyPrefix,Buffer.from(String(a))]):n.keyPrefix+a)}n.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,r){return!!this.getFlagMap()[e][r]}static setArgumentTransformer(e,r){this._transformer.argument[e]=r}static setReplyTransformer(e,r){this._transformer.reply[e]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(t.FLAGS).reduce((e,r)=>(e[r]={},t.FLAGS[r].forEach(n=>{e[r][n]=!0}),e),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let e=this.getKeys()[0];this.slot=e==null?null:RY(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let r,n="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let s=new dE;s.push(n);for(let o=0;o<this.args.length;++o){let i=this.args[o];i instanceof Buffer?i.length===0?s.push(`$0\r
\r
`):(s.push("$"+i.length+`\r
`),s.push(i),s.push(`\r
`)):s.push("$"+Buffer.byteLength(i)+`\r
`+i+`\r
`)}r=s.toBuffer()}else{r=n;for(let s=0;s<this.args.length;++s){let o=this.args[s];r+="$"+Buffer.byteLength(o)+`\r
`+o+`\r
`}}return r}stringifyArguments(){for(let e=0;e<this.args.length;++e){let r=this.args[e];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,Vs.toArg)(r))}}transformReply(e){this.replyEncoding&&(e=(0,Vs.convertBufferToString)(e,this.replyEncoding));let r=t._transformer.reply[this.name];return r&&(e=r(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},e))}initPromise(){let e=new Promise((r,n)=>{if(!this.transformed){this.transformed=!0;let s=t._transformer.argument[this.name];s&&(this.args=s(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.errorStack?this.reject=s=>{n((0,Vs.optimizeErrorStack)(s,this.errorStack.stack,__dirname))}:this.reject=n});this.promise=(0,IY.default)(e,this.callback)}_iterateKeys(e=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,UF.exists)(this.name))){let r=(0,UF.getKeyIndexes)(this.name,this.args);for(let n of r)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}_convertValue(e){return r=>{try{let n=this._commandTimeoutTimer;n&&(clearTimeout(n),delete this._commandTimeoutTimer),e(this.transformReply(r)),this.isResolved=!0}catch(n){this.reject(n)}return this.promise}}};fE.default=vr;vr.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"]};vr._transformer={argument:{},reply:{}};var $F=function(t){if(t.length===1){if(t[0]instanceof Map)return(0,Vs.convertMapToArray)(t[0]);if(typeof t[0]=="object"&&t[0]!==null)return(0,Vs.convertObjectToArray)(t[0])}return t},qF=function(t){if(t.length===2){if(t[1]instanceof Map)return[t[0]].concat((0,Vs.convertMapToArray)(t[1]));if(typeof t[1]=="object"&&t[1]!==null)return[t[0]].concat((0,Vs.convertObjectToArray)(t[1]))}return t};vr.setArgumentTransformer("mset",$F);vr.setArgumentTransformer("msetnx",$F);vr.setArgumentTransformer("hset",qF);vr.setArgumentTransformer("hmset",qF);vr.setReplyTransformer("hgetall",function(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2){let n=t[r],s=t[r+1];n in e?Object.defineProperty(e,n,{value:s,configurable:!0,enumerable:!0,writable:!0}):e[n]=s}return e}return t});var dE=class{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),r=0;for(let n of this.items){let s=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,r):e.write(n,r,s),r+=s}return e}}});var jF=x(pE=>{"use strict";Object.defineProperty(pE,"__esModule",{value:!0});var PY=Hs(),ep=class extends PY.RedisError{constructor(e,r){super(e),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};pE.default=ep;ep.defaultMessage="Failed to refresh slots cache."});var tp=x(mE=>{"use strict";Object.defineProperty(mE,"__esModule",{value:!0});var OY=require("stream"),hE=class extends OY.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.noValues&&e.push("NOVALUES"),this.opt.redis[this.opt.command](e,(r,n)=>{if(r){this.emit("error",r);return}this._redisCursor=n[0]instanceof Buffer?n[0].toString():n[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(n[1])})}close(){this._redisDrained=!0}};mE.default=hE});var WF=x(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.executeWithAutoPipelining=De.getFirstValueInFlattenedArray=De.shouldUseAutoPipelining=De.notAllowedAutoPipelineCommands=De.kCallbacks=De.kExec=void 0;var zF=Qf(),kY=qa(),HF=zn();De.kExec=Symbol("exec");De.kCallbacks=Symbol("callbacks");De.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"];function VF(t,e){if(t._runningAutoPipelines.has(e)||!t._autoPipelines.has(e))return;t._runningAutoPipelines.add(e);let r=t._autoPipelines.get(e);t._autoPipelines.delete(e);let n=r[De.kCallbacks];r[De.kCallbacks]=null,r.exec(function(s,o){if(t._runningAutoPipelines.delete(e),s)for(let i=0;i<n.length;i++)process.nextTick(n[i],s);else for(let i=0;i<n.length;i++)process.nextTick(n[i],...o[i]);t._autoPipelines.has(e)&&VF(t,e)})}function NY(t,e,r){return e&&t.options.enableAutoPipelining&&!t.isPipeline&&!De.notAllowedAutoPipelineCommands.includes(r)&&!t.options.autoPipeliningIgnoredCommands.includes(r)}De.shouldUseAutoPipelining=NY;function KF(t){for(let e=0;e<t.length;e++){let r=t[e];if(typeof r=="string")return r;if(Array.isArray(r)||(0,zF.isArguments)(r)){if(r.length===0)continue;return r[0]}let n=[r].flat();if(n.length>0)return n[0]}}De.getFirstValueInFlattenedArray=KF;function GF(t,e,r,n,s){if(t.isCluster&&!t.slots.length)return t.status==="wait"&&t.connect().catch(zF.noop),(0,HF.default)(new Promise(function(u,d){t.delayUntilReady(l=>{if(l){d(l);return}GF(t,e,r,n,null).then(u,d)})}),s);let o=t.options.keyPrefix||"",i=t.isCluster?t.slots[kY(`${o}${KF(n)}`)].join(","):"main";if(!t._autoPipelines.has(i)){let u=t.pipeline();u[De.kExec]=!1,u[De.kCallbacks]=[],t._autoPipelines.set(i,u)}let a=t._autoPipelines.get(i);a[De.kExec]||(a[De.kExec]=!0,setImmediate(VF,t,i));let c=new Promise(function(u,d){a[De.kCallbacks].push(function(l,m){if(l){d(l);return}u(m)}),e==="call"&&n.unshift(r),a[e](...n)});return(0,HF.default)(c,s)}De.executeWithAutoPipelining=GF});var QF=x(yE=>{"use strict";Object.defineProperty(yE,"__esModule",{value:!0});var DY=require("crypto"),MY=Wr(),FY=zn(),gE=class{constructor(e,r=null,n="",s=!1){this.lua=e,this.numberOfKeys=r,this.keyPrefix=n,this.readOnly=s,this.sha=(0,DY.createHash)("sha1").update(e).digest("hex");let o=this.sha,i=new WeakSet;this.Command=class extends MY.default{toWritable(c){let u=this.reject;return this.reject=d=>{d.message.indexOf("NOSCRIPT")!==-1&&i.delete(c),u.call(this,d)},i.has(c)?this.name==="eval"&&(this.name="evalsha",this.args[0]=o):(i.add(c),this.name="eval",this.args[0]=e),super.toWritable(c)}}}execute(e,r,n,s){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);let o=new this.Command("evalsha",[this.sha,...r],n);return o.promise=o.promise.catch(i=>{if(i.message.indexOf("NOSCRIPT")===-1)throw i;let a=new this.Command("evalsha",[this.sha,...r],n);return(e.isPipeline?e.redis:e).sendCommand(a)}),(0,FY.default)(o.promise,s),e.sendCommand(o)}};yE.default=gE});var np=x(EE=>{"use strict";Object.defineProperty(EE,"__esModule",{value:!0});var LY=ei(),rp=WF(),BY=Wr(),UY=QF(),Qr=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return SE.slice(0)}createBuiltinCommand(e){return{string:Kn(null,e,"utf8"),buffer:Kn(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=Kn(e,e,"utf8"),this[e+"Buffer"]=Kn(e+"Buffer",e,null)}defineCommand(e,r){let n=new UY.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[e]=n,this[e]=YF(e,e,n,"utf8"),this[e+"Buffer"]=YF(e+"Buffer",e,n,null)}sendCommand(e,r,n){throw new Error('"sendCommand" is not implemented')}},SE=LY.list.filter(t=>t!=="monitor");SE.push("sentinel");SE.forEach(function(t){Qr.prototype[t]=Kn(t,t,"utf8"),Qr.prototype[t+"Buffer"]=Kn(t+"Buffer",t,null)});Qr.prototype.call=Kn("call","utf8");Qr.prototype.callBuffer=Kn("callBuffer",null);Qr.prototype.send_command=Qr.prototype.call;function Kn(t,e,r){return typeof r>"u"&&(r=e,e=null),function(...n){let s=e||n.shift(),o=n[n.length-1];typeof o=="function"?n.pop():o=void 0;let i={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,rp.shouldUseAutoPipelining)(this,t,s)?(0,rp.executeWithAutoPipelining)(this,t,s,n,o):this.sendCommand(new BY.default(s,n,i,o))}}function YF(t,e,r,n){return function(...s){let o=typeof s[s.length-1]=="function"?s.pop():void 0,i={replyEncoding:n};return this.options.showFriendlyErrorStack&&(i.errorStack=new Error),(0,rp.shouldUseAutoPipelining)(this,t,e)?(0,rp.executeWithAutoPipelining)(this,t,e,s,o):r.execute(this,s,i,o)}}EE.default=Qr});var wE=x(_E=>{"use strict";Object.defineProperty(_E,"__esModule",{value:!0});var bE=qa(),JF=ei(),XF=zn(),$Y=require("util"),qY=Wr(),jY=Je(),HY=np();function zY(t,e){let r=bE(e[0]),n=t._groupsBySlot[r];for(let s=1;s<e.length;s++)if(t._groupsBySlot[bE(e[s])]!==n)return-1;return r}var Gn=class extends HY.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(n=>{let s=e.scriptsSet[n];this._shaToScript[s.sha]=s,this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),e.addedBuiltinSet.forEach(n=>{this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),this.promise=new Promise((n,s)=>{this.resolve=n,this.reject=s});let r=this;Object.defineProperty(this,"length",{get:function(){return r._queue.length}})}fillResult(e,r){if(this._queue[r].name==="exec"&&Array.isArray(e[1])){let s=e[1].length;for(let o=0;o<s;o++){if(e[1][o]instanceof Error)continue;let i=this._queue[r-(s-o)];try{e[1][o]=i.transformReply(e[1][o])}catch(a){e[1][o]=a}}}if(this._result[r]=e,--this.replyPending)return;if(this.isCluster){let s=!0,o;for(let i=0;i<this._result.length;++i){let a=this._result[i][0],c=this._queue[i];if(a){if(c.name==="exec"&&a.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!o)o={name:a.name,message:a.message};else if(o.name!==a.name||o.message!==a.message){s=!1;break}}else if(!c.inTransaction&&!((0,JF.exists)(c.name)&&(0,JF.hasFlag)(c.name,"readonly"))){s=!1;break}}if(o&&s){let i=this,a=o.message.split(" "),c=this._queue,u=!1;this._queue=[];for(let h=0;h<c.length;++h){if(a[0]==="ASK"&&!u&&c[h].name!=="asking"&&(!c[h-1]||c[h-1].name!=="asking")){let g=new qY.default("asking");g.ignore=!0,this.sendCommand(g)}c[h].initPromise(),this.sendCommand(c[h]),u=c[h].inTransaction}let d=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let l=function(){i.exec()},m=this.redis;if(m.handleError(o,this.leftRedirections,{moved:function(h,g){i.preferKey=g,m.slots[a[1]]=[g],m._groupsBySlot[a[1]]=m._groupsIds[m.slots[a[1]].join(";")],m.refreshSlotsCache(),i.exec()},ask:function(h,g){i.preferKey=g,i.exec()},tryagain:l,clusterDown:l,connectionClosed:l,maxRedirections:()=>{d=!1},defaults:()=>{d=!1}}),d)return}}let n=0;for(let s=0;s<this._queue.length-n;++s)this._queue[s+n].ignore&&(n+=1),this._result[s]=this._result[s+n];this.resolve(this._result.slice(0,this._result.length-n))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let r=this._queue.length;return e.pipelineIndex=r,e.promise.then(n=>{this.fillResult([null,n],r)}).catch(n=>{this.fillResult([n],r)}),this._queue.push(e),this}addBatch(e){let r,n,s;for(let o=0;o<e.length;++o)r=e[o],n=r[0],s=r.slice(1),this[n].apply(this,s);return this}};_E.default=Gn;var VY=Gn.prototype.multi;Gn.prototype.multi=function(){return this._transactions+=1,VY.apply(this,arguments)};var ZF=Gn.prototype.execBuffer;Gn.prototype.execBuffer=(0,$Y.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),ZF.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");Gn.prototype.exec=function(t){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(jY.noop),t&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,XF.default)(this.promise,t)),this.redis.delayUntilReady(s=>{if(s){this.reject(s);return}this.exec(t)}),this.promise;if(this._transactions>0)return this._transactions-=1,ZF.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,XF.default)(this.promise,t)),this._queue.length||this.resolve([]);let e;if(this.isCluster){let s=[];for(let o=0;o<this._queue.length;o++){let i=this._queue[o].getKeys();if(i.length&&s.push(i[0]),i.length&&bE.generateMulti(i)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(s.length){if(e=zY(this.redis,s),e<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else e=Math.random()*16384|0}let r=this;return n(),this.promise;function n(){let s=r.replyPending=r._queue.length,o;r.isCluster&&(o={slot:e,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let i="",a,c={isPipeline:!0,destination:r.isCluster?o:{redis:r.redis},write(u){typeof u!="string"?(a||(a=[]),i&&(a.push(Buffer.from(i,"utf8")),i=""),a.push(u)):i+=u,--s||(a?(i&&a.push(Buffer.from(i,"utf8")),c.destination.redis.stream.write(Buffer.concat(a))):c.destination.redis.stream.write(i),s=r._queue.length,i="",a=void 0)}};for(let u=0;u<r._queue.length;++u)r.redis.sendCommand(r._queue[u],c,o);return r.promise}}});var AE=x(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.addTransactionSupport=void 0;var xE=Je(),CE=zn(),e2=wE();function KY(t){t.pipeline=function(n){let s=new e2.default(this);return Array.isArray(n)&&s.addBatch(n),s};let{multi:e}=t;t.multi=function(n,s){if(typeof s>"u"&&!Array.isArray(n)&&(s=n,n=null),s&&s.pipeline===!1)return e.call(this);let o=new e2.default(this);o.multi(),Array.isArray(n)&&o.addBatch(n);let i=o.exec;o.exec=function(c){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(xE.noop),(0,CE.default)(new Promise((d,l)=>{this.redis.delayUntilReady(m=>{if(m){l(m);return}this.exec(o).then(d,l)})}),c);if(this._transactions>0&&i.call(o),this.nodeifiedPromise)return i.call(o);let u=i.call(o);return(0,CE.default)(u.then(function(d){let l=d[d.length-1];if(typeof l>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(l[0]){l[0].previousErrors=[];for(let m=0;m<d.length-1;++m)d[m][0]&&l[0].previousErrors.push(d[m][0]);throw l[0]}return(0,xE.wrapMultiResult)(l[1])}),c)};let{execBuffer:a}=o;return o.execBuffer=function(c){return this._transactions>0&&a.call(o),o.exec(c)},o};let{exec:r}=t;t.exec=function(n){return(0,CE.default)(r.call(this).then(function(s){return Array.isArray(s)&&(s=(0,xE.wrapMultiResult)(s)),s}),n)}}sp.addTransactionSupport=KY});var TE=x(vE=>{"use strict";Object.defineProperty(vE,"__esModule",{value:!0});function GY(t,e){Object.getOwnPropertyNames(e.prototype).forEach(r=>{Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r))})}vE.default=GY});var r2=x(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.DEFAULT_CLUSTER_OPTIONS=void 0;var t2=require("dns");op.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:t=>Math.min(100+t*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:t2.resolveSrv,dnsLookup:t2.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}});var za=x(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.getConnectionName=lt.weightSrvRecords=lt.groupSrvRecords=lt.getUniqueHostnamesFromOptions=lt.normalizeNodeOptions=lt.nodeKeyToRedisOptions=lt.getNodeKey=void 0;var n2=Je(),WY=require("net");function QY(t){return t.port=t.port||6379,t.host=t.host||"127.0.0.1",t.host+":"+t.port}lt.getNodeKey=QY;function YY(t){let e=t.lastIndexOf(":");if(e===-1)throw new Error(`Invalid node key ${t}`);return{host:t.slice(0,e),port:Number(t.slice(e+1))}}lt.nodeKeyToRedisOptions=YY;function JY(t){return t.map(e=>{let r={};if(typeof e=="object")Object.assign(r,e);else if(typeof e=="string")Object.assign(r,(0,n2.parseURL)(e));else if(typeof e=="number")r.port=e;else throw new Error("Invalid argument "+e);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,n2.resolveTLSProfile)(r)})}lt.normalizeNodeOptions=JY;function XY(t){let e={};return t.forEach(r=>{e[r.host]=!0}),Object.keys(e).filter(r=>!(0,WY.isIP)(r))}lt.getUniqueHostnamesFromOptions=XY;function ZY(t){let e={};for(let r of t)e.hasOwnProperty(r.priority)?(e[r.priority].totalWeight+=r.weight,e[r.priority].records.push(r)):e[r.priority]={totalWeight:r.weight,records:[r]};return e}lt.groupSrvRecords=ZY;function eJ(t){if(t.records.length===1)return t.totalWeight=0,t.records.shift();let e=Math.floor(Math.random()*(t.totalWeight+t.records.length)),r=0;for(let[n,s]of t.records.entries())if(r+=1+s.weight,r>e)return t.totalWeight-=s.weight,t.records.splice(n,1),s}lt.weightSrvRecords=eJ;function tJ(t,e){let r=`ioredis-cluster(${t})`;return e?`${r}:${e}`:r}lt.getConnectionName=tJ});var OE=x(PE=>{"use strict";Object.defineProperty(PE,"__esModule",{value:!0});var s2=za(),RE=Je(),rJ=Wn(),Tr=(0,RE.Debug)("cluster:subscriber"),IE=class{constructor(e,r,n=!1){this.connectionPool=e,this.emitter=r,this.isSharded=n,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){Tr("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}Tr("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(s,o)=>{!this.started||!this.subscriber||(0,s2.getNodeKey)(this.subscriber.options)===o&&(Tr("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(Tr("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(e){return this.isSharded&&(this.slotRange=e),this.slotRange}start(){this.started=!0,this.selectSubscriber(),Tr("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,RE.sample)(this.connectionPool.getNodes());if(!r){Tr("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:n}=r;Tr("selected a subscriber %s:%s",n.host,n.port);let s="subscriber";this.isSharded&&(s="ssubscriber"),this.subscriber=new rJ.default({port:n.port,host:n.host,username:n.username,password:n.password,enableReadyCheck:!0,connectionName:(0,s2.getConnectionName)(s,n.connectionName),lazyConnect:!0,tls:n.tls,retryStrategy:null}),this.subscriber.on("error",RE.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let o={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let i=e.condition||e.prevCondition;i&&i.subscriber&&(o.subscribe=i.subscriber.channels("subscribe"),o.psubscribe=i.subscriber.channels("psubscribe"),o.ssubscribe=i.subscriber.channels("ssubscribe"))}if(o.subscribe.length||o.psubscribe.length||o.ssubscribe.length){let i=0;for(let a of["subscribe","psubscribe","ssubscribe"]){let c=o[a];if(c.length!=0)if(Tr("%s %d channels",a,c.length),a==="ssubscribe")for(let u of c)i+=1,this.subscriber[a](u).then(()=>{--i||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Tr("failed to ssubscribe to channel: %s",u)});else i+=1,this.subscriber[a](c).then(()=>{--i||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Tr("failed to %s %d channels",a,c.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let i of["message","messageBuffer"])this.subscriber.on(i,(a,c)=>{this.emitter.emit(i,a,c)});for(let i of["pmessage","pmessageBuffer"])this.subscriber.on(i,(a,c,u)=>{this.emitter.emit(i,a,c,u)});if(this.isSharded==!0)for(let i of["smessage","smessageBuffer"])this.subscriber.on(i,(a,c)=>{this.emitter.emit(i,a,c)})}};PE.default=IE});var ME=x(DE=>{"use strict";Object.defineProperty(DE,"__esModule",{value:!0});var nJ=require("events"),ip=Je(),kE=za(),sJ=Wn(),Va=(0,ip.Debug)("cluster:connectionPool"),NE=class extends nJ.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let r=this.nodes[e];return Object.keys(r).map(n=>r[n])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let r=Object.keys(this.nodes[e]),n=(0,ip.sample)(r);return this.nodes[e][n]}addMasterNode(e){let r=(0,kE.getNodeKey)(e.options),n=this.createRedisFromOptions(e,e.options.readOnly);return e.options.readOnly?!1:(this.nodes.all[r]=n,this.nodes.master[r]=n,!0)}createRedisFromOptions(e,r){return new sJ.default((0,ip.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},e,this.redisOptions,{lazyConnect:!0}))}findOrCreate(e,r=!1){let n=(0,kE.getNodeKey)(e);r=!!r,this.specifiedOptions[n]?Object.assign(e,this.specifiedOptions[n]):this.specifiedOptions[n]=e;let s;return this.nodes.all[n]?(s=this.nodes.all[n],s.options.readOnly!==r&&(s.options.readOnly=r,Va("Change role of %s to %s",n,r?"slave":"master"),s[r?"readonly":"readwrite"]().catch(ip.noop),r?(delete this.nodes.master[n],this.nodes.slave[n]=s):(delete this.nodes.slave[n],this.nodes.master[n]=s))):(Va("Connecting to %s as %s",n,r?"slave":"master"),s=this.createRedisFromOptions(e,r),this.nodes.all[n]=s,this.nodes[r?"slave":"master"][n]=s,s.once("end",()=>{this.removeNode(n),this.emit("-node",s,n),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",s,n),s.on("error",function(o){this.emit("nodeError",o,n)})),s}reset(e){Va("Reset with %O",e);let r={};e.forEach(n=>{let s=(0,kE.getNodeKey)(n);n.readOnly&&r[s]||(r[s]=n)}),Object.keys(this.nodes.all).forEach(n=>{r[n]||(Va("Disconnect %s because the node does not hold any slot",n),this.nodes.all[n].disconnect(),this.removeNode(n))}),Object.keys(r).forEach(n=>{let s=r[n];this.findOrCreate(s,s.readOnly)})}removeNode(e){let{nodes:r}=this;r.all[e]&&(Va("Remove %s from the pool",e),delete r.all[e]),delete r.master[e],delete r.slave[e]}};DE.default=NE});var ap=x((jle,o2)=>{"use strict";function Pe(t,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}Pe.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}};Pe.prototype.get=function(e){return this.peekAt(e)};Pe.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};Pe.prototype.peekFront=function(){return this.peek()};Pe.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(Pe.prototype,"length",{get:function(){return this.size()}});Pe.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Pe.prototype.unshift=function(e){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Pe.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};Pe.prototype.push=function(e){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Pe.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),n}};Pe.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),s=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var o=this._list[r],i;if(e<n/2){for(i=e;i>0;i--)this._list[r]=this._list[r=r-1+s&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+s&this._capacityMask}else{for(i=n-1-e;i>0;i--)this._list[r]=this._list[r=r+1+s&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+s&this._capacityMask}return o}}};Pe.prototype.remove=function(e,r){var n=e,s,o=r;if(n===(n|0)&&this._head!==this._tail){var i=this.size(),a=this._list.length;if(!(n>=i||n<-i||r<1)){if(n<0&&(n+=i),r===1||!r)return s=new Array(1),s[0]=this.removeOne(n),s;if(n===0&&n+r>=i)return s=this.toArray(),this.clear(),s;n+r>i&&(r=i-n);var c;for(s=new Array(r),c=0;c<r;c++)s[c]=this._list[this._head+n+c&this._capacityMask];if(n=this._head+n&this._capacityMask,e+r===i){for(this._tail=this._tail-r+a&this._capacityMask,c=r;c>0;c--)this._list[n=n+1+a&this._capacityMask]=void 0;return s}if(e===0){for(this._head=this._head+r+a&this._capacityMask,c=r-1;c>0;c--)this._list[n=n+1+a&this._capacityMask]=void 0;return s}if(n<i/2){for(this._head=this._head+e+r+a&this._capacityMask,c=e;c>0;c--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;o>0;)this._list[n=n-1+a&this._capacityMask]=void 0,o--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+a&this._capacityMask,c=i-(r+e);c>0;c--)this.push(this._list[n++]);for(n=this._tail;o>0;)this._list[n=n+1+a&this._capacityMask]=void 0,o--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),s}}};Pe.prototype.splice=function(e,r){var n=e;if(n===(n|0)){var s=this.size();if(n<0&&(n+=s),!(n>s))if(arguments.length>2){var o,i,a,c=arguments.length,u=this._list.length,d=2;if(!s||n<s/2){for(i=new Array(n),o=0;o<n;o++)i[o]=this._list[this._head+o&this._capacityMask];for(r===0?(a=[],n>0&&(this._head=this._head+n+u&this._capacityMask)):(a=this.remove(n,r),this._head=this._head+n+u&this._capacityMask);c>d;)this.unshift(arguments[--c]);for(o=n;o>0;o--)this.unshift(i[o-1])}else{i=new Array(s-(n+r));var l=i.length;for(o=0;o<l;o++)i[o]=this._list[this._head+n+r+o&this._capacityMask];for(r===0?(a=[],n!=s&&(this._tail=this._head+n+u&this._capacityMask)):(a=this.remove(n,r),this._tail=this._tail-l+u&this._capacityMask);d<c;)this.push(arguments[d++]);for(o=0;o<l;o++)this.push(i[o])}return a}else return this.remove(n,r)}};Pe.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};Pe.prototype.isEmpty=function(){return this._head===this._tail};Pe.prototype.toArray=function(){return this._copyArray(!1)};Pe.prototype._fromArray=function(e){var r=e.length,n=this._nextPowerOf2(r);this._list=new Array(n),this._capacityMask=n-1,this._tail=r;for(var s=0;s<r;s++)this._list[s]=e[s]};Pe.prototype._copyArray=function(e,r){var n=this._list,s=n.length,o=this.length;if(r=r|o,r==o&&this._head<this._tail)return this._list.slice(this._head,this._tail);var i=new Array(r),a=0,c;if(e||this._head>this._tail){for(c=this._head;c<s;c++)i[a++]=n[c];for(c=0;c<this._tail;c++)i[a++]=n[c]}else for(c=this._head;c<this._tail;c++)i[a++]=n[c];return i};Pe.prototype._growArray=function(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};Pe.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};Pe.prototype._nextPowerOf2=function(e){var r=Math.log(e)/Math.log(2),n=1<<r+1;return Math.max(n,4)};o2.exports=Pe});var i2=x(LE=>{"use strict";Object.defineProperty(LE,"__esModule",{value:!0});var oJ=Je(),iJ=ap(),aJ=(0,oJ.Debug)("delayqueue"),FE=class{constructor(){this.queues={},this.timeouts={}}push(e,r,n){let s=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new iJ),this.queues[e].push(r),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{s(()=>{this.timeouts[e]=null,this.execute(e)})},n.timeout))}execute(e){let r=this.queues[e];if(!r)return;let{length:n}=r;if(n)for(aJ("send %d commands in %s queue",n,e),this.queues[e]=null;r.length>0;)r.shift()()}};LE.default=FE});var u2=x(UE=>{"use strict";Object.defineProperty(UE,"__esModule",{value:!0});var cJ=Je(),uJ=OE(),lJ=ME(),a2=za(),cp=qa(),c2=(0,cJ.Debug)("cluster:subscriberGroup"),BE=class{constructor(e,r){this.cluster=e,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,e.on("+node",n=>{this._addSubscriber(n)}),e.on("-node",n=>{this._removeSubscriber(n)}),e.on("refresh",()=>{this._refreshSlots(e)}),e.on("forceRefresh",()=>{r()})}getResponsibleSubscriber(e){let r=this.clusterSlots[e][0];return this.shardedSubscribers.get(r)}addChannels(e){let r=cp(e[0]);e.forEach(s=>{if(cp(s)!=r)return-1});let n=this.channels.get(r);return n?this.channels.set(r,n.concat(e)):this.channels.set(r,e),[...this.channels.values()].flatMap(s=>s).length}removeChannels(e){let r=cp(e[0]);e.forEach(s=>{if(cp(s)!=r)return-1});let n=this.channels.get(r);if(n){let s=n.filter(o=>!e.includes(o));this.channels.set(r,s)}return[...this.channels.values()].flatMap(s=>s).length}stop(){for(let e of this.shardedSubscribers.values())e.stop()}start(){for(let e of this.shardedSubscribers.values())e.isStarted()||e.start()}_addSubscriber(e){let r=new lJ.default(e.options);if(r.addMasterNode(e)){let n=new uJ.default(r,this.cluster,!0),s=(0,a2.getNodeKey)(e.options);return this.shardedSubscribers.set(s,n),n.start(),this._resubscribe(),this.cluster.emit("+subscriber"),n}return null}_removeSubscriber(e){let r=(0,a2.getNodeKey)(e.options),n=this.shardedSubscribers.get(r);return n&&(n.stop(),this.shardedSubscribers.delete(r),this._resubscribe(),this.cluster.emit("-subscriber")),this.shardedSubscribers}_refreshSlots(e){if(this._slotsAreEqual(e.slots))c2("Nothing to refresh because the new cluster map is equal to the previous one.");else{c2("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let r=0;r<e.slots.length;r++){let n=e.slots[r][0];this.subscriberToSlotsIndex.has(n)||this.subscriberToSlotsIndex.set(n,[]),this.subscriberToSlotsIndex.get(n).push(Number(r))}return this._resubscribe(),this.clusterSlots=JSON.parse(JSON.stringify(e.slots)),this.cluster.emit("subscribersReady"),!0}return!1}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((e,r)=>{let n=this.subscriberToSlotsIndex.get(r);n&&(e.associateSlotRange(n),n.forEach(s=>{let o=e.getInstance(),i=this.channels.get(s);i&&i.length>0&&o&&(o.ssubscribe(i),o.on("ready",()=>{o.ssubscribe(i)}))}))})}_slotsAreEqual(e){return this.clusterSlots===void 0?!1:JSON.stringify(this.clusterSlots)===JSON.stringify(e)}};UE.default=BE});var jE=x(qE=>{"use strict";Object.defineProperty(qE,"__esModule",{value:!0});var l2=ei(),m2=require("events"),Ka=Hs(),d2=zn(),f2=Wr(),$E=jF(),dJ=Wn(),fJ=tp(),pJ=AE(),Ft=Je(),hJ=TE(),mJ=np(),gJ=r2(),yJ=OE(),SJ=ME(),EJ=i2(),ci=za(),p2=ap(),bJ=u2(),Oe=(0,Ft.Debug)("cluster"),h2=new WeakSet,Ga=class t extends mJ.default{constructor(e,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new EJ.default,this.offlineQueue=new p2,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,m2.EventEmitter.call(this),this.startupNodes=e,this.options=(0,Ft.defaults)({},r,gJ.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.shardedSubscribers==!0&&(this.shardedSubscribers=new bJ.default(this,this.refreshSlotsCache.bind(this))),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new SJ.default(this.options.redisOptions),this.connectionPool.on("-node",(n,s)=>{this.emit("-node",n)}),this.connectionPool.on("+node",n=>{this.emit("+node",n)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(n,s)=>{this.emit("node error",n,s)}),this.subscriber=new yJ.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,s])=>{this.defineCommand(n,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(n=>{Oe("connecting failed: %s",n)})}connect(){return new Promise((e,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let n=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(s=>{if(this.connectionEpoch!==n){Oe("discard connecting after resolving startup nodes because epoch not match: %d != %d",n,this.connectionEpoch),r(new Ka.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){Oe("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new Ka.RedisError("Connection is aborted"));return}this.connectionPool.reset(s);let o=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},i,a=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",i),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((c,u)=>{c||u?(Oe("Ready check failed (%s). Reconnecting...",c||u),this.status==="connect"&&this.disconnect(!0)):o()}):o()};i=()=>{let c=new Error("None of startup nodes is available");this.removeListener("refresh",a),this.invokeReadyDelayedCallbacks(c),r(c)},this.once("refresh",a),this.once("close",i),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(c=>{c&&c.message===$E.default.defaultMessage&&(dJ.default.prototype.silentEmit.call(this,"error",c),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start()}).catch(s=>{this.setStatus("close"),this.handleCloseEvent(s),this.invokeReadyDelayedCallbacks(s),r(s)})})}disconnect(e=!1){let r=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,Oe("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"){let n=(0,d2.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),n}return(0,d2.default)(Promise.all(this.nodes().map(n=>n.quit().catch(s=>{if(s.message===Ft.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw s}))).then(()=>"OK"),e)}duplicate(e=[],r={}){let n=e.length>0?e:this.startupNodes.slice(0),s=Object.assign({},this.options,r);return new t(n,s)}nodes(e="all"){if(e!=="all"&&e!=="master"&&e!=="slave")throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;let r=this,n=a=>{this.isRefreshing=!1;for(let c of this._refreshSlotsCacheCallbacks)c(a);this._refreshSlotsCacheCallbacks=[]},s=(0,Ft.shuffle)(this.connectionPool.getNodes()),o=null;function i(a){if(a===s.length){let d=new $E.default($E.default.defaultMessage,o);return n(d)}let c=s[a],u=`${c.options.host}:${c.options.port}`;Oe("getting slot cache from %s",u),r.getInfoFromNode(c,function(d){switch(r.status){case"close":case"end":return n(new Error("Cluster is disconnected."));case"disconnecting":return n(new Error("Cluster is disconnecting."))}d?(r.emit("node error",d,u),o=d,i(a+1)):(r.emit("refresh"),n())})}i(0)}sendCommand(e,r,n){if(this.status==="wait"&&this.connect().catch(Ft.noop),this.status==="end")return e.reject(new Error(Ft.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let s=this.options.scaleReads;s!=="master"&&(e.isReadOnly||(0,l2.exists)(e.name)&&(0,l2.hasFlag)(e.name,"readonly")||(s="master"));let o=n?n.slot:e.getSlot(),i={},a=this;if(!n&&!h2.has(e)){h2.add(e);let u=e.reject;e.reject=function(d){let l=c.bind(null,!0);a.handleError(d,i,{moved:function(m,h){Oe("command %s is moved to %s",e.name,h),o=Number(m),a.slots[m]?a.slots[m][0]=h:a.slots[m]=[h],a._groupsBySlot[m]=a._groupsIds[a.slots[m].join(";")],a.connectionPool.findOrCreate(a.natMapper(h)),c(),Oe("refreshing slot caches... (triggered by MOVED error)"),a.refreshSlotsCache()},ask:function(m,h){Oe("command %s is required to ask %s:%s",e.name,h);let g=a.natMapper(h);a.connectionPool.findOrCreate(g),c(!1,`${g.host}:${g.port}`)},tryagain:l,clusterDown:l,connectionClosed:l,maxRedirections:function(m){u.call(e,m)},defaults:function(){u.call(e,d)}})}}c();function c(u,d){if(a.status==="end"){e.reject(new Ka.AbortError("Cluster is ended."));return}let l;if(a.status==="ready"||e.name==="cluster"){if(n&&n.redis)l=n.redis;else if(f2.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||f2.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(a.options.shardedSubscribers==!0&&(e.name=="ssubscribe"||e.name=="sunsubscribe")){let m=a.shardedSubscribers.getResponsibleSubscriber(o),h=-1;e.name=="ssubscribe"&&(h=a.shardedSubscribers.addChannels(e.getKeys())),e.name=="sunsubscribe"&&(h=a.shardedSubscribers.removeChannels(e.getKeys())),h!==-1?l=m.getInstance():e.reject(new Ka.AbortError("Can't add or remove the given channels. Are they in the same slot?"))}else l=a.subscriber.getInstance();if(!l){e.reject(new Ka.AbortError("No subscriber for the cluster"));return}}else{if(!u){if(typeof o=="number"&&a.slots[o]){let m=a.slots[o];if(typeof s=="function"){let h=m.map(function(g){return a.connectionPool.getInstanceByKey(g)});l=s(h,e),Array.isArray(l)&&(l=(0,Ft.sample)(l)),l||(l=h[0])}else{let h;s==="all"?h=(0,Ft.sample)(m):s==="slave"&&m.length>1?h=(0,Ft.sample)(m,1):h=m[0],l=a.connectionPool.getInstanceByKey(h)}}d&&(l=a.connectionPool.getInstanceByKey(d),l.asking())}l||(l=(typeof s=="function"?null:a.connectionPool.getSampleInstance(s))||a.connectionPool.getSampleInstance("all"))}n&&!n.redis&&(n.redis=l)}l?l.sendCommand(e,r):a.options.enableOfflineQueue?a.offlineQueue.push({command:e,stream:r,node:n}):e.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return e.promise}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}handleError(e,r,n){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){n.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));return}let s=e.message.split(" ");if(s[0]==="MOVED"){let o=this.options.retryDelayOnMoved;o&&typeof o=="number"?this.delayQueue.push("moved",n.moved.bind(null,s[1],s[2]),{timeout:o}):n.moved(s[1],s[2])}else s[0]==="ASK"?n.ask(s[1],s[2]):s[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):s[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===Ft.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}resetOfflineQueue(){this.offlineQueue=new p2}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=()=>{this.slotsTimer=setTimeout(()=>{Oe('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}setStatus(e){Oe("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){e&&Oe("closed because %s",e);let r;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(r=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),typeof r=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,Oe("Cluster is disconnected. Retrying after %dms",r),this.connect().catch(function(n){Oe("Got error %s when reconnecting. Ignoring...",n)})},r)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(e){let r;for(;r=this.offlineQueue.shift();)r.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){Oe("send %d commands in offline queue",this.offlineQueue.length);let e=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=e.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(e){let r=typeof e=="string"?e:`${e.host}:${e.port}`,n=null;return this.options.natMap&&typeof this.options.natMap=="function"?n=this.options.natMap(r):this.options.natMap&&typeof this.options.natMap=="object"&&(n=this.options.natMap[r]),n?(Oe("NAT mapping %s -> %O",r,n),Object.assign({},n)):typeof e=="string"?(0,ci.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,r){if(!e)return r(new Error("Node is disconnected"));let n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,ci.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",Ft.noop),n.cluster("SLOTS",(0,Ft.timeout)((s,o)=>{if(n.disconnect(),s)return Oe("error encountered running CLUSTER.SLOTS: %s",s),r(s);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){Oe("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",o.length,this.status),r();return}let i=[];Oe("cluster slots result count: %d",o.length);for(let c=0;c<o.length;++c){let u=o[c],d=u[0],l=u[1],m=[];for(let h=2;h<u.length;h++){if(!u[h][0])continue;let g=this.natMapper({host:u[h][0],port:u[h][1]});g.readOnly=h!==2,i.push(g),m.push(g.host+":"+g.port)}Oe("cluster slots result [%d]: slots %d~%d served by %s",c,d,l,m);for(let h=d;h<=l;h++)this.slots[h]=m}this._groupsIds=Object.create(null);let a=0;for(let c=0;c<16384;c++){let u=(this.slots[c]||[]).join(";");if(!u.length){this._groupsBySlot[c]=void 0;continue}this._groupsIds[u]||(this._groupsIds[u]=++a),this._groupsBySlot[c]=this._groupsIds[u]}this.connectionPool.reset(i),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let r of this._readyDelayedCallbacks)process.nextTick(r,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(r,n)=>{if(r)return e(r);if(typeof n!="string")return e();let s,o=n.split(`\r
`);for(let i=0;i<o.length;++i){let a=o[i].split(":");if(a[0]==="cluster_state"){s=a[1];break}}s==="fail"?(Oe("cluster state not ok (%s)",s),e(null,s)):e()})}resolveSrv(e){return new Promise((r,n)=>{this.options.resolveSrv(e,(s,o)=>{if(s)return n(s);let i=this,a=(0,ci.groupSrvRecords)(o),c=Object.keys(a).sort((d,l)=>parseInt(d)-parseInt(l));function u(d){if(!c.length)return n(d);let l=c[0],m=a[l],h=(0,ci.weightSrvRecords)(m);m.records.length||c.shift(),i.dnsLookup(h.name).then(g=>r({host:g,port:h.port}),u)}u()})})}dnsLookup(e){return new Promise((r,n)=>{this.options.dnsLookup(e,(s,o)=>{s?(Oe("failed to resolve hostname %s to IP: %s",e,s.message),n(s)):(Oe("resolved hostname %s to IP %s",e,o),r(o))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let e=(0,ci.normalizeNodeOptions)(this.startupNodes),r=(0,ci.getUniqueHostnamesFromOptions)(e);if(r.length===0)return e;let n=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),s=(0,Ft.zipMap)(r,n);return e.map(o=>{let i=s.get(o.host);return i?this.options.useSRVRecords?Object.assign({},o,i):Object.assign({},o,{host:i}):o})}createScanStream(e,{key:r,options:n={}}){return new fJ.default({objectMode:!0,key:r,redis:this,command:e,...n})}};(0,hJ.default)(Ga,m2.EventEmitter);(0,pJ.addTransactionSupport)(Ga.prototype);qE.default=Ga});var up=x(zE=>{"use strict";Object.defineProperty(zE,"__esModule",{value:!0});var _J=Je(),wJ=(0,_J.Debug)("AbstractConnector"),HE=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,r=setTimeout(()=>{wJ("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(r)),e.end()}}};zE.default=HE});var g2=x(KE=>{"use strict";Object.defineProperty(KE,"__esModule",{value:!0});var xJ=require("net"),CJ=require("tls"),AJ=Je(),vJ=up(),VE=class extends vJ.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let{options:r}=this;this.connecting=!0;let n;return"path"in r&&r.path?n={path:r.path}:(n={},"port"in r&&r.port!=null&&(n.port=r.port),"host"in r&&r.host!=null&&(n.host=r.host),"family"in r&&r.family!=null&&(n.family=r.family)),r.tls&&Object.assign(n,r.tls),new Promise((s,o)=>{process.nextTick(()=>{if(!this.connecting){o(new Error(AJ.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,CJ.connect)(n):this.stream=(0,xJ.createConnection)(n)}catch(i){o(i);return}this.stream.once("error",i=>{this.firstError=i}),s(this.stream)})})}};KE.default=VE});var y2=x(WE=>{"use strict";Object.defineProperty(WE,"__esModule",{value:!0});function TJ(t,e){return(t.host||"127.0.0.1")===(e.host||"127.0.0.1")&&(t.port||26379)===(e.port||26379)}var GE=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let r=0;r<this.sentinels.length;r++)if(TJ(e,this.sentinels[r]))return!1;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};WE.default=GE});var E2=x(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.FailoverDetector=void 0;var RJ=Je(),QE=(0,RJ.Debug)("FailoverDetector"),S2="+switch-master",YE=class{constructor(e,r){this.isDisconnected=!1,this.connector=e,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let e of this.sentinels)e.client.disconnect()}async subscribe(){QE("Starting FailoverDetector");let e=[];for(let r of this.sentinels){let n=r.client.subscribe(S2).catch(s=>{QE("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,s.message)});e.push(n),r.client.on("message",s=>{!this.isDisconnected&&s===S2&&this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,QE("Failover detected, disconnecting"),this.connector.disconnect()}};lp.FailoverDetector=YE});var dp=x(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.SentinelIterator=void 0;var IJ=require("net"),Wa=Je(),PJ=require("tls"),b2=y2();Qa.SentinelIterator=b2.default;var OJ=up(),kJ=Wn(),NJ=E2(),ui=(0,Wa.Debug)("SentinelConnector"),JE=class extends OJ.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new b2.default(this.options.sentinels)}check(e){let r=!e.role||this.options.role===e.role;return r||(ui("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){this.connecting=!0,this.retryAttempts=0;let r,n=async()=>{let s=this.sentinelIterator.next();if(s.done){this.sentinelIterator.reset(!1);let c=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,u=typeof c!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${c}ms.`;r&&(u+=` Last error: ${r.message}`),ui(u);let d=new Error(u);if(typeof c=="number")return e("error",d),await new Promise(l=>setTimeout(l,c)),n();throw d}let o=null,i=null;try{o=await this.resolve(s.value)}catch(c){i=c}if(!this.connecting)throw new Error(Wa.CONNECTION_CLOSED_ERROR_MSG);let a=s.value.host+":"+s.value.port;if(o)return ui("resolved: %s:%s from sentinel %s",o.host,o.port,a),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(o,this.options.tls),this.stream=(0,PJ.connect)(o),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,IJ.createConnection)(o),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",c=>{this.firstError=c}),this.stream;{let c=i?"failed to connect to sentinel "+a+" because "+i.message:"connected to sentinel "+a+" successfully, but got an invalid reply: "+o;return ui(c),e("sentinelError",new Error(c)),i&&(r=i),n()}};return n()}async updateSentinels(e){if(!this.options.updateSentinels)return;let r=await e.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(Wa.packObject).forEach(n=>{if((n.flags?n.flags.split(","):[]).indexOf("disconnected")===-1&&n.ip&&n.port){let o=this.sentinelNatResolve(_2(n));this.sentinelIterator.add(o)&&ui("adding sentinel %s:%s",o.host,o.port)}}),ui("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let r=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(e){let r=await e.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let n=r.map(Wa.packObject).filter(s=>s.flags&&!s.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(DJ(n,this.options.preferredSlaves))}sentinelNatResolve(e){if(!e||!this.options.natMap)return e;let r=`${e.host}:${e.port}`,n=e;return typeof this.options.natMap=="function"?n=this.options.natMap(r)||e:typeof this.options.natMap=="object"&&(n=this.options.natMap[r]||e),n}connectToSentinel(e,r){return new kJ.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(e){let r=this.connectToSentinel(e);r.on("error",MJ);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:n,value:s}=this.sentinelIterator.next();if(n)break;let o=this.connectToSentinel(s,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});o.on("reconnecting",()=>{var i;(i=this.emitter)===null||i===void 0||i.emit("sentinelReconnecting")}),r.push({address:s,client:o})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new NJ.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(e=this.emitter)===null||e===void 0||e.emit("failoverSubscribed")}};Qa.default=JE;function DJ(t,e){if(t.length===0)return null;let r;if(typeof e=="function")r=e(t);else if(e!==null&&typeof e=="object"){let n=Array.isArray(e)?e:[e];n.sort((s,o)=>(s.prio||(s.prio=1),o.prio||(o.prio=1),s.prio<o.prio?-1:s.prio>o.prio?1:0));for(let s=0;s<n.length;s++){for(let o=0;o<t.length;o++){let i=t[o];if(i.ip===n[s].ip&&i.port===n[s].port){r=i;break}}if(r)break}}return r||(r=(0,Wa.sample)(t)),_2(r)}function _2(t){return{host:t.ip,port:Number(t.port)}}function MJ(){}});var w2=x(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.SentinelConnector=li.StandaloneConnector=void 0;var FJ=g2();li.StandaloneConnector=FJ.default;var LJ=dp();li.SentinelConnector=LJ.default});var x2=x(ZE=>{"use strict";Object.defineProperty(ZE,"__esModule",{value:!0});var BJ=Hs(),XE=class extends BJ.AbortError{constructor(e){let r=`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};ZE.default=XE});var C2=x(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.MaxRetriesPerRequestError=void 0;var UJ=x2();fp.MaxRetriesPerRequestError=UJ.default});var O2=x((ede,P2)=>{"use strict";var o0=require("buffer").Buffer,$J=require("string_decoder").StringDecoder,e0=new $J,A2=Hs(),qJ=A2.ReplyError,jJ=A2.ParserError,or=o0.allocUnsafe(32*1024),wt=0,pp=null,Ya=0,t0=0;function HJ(t){let e=t.buffer.length-1;var r=t.offset,n=0,s=1;for(t.buffer[r]===45&&(s=-1,r++);r<e;){let o=t.buffer[r++];if(o===13)return t.offset=r+1,s*n;n=n*10+(o-48)}}function zJ(t){let e=t.buffer.length-1;var r=t.offset,n=0,s="";for(t.buffer[r]===45&&(s+="-",r++);r<e;){var o=t.buffer[r++];if(o===13)return t.offset=r+1,n!==0&&(s+=n),s;n>429496728?(s+=n*10+(o-48),n=0):o===48&&n===0?s+=0:n=n*10+(o-48)}}function v2(t){let e=t.offset,r=t.buffer,n=r.length-1;for(var s=e;s<n;)if(r[s++]===13)return t.offset=s+1,t.optionReturnBuffers===!0?t.buffer.slice(e,s-1):t.buffer.toString("utf8",e,s-1)}function T2(t){let e=t.buffer.length-1;for(var r=t.offset,n=0;r<e;){let s=t.buffer[r++];if(s===13)return t.offset=r+1,n;n=n*10+(s-48)}}function VJ(t){return t.optionStringNumbers===!0?zJ(t):HJ(t)}function KJ(t){let e=T2(t);if(e===void 0)return;if(e<0)return null;let r=t.offset+e;if(r+2>t.buffer.length){t.bigStrSize=r+2,t.totalChunkSize=t.buffer.length,t.bufferCache.push(t.buffer);return}let n=t.offset;return t.offset=r+2,t.optionReturnBuffers===!0?t.buffer.slice(n,r):t.buffer.toString("utf8",n,r)}function GJ(t){var e=v2(t);if(e!==void 0)return t.optionReturnBuffers===!0&&(e=e.toString()),new qJ(e)}function WJ(t,e){let r=new jJ("Protocol error, got "+JSON.stringify(String.fromCharCode(e))+" as reply type byte",JSON.stringify(t.buffer),t.offset);t.buffer=null,t.returnFatalError(r)}function QJ(t){let e=T2(t);if(e===void 0)return;if(e<0)return null;let r=new Array(e);return R2(t,r,0)}function r0(t,e,r){t.arrayCache.push(e),t.arrayPos.push(r)}function n0(t){let e=t.arrayCache.pop();var r=t.arrayPos.pop();if(t.arrayCache.length){let n=n0(t);if(n===void 0){r0(t,e,r);return}e[r++]=n}return R2(t,e,r)}function R2(t,e,r){let n=t.buffer.length;for(;r<e.length;){let s=t.offset;if(t.offset>=n){r0(t,e,r);return}let o=I2(t,t.buffer[t.offset++]);if(o===void 0){t.arrayCache.length||t.bufferCache.length||(t.offset=s),r0(t,e,r);return}e[r]=o,r++}return e}function I2(t,e){switch(e){case 36:return KJ(t);case 43:return v2(t);case 42:return QJ(t);case 58:return VJ(t);case 45:return GJ(t);default:return WJ(t,e)}}function YJ(){if(or.length>50*1024)if(Ya===1||t0>Ya*2){let t=Math.floor(or.length/10),e=t<wt?wt:t;wt=0,or=or.slice(e,or.length)}else t0++,Ya--;else clearInterval(pp),Ya=0,t0=0,pp=null}function JJ(t){if(or.length<t+wt){let e=t>78643200?2:3;wt>1024*1024*111&&(wt=1024*1024*50),or=o0.allocUnsafe(t*e+wt),wt=0,Ya++,pp===null&&(pp=setInterval(YJ,50))}}function XJ(t){let e=t.bufferCache,r=t.offset;var n=e.length,s=t.bigStrSize-t.totalChunkSize;if(t.offset=s,s<=2){if(n===2)return e[0].toString("utf8",r,e[0].length+s-2);n--,s=e[e.length-2].length+s}for(var o=e0.write(e[0].slice(r)),i=1;i<n-1;i++)o+=e0.write(e[i]);return o+=e0.end(e[i].slice(0,s-2)),o}function ZJ(t){let e=t.bufferCache,r=t.offset,n=t.bigStrSize-r-2;var s=e.length,o=t.bigStrSize-t.totalChunkSize;if(t.offset=o,o<=2){if(s===2)return e[0].slice(r,e[0].length+o-2);s--,o=e[e.length-2].length+o}JJ(n);let i=wt;e[0].copy(or,i,r,e[0].length),wt+=e[0].length-r;for(var a=1;a<s-1;a++)e[a].copy(or,wt),wt+=e[a].length;return e[a].copy(or,wt,0,o-2),wt+=o-2,or.slice(i,wt)}var s0=class{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if(typeof e.returnError!="function"||typeof e.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if(typeof e!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(this.buffer===null)this.buffer=e,this.offset=0;else if(this.bigStrSize===0){let n=this.buffer.length,s=n-this.offset,o=o0.allocUnsafe(s+e.length);if(this.buffer.copy(o,0,this.offset,n),e.copy(o,s,0,e.length),this.buffer=o,this.offset=0,this.arrayCache.length){let i=n0(this);if(i===void 0)return;this.returnReply(i)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var r=this.optionReturnBuffers?ZJ(this):XJ(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=n0(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let n=this.offset,s=this.buffer[this.offset++],o=I2(this,s);if(o===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=n);return}s===45?this.returnError(o):this.returnReply(o)}this.buffer=null}};P2.exports=s0});var N2=x((tde,k2)=>{"use strict";k2.exports=O2()});var D2=x(c0=>{"use strict";Object.defineProperty(c0,"__esModule",{value:!0});var a0=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,r){this.set[i0(e)][r]=!0}del(e,r){delete this.set[i0(e)][r]}channels(e){return Object.keys(this.set[i0(e)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};c0.default=a0;function i0(t){return t==="unsubscribe"?"subscribe":t==="punsubscribe"?"psubscribe":t==="sunsubscribe"?"ssubscribe":t}});var B2=x(l0=>{"use strict";Object.defineProperty(l0,"__esModule",{value:!0});var M2=Wr(),eX=Je(),tX=N2(),rX=D2(),nX=(0,eX.Debug)("dataHandler"),u0=class{constructor(e,r){this.redis=e;let n=new tX({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:s=>{this.returnError(s)},returnFatalError:s=>{this.returnFatalError(s)},returnReply:s=>{this.returnReply(s)}});e.stream.prependListener("data",s=>{n.execute(s)}),e.stream.resume()}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let r=this.shiftCommand(e);if(r){if(e.command={name:r.command.name,args:r.command.args},r.command.name=="ssubscribe"&&e.message.includes("MOVED")){this.redis.emit("moved");return}this.redis.handleReconnection(e,r)}}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let r=this.shiftCommand(e);r&&(M2.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new rX.default,this.redis.condition.subscriber.add(r.command.name,e[1].toString()),F2(r.command,e[2])||this.redis.commandQueue.unshift(r)):M2.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?L2(r.command,e[2])||this.redis.commandQueue.unshift(r):r.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(e)?e[0].toString():null;switch(nX('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let n=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",n,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",n,e[2],e[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let n=e[1].toString();this.redis.condition.subscriber.add(r,n);let s=this.shiftCommand(e);if(!s)return;F2(s.command,e[2])||this.redis.commandQueue.unshift(s);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let n=e[1]?e[1].toString():null;n&&this.redis.condition.subscriber.del(r,n);let s=e[2];Number(s)===0&&(this.redis.condition.subscriber=!1);let o=this.shiftCommand(e);if(!o)return;L2(o.command,s)||this.redis.commandQueue.unshift(o);break}default:{let n=this.shiftCommand(e);if(!n)return;n.command.resolve(e)}}return!0}handleMonitorReply(e){if(this.redis.status!=="monitoring")return!1;let r=e.toString();if(r==="OK")return!1;let n=r.indexOf(" "),s=r.slice(0,n),o=r.indexOf('"'),i=r.slice(o+1,-1).split('" "').map(c=>c.replace(/\\"/g,'"')),a=r.slice(n+2,o-2).split(" ");return this.redis.emit("monitor",s,i,a[1],a[0]),!0}shiftCommand(e){let r=this.redis.commandQueue.shift();if(!r){let n="Command queue state error. If you can reproduce this, please report it.",s=new Error(n+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",s),null}return r}};l0.default=u0;var Qn=new WeakMap;function F2(t,e){let r=Qn.has(t)?Qn.get(t):t.args.length;return r-=1,r<=0?(t.resolve(e),Qn.delete(t),!0):(Qn.set(t,r),!1)}function L2(t,e){let r=Qn.has(t)?Qn.get(t):t.args.length;return r===0?Number(e)===0?(Qn.delete(t),t.resolve(e),!0):!1:(r-=1,r<=0?(t.resolve(e),!0):(Qn.set(t,r),!1))}});var U2=x(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.readyHandler=Wt.errorHandler=Wt.closeHandler=Wt.connectHandler=void 0;var sX=Hs(),oX=Wr(),iX=C2(),Rr=Je(),aX=B2(),Xe=(0,Rr.Debug)("connection");function cX(t){return function(){var e;t.setStatus("connect"),t.resetCommandQueue();let r=!1,{connectionEpoch:n}=t;t.condition.auth&&t.auth(t.condition.auth,function(o){n===t.connectionEpoch&&o&&(o.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):o.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):o.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(r=!0,t.recoverFromFatalError(o,o)))}),t.condition.select&&t.select(t.condition.select).catch(o=>{t.silentEmit("error",o)}),new aX.default(t,{stringNumbers:t.options.stringNumbers});let s=[];t.options.connectionName&&(Xe("set the connection name [%s]",t.options.connectionName),s.push(t.client("setname",t.options.connectionName).catch(Rr.noop))),t.options.disableClientInfo||(Xe("set the client info"),s.push((0,Rr.getPackageMeta)().then(o=>t.client("SETINFO","LIB-VER",o.version).catch(Rr.noop)).catch(Rr.noop)),s.push(t.client("SETINFO","LIB-NAME",!((e=t.options)===null||e===void 0)&&e.clientInfoTag?`ioredis(${t.options.clientInfoTag})`:"ioredis").catch(Rr.noop))),Promise.all(s).catch(Rr.noop).finally(()=>{t.options.enableReadyCheck||Wt.readyHandler(t)(),t.options.enableReadyCheck&&t._readyCheck(function(o,i){n===t.connectionEpoch&&(o?r||t.recoverFromFatalError(new Error("Ready check failed: "+o.message),o):t.connector.check(i)?Wt.readyHandler(t)():t.disconnect(!0))})})}}Wt.connectHandler=cX;function d0(t){let e=new sX.AbortError("Command aborted due to connection close");return e.command={name:t.name,args:t.args},e}function uX(t){var e;let r=0;for(let n=0;n<t.length;){let s=(e=t.peekAt(n))===null||e===void 0?void 0:e.command,o=s.pipelineIndex;if((o===void 0||o===0)&&(r=0),o!==void 0&&o!==r++){t.remove(n,1),s.reject(d0(s));continue}n++}}function lX(t){var e;for(let r=0;r<t.length;){let n=(e=t.peekAt(r))===null||e===void 0?void 0:e.command;if(n.name==="multi")break;if(n.name==="exec"){t.remove(r,1),n.reject(d0(n));break}n.inTransaction?(t.remove(r,1),n.reject(d0(n))):r++}}function dX(t){return function(){let r=t.status;if(t.setStatus("close"),t.commandQueue.length&&uX(t.commandQueue),t.offlineQueue.length&&lX(t.offlineQueue),r==="ready"&&(t.prevCondition||(t.prevCondition=t.condition),t.commandQueue.length&&(t.prevCommandQueue=t.commandQueue)),t.manuallyClosing)return t.manuallyClosing=!1,Xe("skip reconnecting since the connection is manually closed."),e();if(typeof t.options.retryStrategy!="function")return Xe("skip reconnecting because `retryStrategy` is not a function"),e();let n=t.options.retryStrategy(++t.retryAttempts);if(typeof n!="number")return Xe("skip reconnecting because `retryStrategy` doesn't return a number"),e();Xe("reconnect in %sms",n),t.setStatus("reconnecting",n),t.reconnectTimeout=setTimeout(function(){t.reconnectTimeout=null,t.connect().catch(Rr.noop)},n);let{maxRetriesPerRequest:s}=t.options;typeof s=="number"&&(s<0?Xe("maxRetriesPerRequest is negative, ignoring..."):t.retryAttempts%(s+1)===0&&(Xe("reach maxRetriesPerRequest limitation, flushing command queue..."),t.flushQueue(new iX.MaxRetriesPerRequestError(s))))};function e(){t.setStatus("end"),t.flushQueue(new Error(Rr.CONNECTION_CLOSED_ERROR_MSG))}}Wt.closeHandler=dX;function fX(t){return function(e){Xe("error: %s",e),t.silentEmit("error",e)}}Wt.errorHandler=fX;function pX(t){return function(){if(t.setStatus("ready"),t.retryAttempts=0,t.options.monitor){t.call("monitor").then(()=>t.setStatus("monitoring"),n=>t.emit("error",n));let{sendCommand:r}=t;t.sendCommand=function(n){return oX.default.checkFlag("VALID_IN_MONITOR_MODE",n.name)?r.call(t,n):(n.reject(new Error("Connection is in monitoring mode, can't process commands.")),n.promise)},t.once("close",function(){delete t.sendCommand});return}let e=t.prevCondition?t.prevCondition.select:t.condition.select;if(t.options.readOnly&&(Xe("set the connection to readonly mode"),t.readonly().catch(Rr.noop)),t.prevCondition){let r=t.prevCondition;if(t.prevCondition=null,r.subscriber&&t.options.autoResubscribe){t.condition.select!==e&&(Xe("connect to db [%d]",e),t.select(e));let n=r.subscriber.channels("subscribe");n.length&&(Xe("subscribe %d channels",n.length),t.subscribe(n));let s=r.subscriber.channels("psubscribe");s.length&&(Xe("psubscribe %d channels",s.length),t.psubscribe(s));let o=r.subscriber.channels("ssubscribe");if(o.length){Xe("ssubscribe %s",o.length);for(let i of o)t.ssubscribe(i)}}}if(t.prevCommandQueue)if(t.options.autoResendUnfulfilledCommands)for(Xe("resend %d unfulfilled commands",t.prevCommandQueue.length);t.prevCommandQueue.length>0;){let r=t.prevCommandQueue.shift();r.select!==t.condition.select&&r.command.name!=="select"&&t.select(r.select),t.sendCommand(r.command,r.stream)}else t.prevCommandQueue=null;if(t.offlineQueue.length){Xe("send %d commands in offline queue",t.offlineQueue.length);let r=t.offlineQueue;for(t.resetOfflineQueue();r.length>0;){let n=r.shift();n.select!==t.condition.select&&n.command.name!=="select"&&t.select(n.select),t.sendCommand(n.command,n.stream)}}t.condition.select!==e&&(Xe("connect to db [%d]",e),t.select(e))}}Wt.readyHandler=pX});var $2=x(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.DEFAULT_REDIS_OPTIONS=void 0;hp.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(t){return Math.min(t*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(t){return Math.min(t*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}});var Wn=x(p0=>{"use strict";Object.defineProperty(p0,"__esModule",{value:!0});var q2=ei(),H2=require("events"),f0=zn(),hX=jE(),Ja=Wr(),mX=w2(),gX=dp(),Yn=U2(),yX=$2(),SX=tp(),EX=AE(),Ks=Je(),bX=TE(),_X=np(),Jn=Qf(),j2=ap(),Xn=(0,Ks.Debug)("redis"),Zn=class t extends _X.default{constructor(e,r,n){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,r,n),H2.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let s=new gX.default(this.options);s.emitter=this,this.connector=s}else this.connector=new mX.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([s,o])=>{this.defineCommand(s,o)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(Jn.noop)}static createClient(...e){return new t(...e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}connect(e){let r=new Promise((n,s)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){s(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:o}=this;this.condition={select:o.db,auth:o.username?[o.username,o.password]:o.password,subscriber:!1};let i=this;(0,f0.default)(this.connector.connect(function(a,c){i.silentEmit(a,c)}),function(a,c){if(a){i.flushQueue(a),i.silentEmit("error",a),s(a),i.setStatus("end");return}let u=o.tls?"secureConnect":"connect";if("sentinels"in o&&o.sentinels&&!o.enableTLSForSentinelMode&&(u="connect"),i.stream=c,o.noDelay&&c.setNoDelay(!0),typeof o.keepAlive=="number"&&(c.connecting?c.once(u,()=>{c.setKeepAlive(!0,o.keepAlive)}):c.setKeepAlive(!0,o.keepAlive)),c.connecting){if(c.once(u,Yn.connectHandler(i)),o.connectTimeout){let m=!1;c.setTimeout(o.connectTimeout,function(){if(m)return;c.setTimeout(0),c.destroy();let h=new Error("connect ETIMEDOUT");h.errorno="ETIMEDOUT",h.code="ETIMEDOUT",h.syscall="connect",Yn.errorHandler(i)(h)}),c.once(u,function(){m=!0,c.setTimeout(0)})}}else if(c.destroyed){let m=i.connector.firstError;m&&process.nextTick(()=>{Yn.errorHandler(i)(m)}),process.nextTick(Yn.closeHandler(i))}else process.nextTick(Yn.connectHandler(i));c.destroyed||(c.once("error",Yn.errorHandler(i)),c.once("close",Yn.closeHandler(i)));let d=function(){i.removeListener("close",l),n()};var l=function(){i.removeListener("ready",d),s(new Error(Ks.CONNECTION_CLOSED_ERROR_MSG))};i.once("ready",d),i.once("close",l)})});return(0,f0.default)(r,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?Yn.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new t({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":!((e=this.condition)===null||e===void 0)&&e.subscriber?"subscriber":"normal"}monitor(e){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,f0.default)(new Promise(function(n,s){r.once("error",s),r.once("monitoring",function(){n(r)})}),e)}sendCommand(e,r){var n,s;if(this.status==="wait"&&this.connect().catch(Jn.noop),this.status==="end")return e.reject(new Error(Ks.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if(!((n=this.condition)===null||n===void 0)&&n.subscriber&&!Ja.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;typeof this.options.commandTimeout=="number"&&e.setTimeout(this.options.commandTimeout);let o=this.status==="ready"||!r&&this.status==="connect"&&(0,q2.exists)(e.name)&&((0,q2.hasFlag)(e.name,"loading")||Ja.default.checkFlag("HANDSHAKE_COMMANDS",e.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(o=!1):o=!1,o)Xn.enabled&&Xn("write command[%s]: %d -> %s(%o)",this._getDescription(),(s=this.condition)===null||s===void 0?void 0:s.select,e.name,e.args),r?"isPipeline"in r&&r.isPipeline?r.write(e.toWritable(r.destination.redis.stream)):r.write(e.toWritable(r)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:r,select:this.condition.select}),Ja.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return e.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if(e.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;Xn.enabled&&Xn("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:r,select:this.condition.select})}if(e.name==="select"&&(0,Ks.isInt)(e.args[0])){let i=parseInt(e.args[0],10);this.condition.select!==i&&(this.condition.select=i,this.emit("select",i),Xn("switch to db [%d]",this.condition.select))}return e.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}silentEmit(e,r){let n;if(!(e==="error"&&(n=r,this.status==="end"||this.manuallyClosing&&n instanceof Error&&(n.message===Ks.CONNECTION_CLOSED_ERROR_MSG||n.syscall==="connect"||n.syscall==="read"))))return this.listeners(e).length>0?this.emit.apply(this,arguments):(n&&n instanceof Error&&console.error("[ioredis] Unhandled error event:",n.stack),!1)}recoverFromFatalError(e,r,n){this.flushQueue(r,n),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(e,r){var n;let s=!1;switch(this.options.reconnectOnError&&!Ja.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",r.command.name)&&(s=this.options.reconnectOnError(e)),s){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(e);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((n=this.condition)===null||n===void 0?void 0:n.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(e)}}_getDescription(){let e;return"path"in this.options&&this.options.path?e=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?e=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?e=this.options.host+":"+this.options.port:e="",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new j2}resetOfflineQueue(){this.offlineQueue=new j2}parseOptions(...e){let r={},n=!1;for(let s=0;s<e.length;++s){let o=e[s];if(!(o===null||typeof o>"u"))if(typeof o=="object")(0,Jn.defaults)(r,o);else if(typeof o=="string")(0,Jn.defaults)(r,(0,Ks.parseURL)(o)),o.startsWith("rediss://")&&(n=!0);else if(typeof o=="number")r.port=o;else throw new Error("Invalid argument "+o)}n&&(0,Jn.defaults)(r,{tls:!0}),(0,Jn.defaults)(r,t.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,Ks.resolveTLSProfile)(r)}setStatus(e,r){Xn.enabled&&Xn("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,r))}createScanStream(e,{key:r,options:n={}}){return new SX.default({objectMode:!0,key:r,redis:this,command:e,...n})}flushQueue(e,r){r=(0,Jn.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let n;if(r.offlineQueue)for(;n=this.offlineQueue.shift();)n.command.reject(e);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");n=this.commandQueue.shift();)n.command.reject(e)}_readyCheck(e){let r=this;this.info(function(n,s){if(n)return n.message&&n.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${n.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(n);if(typeof s!="string")return e(null,s);let o={},i=s.split(`\r
`);for(let a=0;a<i.length;++a){let[c,...u]=i[a].split(":"),d=u.join(":");d&&(o[c]=d)}if(!o.loading||o.loading==="0")e(null,o);else{let a=(o.loading_eta_seconds||1)*1e3,c=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<a?r.options.maxLoadingRetryTime:a;Xn("Redis server still loading, trying again in "+c+"ms"),setTimeout(function(){r._readyCheck(e)},c)}}).catch(Jn.noop)}};Zn.Cluster=hX.default;Zn.Command=Ja.default;Zn.defaultOptions=yX.DEFAULT_REDIS_OPTIONS;(0,bX.default)(Zn,H2.EventEmitter);(0,EX.addTransactionSupport)(Zn.prototype);p0.default=Zn});var K2=x((Ae,V2)=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.print=Ae.ReplyError=Ae.SentinelIterator=Ae.SentinelConnector=Ae.AbstractConnector=Ae.Pipeline=Ae.ScanStream=Ae.Command=Ae.Cluster=Ae.Redis=Ae.default=void 0;Ae=V2.exports=Wn().default;var wX=Wn();Object.defineProperty(Ae,"default",{enumerable:!0,get:function(){return wX.default}});var xX=Wn();Object.defineProperty(Ae,"Redis",{enumerable:!0,get:function(){return xX.default}});var CX=jE();Object.defineProperty(Ae,"Cluster",{enumerable:!0,get:function(){return CX.default}});var AX=Wr();Object.defineProperty(Ae,"Command",{enumerable:!0,get:function(){return AX.default}});var vX=tp();Object.defineProperty(Ae,"ScanStream",{enumerable:!0,get:function(){return vX.default}});var TX=wE();Object.defineProperty(Ae,"Pipeline",{enumerable:!0,get:function(){return TX.default}});var RX=up();Object.defineProperty(Ae,"AbstractConnector",{enumerable:!0,get:function(){return RX.default}});var z2=dp();Object.defineProperty(Ae,"SentinelConnector",{enumerable:!0,get:function(){return z2.default}});Object.defineProperty(Ae,"SentinelIterator",{enumerable:!0,get:function(){return z2.SentinelIterator}});Ae.ReplyError=Hs().ReplyError;Object.defineProperty(Ae,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(t){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function IX(t,e){console.log(t?"Error: "+t:"Reply: "+e)}Ae.print=IX});var MX={};dt(MX,{handler:()=>DX});module.exports=re(MX);var mp=w(ZM(),1),G2=w(Or(),1),W2=w(require("https"),1),Q2=w(K2(),1);var Y2=w(require("crypto"),1),PX=new W2.default.Agent({keepAlive:!0,maxSockets:50,rejectUnauthorized:!0}),OX=new mp.KinesisClient({region:process.env.AWS_REGION||"ap-northeast-2",requestHandler:new G2.NodeHttpHandler({httpsAgent:PX})}),h0=null;function kX(){return h0||(h0=new Q2.default({host:process.env.VALKEY_HOST,port:parseInt(process.env.VALKEY_PORT||"6379"),lazyConnect:!0,connectTimeout:2e3,retryStrategy:t=>Math.min(t*50,2e3)})),h0}function NX(t="ord"){return`${t}_${Y2.default.randomUUID().split("-")[0]}${Date.now().toString(36)}`}var DX=async t=>{let e={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type","Access-Control-Allow-Methods":"POST, OPTIONS"};if(t.httpMethod==="OPTIONS"||t.requestContext?.http?.method==="OPTIONS")return{statusCode:200,headers:e,body:""};let r=kX();try{let n;if(typeof t.body=="string"?n=JSON.parse(t.body):t.body?n=t.body:n=t,!n.symbol||!n.user_id)return{statusCode:400,headers:e,body:JSON.stringify({error:"Missing required fields: symbol, user_id"})};let{symbol:s,user_id:o,action:i="ADD",order_id:a,price:c=0,quantity:u=0,side:d="BUY",type:l="LIMIT",qty_delta:m=0,conditions:h=null}=n,g={},C=a;if(i==="ADD"){C=NX();let R=Number(c),O=l,D=h||{};if(l==="MARKET"){try{let M=await r.get(`depth:${s}`),j=M?JSON.parse(M):null;if(!(d==="BUY"||d==="buy"?j?.a?.length>0:j?.b?.length>0))return{statusCode:400,headers:e,body:JSON.stringify({error:"MARKET_NO_LIQUIDITY",message:"\uC2DC\uC7A5\uAC00 \uC8FC\uBB38 \uBD88\uAC00: \uC624\uB354\uBD81\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4"})}}catch(M){console.warn("Depth check failed, proceeding anyway:",M.message)}d==="BUY"||d==="buy"?R=2147483647:R=0,D.immediate_or_cancel=!0}g={action:"ADD",order_id:C,user_id:o,symbol:s,is_buy:d==="BUY"||d==="buy",price:R,quantity:Number(u),order_type:O,timestamp:Date.now(),conditions:D}}else if(i==="CANCEL"){if(!a)throw new Error("order_id is required for CANCEL");g={action:"CANCEL",order_id:a,user_id:o,symbol:s,timestamp:Date.now()}}else if(i==="REPLACE"){if(!a)throw new Error("order_id is required for REPLACE");g={action:"REPLACE",order_id:a,user_id:o,symbol:s,qty_delta:Number(m),new_price:Number(c),timestamp:Date.now()}}else return{statusCode:400,headers:e,body:JSON.stringify({error:"Invalid action"})};let T=process.env.KINESIS_ORDERS_STREAM||"supernoba-orders";return await OX.send(new mp.PutRecordCommand({StreamName:T,Data:Buffer.from(JSON.stringify(g)),PartitionKey:s})),{statusCode:200,headers:e,body:JSON.stringify({message:`${i} accepted`,order_id:C,action:i,symbol:s,stream:T})}}catch(n){return console.error("Error:",n),{statusCode:500,headers:e,body:JSON.stringify({error:n.message})}}};0&&(module.exports={handler});
